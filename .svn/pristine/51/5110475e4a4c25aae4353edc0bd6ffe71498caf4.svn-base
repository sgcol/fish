webpackJsonp([10],{40:function(t,e,i){"use strict";function n(){}function r(t){var e="";return t[10]&&(e+="五小牛 "),t[7]&&(e+="四炸牛 "),t[5]&&(e+="五花牛 "),t[4]&&(e+="四花牛 "),e=0==e.length?"不带牛牛以上的牌型":"带"+e}function a(t){function e(t){wx.stopRecord({success:function(e){t(null,e)},fail:function(e){t(e)}})}var i=h.timeout(e,800);i(t)}function s(){wx.onVoicePlayEnd({success:function(t){var e=u[t.localId];console.log(t),"function"==typeof e.cb&&(e.cb(),delete u[t.localId])}}),setInterval(function(){var t=new Date;for(var e in u){var i=u[e];t-i.t>=3e3&&(i.cb&&i.cb(),delete u[e])}},3e3)}var o=window.tongji=i(47);window.preInvite=function(t,e){if(window.wechatObj){var i={type:"link",title:"牛牛大作战，房号:"+t+"("+e.pan+"局)",link:"http://h5.1357g.com/g/niuniu.app?room="+t,imgUrl:location.origin+location.pathname+"res/logo.png",desc:"轮庄，"+r(e.rule)+", "+e.dizhu+"底！"};window.wechatObj.shareOnChat(i),window.wechatObj.shareOnMoment(i),window.invite=function(){var i="点击"+(0==Laya.stage.canvasDegree?"右":"左")+"上角分享按钮，邀请好友加入游戏";tipon(i).popup(),o.invite(t,"轮庄，"+r(e.rule)+", "+e.dizhu+"底！")}}},window.invite=function(){var t="点击"+(0==Laya.stage.canvasDegree?"右":"左")+"上角分享按钮，邀请好友加入游戏";tipon(t).popup()},window.share=function(){var t="点击"+(0==Laya.stage.canvasDegree?"右":"左")+"上角分享按钮，分享到朋友圈";tipon(t).popup(),o.share()},window.preShareResult=function(t,e,i,n,r){var a={type:"link",title:"牛牛大作战，房号:"+t+(null!=e?", 第"+e+"局":""),link:"http://h5.1357g.com/g/niuniu.app"+r,imgUrl:"http://h5.1357g.com/g/niuniu.app"+r,desc:(i||[]).join(",")+" 胜利者 "+(n||[]).join(",")};window.wechatObj.shareOnChat(a),window.wechatObj.shareOnMoment(a)},window.pay=function(t,e,i,r){!r&&(r=n),o.beginCharge(t,e,i,"微信公众号支付"),getAjax("weixin/getWechatpayParams",{order:t,money:e,openid:startup_param.openid},function(e,i){return e||i.err?tipon(e||i.err).popup():(i.success=function(e){"chooseWXPay:ok"==e.errMsg?(o.endCharge(t,"微信公众号支付"),r(null,!0)):r(null,!1)},void wx.chooseWXPay(i))})};var h=i(34),l=h.queue(function(t,e){return"function"==typeof t?t(e):void e()}),c={starting:!1,stopping:!1};window.startRecord=function(t){return c.starting?t(c.starting):(c.starting=!0,void l.push([function(e){wx.startRecord({fail:function(e){t(e),t=null},sucess:function(){}}),e()},function(t){setTimeout(t,500)},function(e){c.starting=!1,t&&t(c.starting),e()}]))},window.stopRecord=function(t){return c.stopping?t("already stopping"):(c.stopping=!0,void l.push(a,function(e,i){return c.stopping=!1,t?e?t(e):void window.sendRecord(i.localId,t):void 0}))},window.sendRecord=function(t,e){wx.uploadVoice({localId:t,isShowProgressTips:0,success:function(t){var i=t.serverId;e(null,i)}})};var u={};window.playRecord=function(t,e){wx.downloadVoice({serverId:t,isShowProgressTips:0,success:function(t){var i=t.localId;wx.playVoice({localId:i}),u[i]={cb:e,t:new Date}}})},accWechatIntf("weixin/sign",{},function(t,e){if(t)return console.log(t);var n=i(77);e.jsApiList=["onMenuShareTimeline","onMenuShareAppMessage","startRecord","stopRecord","onVoiceRecordEnd","playVoice","pauseVoice","stopVoice","onVoicePlayEnd","uploadVoice","downloadVoice"],e.success=function(){window.wxInit&&window.wxInit()};window.wechatObj=new n(e)}),window.wxInit=function(){function t(){var t=setInterval(function(){wx.stopRecord({success:function(e){clearInterval(t)}})},300)}var e={type:"link",title:"牛牛大作战，大家来斗牛",link:location.origin+location.pathname,imgUrl:location.origin+location.pathname+"res/logo.png",desc:""};try{window.wechatObj.shareOnChat(e),window.wechatObj.shareOnMoment(e)}catch(i){console.log(i)}wx.startRecord(),t(),s()}},47:function(t,e,i){"use strict";var n=i(81);t.exports=n},77:function(t,e,i){/*!
	 * @license MIT
	 * Client side js to use wechat-jssdk, also works with other server side service.
	 * https://github.com/JasonBoy/wechat-jssdk
	 */
"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=window.document,s=window.location,o=s.protocol+"//res.wx.qq.com/open/js/jweixin-1.0.0.js",h=["onMenuShareTimeline","onMenuShareAppMessage"],l=function(){function t(e){if(n(this,t),this instanceof t){this.config=e||{},this.config.customUrl&&(o=this.config.customUrl,delete this.config.customUrl);var i=this.config.jsApiList;if(!i||i.length<=0)this.config.jsApiList=h;else for(var r=0,a=h.length;a>r;r++){var s=h[r];i.indexOf(s)<0&&i.push(s)}return this.debug=!!this.config.debug,this.loadScript(),this}return new t(e)}return r(t,[{key:"signSignature",value:function(t){var e=this,i=this.config,n=t||i,r={debug:this.debug,appId:i.appId,timestamp:n.timestamp||i.timestamp,nonceStr:n.nonceStr||i.nonceStr,signature:n.signature||i.signature,jsApiList:i.jsApiList.slice(0,i.jsApiList.length)},a=this.debug;if(!window.wx)return console.warn("wechat js not defined"),this;var s=window.wx;return s.config(r),s.ready(function(){console.log("sign signature finished..."),a&&alert("sign signature finished..."),n.success&&n.success.call(e)}),s.error(function(t){a&&alert("sign error: "+JSON.stringify(t)),n.error&&n.error.call(e,t)}),this.wx||(this.wx=s),this}},{key:"loadScript",value:function(){var t=this,e=a.createElement("script");e.type="text/javascript",e.async=!0,e.onload=function(){console.log("Wechat script loaded successfully!"),t.signSignature()},e.onerror=function(e){console.error("Failed to load wechat script!"),console.error(e),t.debug&&alert("Cannot load wechat script!")};var i=a.getElementsByTagName("script")[0];return i.parentNode.insertBefore(e,i),e.src=o,this}},{key:"shareOnMoment",value:function(t){return t?this.callWechatApi("onMenuShareTimeline",t):this}},{key:"shareOnChat",value:function(t){return t?this.callWechatApi("onMenuShareAppMessage",t):this}},{key:"callWechatApi",value:function(t,e){if(!t)return this;var i=this.debug;if(this.config.jsApiList.indexOf(t)<0)return i&&alert("the wechat api ["+t+"] you call was not registered, \npls add the api into your [jsApiList] config"),this;var n=this.wx[t];return n&&"function"==typeof n?(n(e),this):(i&&alert("no such api ["+t+"] found!"),this)}}]),t}();t.exports=l},81:function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();window.zhuge=window.zhuge||[],window.zhuge.methods="_init debug identify track trackLink trackForm page".split(" "),window.zhuge.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);return e.unshift(t),window.zhuge.push(e),window.zhuge}};for(var s=0;s<window.zhuge.methods.length;s++){var o=window.zhuge.methods[s];window.zhuge[o]=window.zhuge.factory(o)}window.zhuge.load=function(t,e){if(!document.getElementById("zhuge-js")){var i=document.createElement("script"),n=new Date,r=n.getFullYear().toString()+n.getMonth().toString()+n.getDate().toString();i.type="text/javascript",i.id="zhuge-js",i.async=!0,i.src=("http:"==location.protocol?"http://sdk.zhugeio.com/zhuge.min.js?v=":"https://zgsdk.zhugeio.com/zhuge.min.js?v=")+r,i.onerror=function(){window.zhuge.identify=window.zhuge.track=function(t,e,i){i&&"[object Function]"===Object.prototype.toString.call(i)&&i()}};var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(i,a),window.zhuge._init(t,e)}},window.zhuge.load("a6294c4a959947719afd7248e98fe072");var h=function(){function t(){n(this,t),this._delayOp=[],this._inited=!0}return a(t,[{key:"init",value:function(t){this._inited=!0}},{key:"_delay",value:function(t){return this._inited?void t():this._delayOp.push({f:t})}},{key:"userin",value:function(t){this._delay(function(){var e=0;if(window.cordova){e=device.platform}else"wechat"==startup_param.pf&&(e="wechat");zhuge.identify(t.id,{name:t.nickname,gender:startup_param.sex,level:t.level,gameServer:"通用",accountType:e})})}},{key:"userout",value:function(){this._delay(function(){zhuge.track("userout")})}},{key:"levelup",value:function(t){this._delay(function(){zhuge.track("levelup",{level:t})})}},{key:"reward",value:function(t,e){this._delay(function(){zhuge.track("reward",{count:t,reason:e})})}},{key:"beginCharge",value:function(t,e,i,n,r){"string"==typeof i&&(r=n,n=i,i=Math.floor(e/3)),this._delay(function(){zhuge.track("beginCharge",{orderId:t,iapId:n,currencyAmount:e,currencyType:"CNY",virtualCurrencyAmount:i,paymentType:r})})}},{key:"endCharge",value:function(t,e){this._delay(function(){zhuge.track("endCharge",{orderId:t,paymentType:e})})}},{key:"enterGame",value:function(t){this._delay(function(){zhuge.track("enterGame",{table:t})})}},{key:"startGame",value:function(t,e,i){this._delay(function(){zhuge.track("startgame",{table:t,name:e}),i&&zhuge.track("consume",{item:e,itemNumber:1,priceInVirtualCurrency:i})})}},{key:"endGame",value:function(t){this._delay(function(){zhuge.track("endGame",{table:t})})}},{key:"share",value:function(){this._delay(function(){zhuge.track("share",{user:{id:me.id,nickname:me.nickname}})})}},{key:"invite",value:function(t,e){this._delay(function(){zhuge.track("invite",{user:{id:me.id,nickname:me.nickname},table:{id:t,msg:e}})})}},{key:"event",value:function(t,e){this._delay(function(){zhuge.track(t,"object"==("undefined"==typeof e?"undefined":r(e))?e:{data:e})})}},{key:"changeToVirtualCurrency",value:function(t,e,i,n){i=i||"金币",n=n||"钻石",this._delay(function(){var r={};r[i]=t,r[n]=e,zhuge.track("buyCoin",r)})}},{key:"consume",value:function(t,e,i){this._delay(function(){zhuge.track("consume",{item:t,itemNumber:e,priceInVirtualCurrency:i})})}}]),t}(),l=new h;window.onunload=l.userout.bind(l),t.exports=l}});