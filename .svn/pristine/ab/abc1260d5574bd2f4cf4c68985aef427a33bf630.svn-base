webpackJsonp([3],{3:function(t,e,i){"use strict";var n=(i(34),i(1),i(72),i(23),i(46),i(2),laya.net.Loader,laya.utils.Handler,{hall:function(){var t=arguments,e=i(24);e(function(e){e.apply(null,t)})},gamefish:function(){var t=arguments,e=i(26);e(function(e){e.apply(null,t)})},loading:function(){var t=arguments,e=i(28);console.log("load1"),e(function(e){e.apply(null,t)})}}),r=function(t,e,i){return n[t]?n[t](e,i):void i("no such view")},s={views:{},current:null,get:function(t,e,i){console.log("get");r(t,e,function(e,n){return console.log(t,"created"),e?i(e):void i(null,n)})},active:function(t,e,i){var n=this;this.get(t,e,function(e,r){return console.log("errr1"),e?i&&i(e):(console.log("enter",t),r==n.current?i&&i(null,r):(n.current&&(n.current.deactive&&n.current.deactive(),fairygui.GRoot.inst.removeChild(n.current._view)),Laya.SoundManager.stopAll(),r._view.setSize(fairygui.GRoot.inst.width,fairygui.GRoot.inst.height),r._view.addRelation(fairygui.GRoot.inst,fairygui.RelationType.Size),fairygui.GRoot.inst.addChild(r._view),n.current=r,void(i&&i(null,r))))})}};t.exports=s},14:function(t,e,i){(function(){/** @license zlib.js 2012 - imaya [ https://github.com/imaya/zlib.js ] The MIT License */
(function(){"use strict";function t(t,e){var i=t.split("."),n=a;!(i[0]in n)&&n.execScript&&n.execScript("var "+i[0]);for(var r;i.length&&(r=i.shift());)i.length||void 0===e?n=n[r]?n[r]:n[r]={}:n[r]=e}function e(t){var e,i,n,r,s,a,h,l,u,c,_=t.length,d=0,f=Number.POSITIVE_INFINITY;for(l=0;_>l;++l)t[l]>d&&(d=t[l]),t[l]<f&&(f=t[l]);for(e=1<<d,i=new(o?Uint32Array:Array)(e),n=1,r=0,s=2;d>=n;){for(l=0;_>l;++l)if(t[l]===n){for(a=0,h=r,u=0;n>u;++u)a=a<<1|1&h,h>>=1;for(c=n<<16|l,u=a;e>u;u+=s)i[u]=c;++r}++n,r<<=1,s<<=1}return[i,d,f]}function i(t,e){switch(this.g=[],this.h=32768,this.c=this.f=this.d=this.k=0,this.input=o?new Uint8Array(t):t,this.l=!1,this.i=l,this.q=!1,(e||!(e={}))&&(e.index&&(this.d=e.index),e.bufferSize&&(this.h=e.bufferSize),e.bufferType&&(this.i=e.bufferType),e.resize&&(this.q=e.resize)),this.i){case h:this.a=32768,this.b=new(o?Uint8Array:Array)(32768+this.h+258);break;case l:this.a=0,this.b=new(o?Uint8Array:Array)(this.h),this.e=this.v,this.m=this.s,this.j=this.t;break;default:throw Error("invalid inflate mode")}}function n(t,e){for(var i,n=t.f,r=t.c,s=t.input,a=t.d,o=s.length;e>r;){if(a>=o)throw Error("input buffer is broken");n|=s[a++]<<r,r+=8}return i=n&(1<<e)-1,t.f=n>>>e,t.c=r-e,t.d=a,i}function r(t,e){for(var i,n,r=t.f,s=t.c,a=t.input,o=t.d,h=a.length,l=e[0],u=e[1];u>s&&!(o>=h);)r|=a[o++]<<s,s+=8;return i=l[r&(1<<u)-1],n=i>>>16,t.f=r>>n,t.c=s-n,t.d=o,65535&i}function s(t){function i(t,e,i){var s,a,o,h=this.p;for(o=0;t>o;)switch(s=r(this,e)){case 16:for(a=3+n(this,2);a--;)i[o++]=h;break;case 17:for(a=3+n(this,3);a--;)i[o++]=0;h=0;break;case 18:for(a=11+n(this,7);a--;)i[o++]=0;h=0;break;default:h=i[o++]=s}return this.p=h,i}var s,a,h,l,u=n(t,5)+257,c=n(t,5)+1,_=n(t,4)+4,f=new(o?Uint8Array:Array)(d.length);for(l=0;_>l;++l)f[d[l]]=n(t,3);if(!o)for(l=_,_=f.length;_>l;++l)f[d[l]]=0;s=e(f),a=new(o?Uint8Array:Array)(u),h=new(o?Uint8Array:Array)(c),t.p=0,t.j(e(i.call(t,u,s,a)),e(i.call(t,c,s,h)))}var a=this,o="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array&&"undefined"!=typeof DataView,h=0,l=1;i.prototype.u=function(){for(;!this.l;){var t=n(this,3);switch(1&t&&(this.l=!0),t>>>=1){case 0:var e=this.input,i=this.d,r=this.b,a=this.a,u=e.length,c=void 0,_=void 0,d=r.length,f=void 0;if(this.c=this.f=0,i+1>=u)throw Error("invalid uncompressed block header: LEN");if(c=e[i++]|e[i++]<<8,i+1>=u)throw Error("invalid uncompressed block header: NLEN");if(_=e[i++]|e[i++]<<8,c===~_)throw Error("invalid uncompressed block header: length verify");if(i+c>e.length)throw Error("input buffer is broken");switch(this.i){case h:for(;a+c>r.length;){if(f=d-a,c-=f,o)r.set(e.subarray(i,i+f),a),a+=f,i+=f;else for(;f--;)r[a++]=e[i++];this.a=a,r=this.e(),a=this.a}break;case l:for(;a+c>r.length;)r=this.e({o:2});break;default:throw Error("invalid inflate mode")}if(o)r.set(e.subarray(i,i+c),a),a+=c,i+=c;else for(;c--;)r[a++]=e[i++];this.d=i,this.a=a,this.b=r;break;case 1:this.j(T,M);break;case 2:s(this);break;default:throw Error("unknown BTYPE: "+t)}}return this.m()};var u,c,_=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],d=o?new Uint16Array(_):_,f=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],p=o?new Uint16Array(f):f,m=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],g=o?new Uint8Array(m):m,y=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],v=o?new Uint16Array(y):y,x=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],b=o?new Uint8Array(x):x,w=new(o?Uint8Array:Array)(288);for(u=0,c=w.length;c>u;++u)w[u]=143>=u?8:255>=u?9:279>=u?7:8;var S,C,T=e(w),E=new(o?Uint8Array:Array)(30);for(S=0,C=E.length;C>S;++S)E[S]=5;var M=e(E);i.prototype.j=function(t,e){var i=this.b,s=this.a;this.n=t;for(var a,o,h,l,u=i.length-258;256!==(a=r(this,t));)if(256>a)s>=u&&(this.a=s,i=this.e(),s=this.a),i[s++]=a;else for(o=a-257,l=p[o],0<g[o]&&(l+=n(this,g[o])),a=r(this,e),h=v[a],0<b[a]&&(h+=n(this,b[a])),s>=u&&(this.a=s,i=this.e(),s=this.a);l--;)i[s]=i[s++-h];for(;8<=this.c;)this.c-=8,this.d--;this.a=s},i.prototype.t=function(t,e){var i=this.b,s=this.a;this.n=t;for(var a,o,h,l,u=i.length;256!==(a=r(this,t));)if(256>a)s>=u&&(i=this.e(),u=i.length),i[s++]=a;else for(o=a-257,l=p[o],0<g[o]&&(l+=n(this,g[o])),a=r(this,e),h=v[a],0<b[a]&&(h+=n(this,b[a])),s+l>u&&(i=this.e(),u=i.length);l--;)i[s]=i[s++-h];for(;8<=this.c;)this.c-=8,this.d--;this.a=s},i.prototype.e=function(){var t,e,i=new(o?Uint8Array:Array)(this.a-32768),n=this.a-32768,r=this.b;if(o)i.set(r.subarray(32768,i.length));else for(t=0,e=i.length;e>t;++t)i[t]=r[t+32768];if(this.g.push(i),this.k+=i.length,o)r.set(r.subarray(n,n+32768));else for(t=0;32768>t;++t)r[t]=r[n+t];return this.a=32768,r},i.prototype.v=function(t){var e,i,n,r,s=this.input.length/this.d+1|0,a=this.input,h=this.b;return t&&("number"==typeof t.o&&(s=t.o),"number"==typeof t.r&&(s+=t.r)),2>s?(i=(a.length-this.d)/this.n[2],r=258*(i/2)|0,n=r<h.length?h.length+r:h.length<<1):n=h.length*s,o?(e=new Uint8Array(n),e.set(h)):e=h,this.b=e},i.prototype.m=function(){var t,e,i,n,r,s=0,a=this.b,h=this.g,l=new(o?Uint8Array:Array)(this.k+(this.a-32768));if(0===h.length)return o?this.b.subarray(32768,this.a):this.b.slice(32768,this.a);for(e=0,i=h.length;i>e;++e)for(t=h[e],n=0,r=t.length;r>n;++n)l[s++]=t[n];for(e=32768,i=this.a;i>e;++e)l[s++]=a[e];return this.g=[],this.buffer=l},i.prototype.s=function(){var t,e=this.a;return o?this.q?(t=new Uint8Array(e),t.set(this.b.subarray(0,e))):t=this.b.subarray(0,e):(this.b.length>e&&(this.b.length=e),t=this.b),this.buffer=t},t("Zlib.RawInflate",i),t("Zlib.RawInflate.prototype.decompress",i.prototype.u);var I,A,D,R,P={ADAPTIVE:l,BLOCK:h};if(Object.keys)I=Object.keys(P);else for(A in I=[],D=0,P)I[D++]=A;for(D=0,R=I.length;R>D;++D)A=I[D],t("Zlib.RawInflate.BufferType."+A,P[A])}).call(this)}).call(window)},15:function(t,e,i){(function(){!function(t,e,i){var n=(i.un,i.uns,i["static"]),r=i["class"],s=i.getset,a=i.__newvec,o=laya.utils.Browser,h=laya.utils.Byte,l=laya.filters.ColorFilter,u=laya.utils.Ease,c=laya.events.Event,_=laya.events.EventDispatcher,d=(laya.display.Graphics,laya.html.dom.HTMLDivElement),f=laya.utils.Handler,p=laya.utils.HitArea,m=laya.display.Input,g=laya.utils.Log,y=(laya.display.Node,laya.maths.Point),v=laya.maths.Rectangle,x=laya.renders.Render,b=(laya.media.Sound,laya.media.SoundManager),w=laya.display.Sprite,S=(laya.display.Stage,laya.display.Text),C=laya.resource.Texture,T=laya.utils.Tween,E=laya.utils.Utils;i["interface"]("fairygui.IUISource"),i["interface"]("fairygui.IColorGear"),i["interface"]("fairygui.IAnimationGear");var M=function(){function t(){this.fromPage=null,this.toPage=null}r(t,"fairygui.action.ControllerAction");var e=t.prototype;return e.run=function(t,e,i){null!=this.fromPage&&0!=this.fromPage.length&&-1==this.fromPage.indexOf(e)||null!=this.toPage&&0!=this.toPage.length&&-1==this.toPage.indexOf(i)?this.leave(t):this.enter(t)},e.enter=function(t){},e.leave=function(t){},e.setup=function(t){var e;e=t.getAttribute("fromPage"),e&&(this.fromPage=e.split(",")),e=t.getAttribute("toPage"),e&&(this.toPage=e.split(","))},t.createAction=function(t){switch(t){case"play_transition":return new pt;case"change_page":return new ft}return null},t}(),I=function(){function t(){this._asset=null,this._asset=i.loader}r(t,"fairygui.AssetProxy");var e=t.prototype;return e.getRes=function(t){return this._asset.getRes(t)},e.load=function(t,e,i,n,r,s){void 0===r&&(r=1),void 0===s&&(s=!0),this._asset.load(t,e,i,n,r,s)},e.setAsset=function(t){this._asset=t},s(1,t,"inst",function(){return null==fairygui.AssetProxy._inst&&(t._inst=new t),fairygui.AssetProxy._inst}),t._inst=null,t}(),A=(function(){function t(){this.callback=null,this._itemList=null,this._objectPool=null,this._index=0,this._itemList=[],this._objectPool=[]}r(t,"fairygui.AsyncOperation");var e=t.prototype;return e.createObject=function(t,e){var i=ot.getByName(t);if(!i)throw new Error("package not found: "+t);var n=i.getItemByName(e);if(!n)throw new Error("resource not found: "+e);this.internalCreateObject(n)},e.createObjectFromURL=function(t){var e=ot.getItemByURL(t);if(!e)throw new Error("resource not found: "+t);this.internalCreateObject(e)},e.cancel=function(){if(i.timer.clear(this,this.run),this._itemList.length=0,this._objectPool.length>0){var t;for(var e in this._objectPool)t=this._objectPool[e],t.dispose();this._objectPool.length=0}},e.internalCreateObject=function(t){this._itemList.length=0,this._objectPool.length=0,this.collectComponentChildren(t),this._itemList.push(new F(t,null)),this._index=0,i.timer.frameLoop(1,this,this.run)},e.collectComponentChildren=function(t){t.owner.getItemAsset(t);for(var e=t.displayList.length,i=0;e>i;i++){var n=t.displayList[i];if(null!=n.packageItem&&4==n.packageItem.type)this.collectComponentChildren(n.packageItem);else if("list"==n.type){var r=null;n.listItemCount=0;for(var s=n.desc.childNodes,a=s.length,o=0;a>o;o++){var h=s[o];if("item"==h.nodeName){var l=h.getAttribute("url");if(l||(null==r&&(r=n.desc.getAttribute("defaultItem")),l=r)){var u=ot.getItemByURL(l);u&&(4==u.type&&this.collectComponentChildren(u),this._itemList.push(new F(u,null)),n.listItemCount++)}}}}this._itemList.push(n)}},e.run=function(){for(var t,e,n=0,r=0,s=o.now(),a=st.frameTimeForAsyncUIConstruction,h=this._itemList.length;this._index<h;){if(e=this._itemList[this._index],null!=e.packageItem)t=at.newObject(e.packageItem),t.packageItem=e.packageItem,this._objectPool.push(t),ot._constructing++,4==e.packageItem.type?(n=this._objectPool.length-e.packageItem.displayList.length-1,t.constructFromResource2(this._objectPool,n),this._objectPool.splice(n,e.packageItem.displayList.length)):t.constructFromResource(),ot._constructing--;else if(t=at.newObject2(e.type),this._objectPool.push(t),"list"==e.type&&e.listItemCount>0){for(n=this._objectPool.length-e.listItemCount-1,r=0;r<e.listItemCount;r++)t.itemPool.returnObject(this._objectPool[r+n]);this._objectPool.splice(n,e.listItemCount)}if(this._index++,this._index%5==0&&o.now()-s>=a)return}i.timer.clear(this,this.run);var l=this._objectPool[0];this._itemList.length=0,this._objectPool.length=0,null!=this.callback&&this.callback.runWith(l)},t}(),function(){function t(){}return r(t,"fairygui.AutoSizeType"),t.parse=function(t){switch(t){case"none":return 0;case"both":return 1;case"height":return 2;default:return 0}},t.None=0,t.Both=1,t.Height=2,t}()),D=function(){function t(){}return r(t,"fairygui.ButtonMode"),t.parse=function(t){switch(t){case"Common":return 0;case"Check":return 1;case"Radio":return 2;default:return 0}},t.Common=0,t.Check=1,t.Radio=2,t}(),R=function(){function t(){}return r(t,"fairygui.ChildrenRenderOrder"),t.parse=function(t){switch(t){case"ascent":return 0;case"descent":return 1;case"arch":return 2;default:return 0}},t.Ascent=0,t.Descent=1,t.Arch=2,t}(),P=function(){function t(){this.id=null,this.size=0,this.ttf=!1,this.glyphs=null,this.resizable=!1,this.glyphs={}}return r(t,"fairygui.display.BitmapFont",null,"BitmapFont1"),t}(),L=function(){function t(){this.x=0,this.y=0,this.offsetX=0,this.offsetY=0,this.width=0,this.height=0,this.advance=0,this.lineHeight=0,this.channel=0,this.texture=null}return r(t,"fairygui.display.BMGlyph"),t}(),O=function(){function t(){this.rect=null,this.addDelay=0,this.texture=null,this.rect=new v}return r(t,"fairygui.display.Frame"),t}(),N=function(){function t(){this.reachEnding=!1,this.reversed=!1,this.repeatedCount=0,this._curFrame=0,this._curFrameDelay=0,this._lastUpdateSeq=0}r(t,"fairygui.display.PlayState");var e=t.prototype;return e.update=function(t){var e=NaN,n=i.timer.currFrame;e=n-this._lastUpdateSeq!=1?0:i.timer.delta,this._lastUpdateSeq=n,this.reachEnding=!1,this._curFrameDelay+=e;var r=t.interval+t.frames[this._curFrame].addDelay+(0==this._curFrame&&this.repeatedCount>0?t.repeatDelay:0);this._curFrameDelay<r||(this._curFrameDelay-=r,this._curFrameDelay>t.interval&&(this._curFrameDelay=t.interval),t.swing?this.reversed?(this._curFrame--,this._curFrame<=0&&(this._curFrame=0,this.repeatedCount++,this.reversed=!this.reversed)):(this._curFrame++,this._curFrame>t.frameCount-1&&(this._curFrame=Math.max(0,t.frameCount-2),this.repeatedCount++,this.reachEnding=!0,this.reversed=!this.reversed)):(this._curFrame++,this._curFrame>t.frameCount-1&&(this._curFrame=0,this.repeatedCount++,this.reachEnding=!0)))},e.rewind=function(){this._curFrame=0,this._curFrameDelay=0,this.reversed=!1,this.reachEnding=!1},e.reset=function(){this._curFrame=0,this._curFrameDelay=0,this.repeatedCount=0,this.reachEnding=!1,this.reversed=!1},e.copy=function(t){this._curFrame=t._curFrame,this._curFrameDelay=t._curFrameDelay,this.repeatedCount=t.repeatedCount,this.reachEnding=t.reachEnding,this.reversed=t.reversed},s(0,e,"currentFrame",function(){return this._curFrame},function(t){this._curFrame=t,this._curFrameDelay=0}),t}(),F=function(){function t(t,e){this.packageItem=null,this.type=null,this.desc=null,this.listItemCount=0,this.packageItem=t,this.type=e}return r(t,"fairygui.DisplayListItem"),t}(),V=(function(){function t(){this._agent=null,this._sourceData=null,this._agent=new At,this._agent.draggable=!0,this._agent.touchable=!1,this._agent.setSize(100,100),this._agent.setPivot(.5,.5,!0),this._agent.align="center",this._agent.verticalAlign="middle",this._agent.sortingOrder=1e6,this._agent.on("fui_drag_end",this,this.__dragEnd)}r(t,"fairygui.DragDropManager");var e=t.prototype;return e.startDrag=function(t,e,n,r){if(void 0===r&&(r=-1),null==this._agent.parent){this._sourceData=n,this._agent.url=e,Bt.inst.addChild(this._agent);var s=Bt.inst.globalToLocal(i.stage.mouseX,i.stage.mouseY);this._agent.setXY(s.x,s.y),this._agent.startDrag(r)}},e.cancel=function(){null!=this._agent.parent&&(this._agent.stopDrag(),Bt.inst.removeChild(this._agent),this._sourceData=null)},e.__dragEnd=function(t){if(null!=this._agent.parent){Bt.inst.removeChild(this._agent);var e=this._sourceData;this._sourceData=null;for(var i=k.cast(t.target);null!=i;){if(i.displayObject.hasListener("fui_drop"))return i.requestFocus(),void i.displayObject.event("fui_drop",[e,V.createEvent("fui_drop",i.displayObject,t)]);i=i.parent}}},s(0,e,"dragAgent",function(){return this._agent}),s(0,e,"dragging",function(){return null!=this._agent.parent}),s(1,t,"inst",function(){return null==fairygui.DragDropManager._inst&&(fairygui.DragDropManager._inst=new t),fairygui.DragDropManager._inst}),t._inst=null,t}(),function(){function t(){}return r(t,"fairygui.Events"),t.createEvent=function(t,e,i){return fairygui.Events.$event.setTo(t,e,i?i.target:e),i?(fairygui.Events.$event.touchId=i.touchId,fairygui.Events.$event.nativeEvent=i.nativeEvent):fairygui.Events.$event.nativeEvent=null,fairygui.Events.$event._stoped=!1,fairygui.Events.$event},t.dispatch=function(t,e,i){e.event(t,fairygui.Events.createEvent(t,e,i))},t.STATE_CHANGED="fui_state_changed",t.XY_CHANGED="fui_xy_changed",t.SIZE_CHANGED="fui_size_changed",t.SIZE_DELAY_CHANGE="fui_size_delay_change",t.CLICK_ITEM="fui_click_item",t.SCROLL="fui_scroll",t.SCROLL_END="fui_scroll_end",t.DROP="fui_drop",t.FOCUS_CHANGED="fui_focus_changed",t.DRAG_START="fui_drag_start",t.DRAG_MOVE="fui_drag_move",t.DRAG_END="fui_drag_end",t.PULL_DOWN_RELEASE="fui_pull_down_release",t.PULL_UP_RELEASE="fui_pull_up_release",t.GEAR_STOP="fui_gear_stop",n(t,["$event",function(){return this.$event=new c}]),t}()),B=function(){function t(){}return r(t,"fairygui.FlipType"),t.parse=function(t){switch(t){case"hz":return 1;case"vt":return 2;case"both":return 3;default:return 0}},t.None=0,t.Horizontal=1,t.Vertical=2,t.Both=3,t}(),k=function(){function t(){this.data=null,this.packageItem=null,this._x=0,this._y=0,this._alpha=1,this._rotation=0,this._visible=!0,this._touchable=!0,this._grayed=!1,this._draggable=!1,this._scaleX=1,this._scaleY=1,this._skewX=0,this._skewY=0,this._pivotX=0,this._pivotY=0,this._pivotAsAnchor=!1,this._pivotOffsetX=0,this._pivotOffsetY=0,this._sortingOrder=0,this._internalVisible=!0,this._handlingController=!1,this._focusable=!1,this._tooltips=null,this._pixelSnapping=!1,this._relations=null,this._group=null,this._gears=null,this._dragBounds=null,this._displayObject=null,this._yOffset=0,this._sizeImplType=0,this.minWidth=0,this.minHeight=0,this.maxWidth=0,this.maxHeight=0,this.sourceWidth=0,this.sourceHeight=0,this.initWidth=0,this.initHeight=0,this._parent=null,this._width=0,this._height=0,this._rawWidth=0,this._rawHeight=0,this._id=null,this._name=null,this._underConstruct=!1,this._gearLocked=!1,this._sizePercentInGroup=0,this._touchDownPoint=null,this._id=""+fairygui.GObject._gInstanceCounter++,this._name="",this.createDisplayObject(),this._relations=new J(this),this._gears=a(8,null)}r(t,"fairygui.GObject");var e=t.prototype;return e.setXY=function(e,i){if(this._x!=e||this._y!=i){var n=e-this._x,r=i-this._y;this._x=e,this._y=i,this.handleXYChanged(),this instanceof fairygui.GGroup&&this.moveChildren(n,r),this.updateGear(1),!this._parent||this._parent instanceof fairygui.GList||(this._parent.setBoundsChangedFlag(),null!=this._group&&this._group.setBoundsChangedFlag(),this.displayObject.event("fui_xy_changed")),t.draggingObject!=this||t.sUpdateInDragging||this.localToGlobalRect(0,0,this.width,this.height,t.sGlobalRect)}},e.center=function(t){void 0===t&&(t=!1);var e;e=null!=this._parent?this.parent:this.root,this.setXY((e.width-this.width)/2,(e.height-this.height)/2),t&&(this.addRelation(e,3),this.addRelation(e,10))},e.setSize=function(t,e,i){if(void 0===i&&(i=!1),this._rawWidth!=t||this._rawHeight!=e){this._rawWidth=t,this._rawHeight=e,t<this.minWidth&&(t=this.minWidth),e<this.minHeight&&(e=this.minHeight),this.maxWidth>0&&t>this.maxWidth&&(t=this.maxWidth),this.maxHeight>0&&e>this.maxHeight&&(e=this.maxHeight);var n=t-this._width,r=e-this._height;this._width=t,this._height=e,this.handleSizeChanged(),(0!=this._pivotX||0!=this._pivotY)&&(this._pivotAsAnchor?this.applyPivot():(i||this.setXY(this.x-this._pivotX*n,this.y-this._pivotY*r),this.updatePivotOffset())),this instanceof fairygui.GGroup&&this.resizeChildren(n,r),this.updateGear(2),this._parent&&(this._relations.onOwnerSizeChanged(n,r),this._parent.setBoundsChangedFlag(),null!=this._group&&this._group.setBoundsChangedFlag(!0)),this.displayObject.event("fui_size_changed")}},e.ensureSizeCorrect=function(){},e.setScale=function(t,e){(this._scaleX!=t||this._scaleY!=e)&&(this._scaleX=t,this._scaleY=e,this.handleScaleChanged(),this.applyPivot(),this.updateGear(2))},e.setSkew=function(t,e){(this._skewX!=t||this._skewY!=e)&&(this._skewX=t,this._skewY=e,null!=this._displayObject&&(this._displayObject.skew(-t,e),this.applyPivot()))},e.setPivot=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=!1),(this._pivotX!=t||this._pivotY!=e||this._pivotAsAnchor!=i)&&(this._pivotX=t,this._pivotY=e,this._pivotAsAnchor=i,this.updatePivotOffset(),this.handleXYChanged())},e.internalSetPivot=function(t,e,i){this._pivotX=t,this._pivotY=e,this._pivotAsAnchor=i,this._pivotAsAnchor&&this.handleXYChanged()},e.updatePivotOffset=function(){if(null!=this._displayObject)if(!this._displayObject.transform||0==this._pivotX&&0==this._pivotY)this._pivotOffsetX=0,this._pivotOffsetY=0;else{0==this._sizeImplType?(fairygui.GObject.sHelperPoint.x=this._pivotX*this._width,fairygui.GObject.sHelperPoint.y=this._pivotY*this._height):(fairygui.GObject.sHelperPoint.x=this._pivotX*this.sourceWidth,fairygui.GObject.sHelperPoint.y=this._pivotY*this.sourceHeight);var t=this._displayObject.transform.transformPoint(fairygui.GObject.sHelperPoint);this._pivotOffsetX=this._pivotX*this._width-t.x,this._pivotOffsetY=this._pivotY*this._height-t.y}},e.applyPivot=function(){(0!=this._pivotX||0!=this._pivotY)&&(this.updatePivotOffset(),this.handleXYChanged())},e.updateAlpha=function(){this._displayObject&&(this._displayObject.alpha=this._alpha),this.updateGear(3)},e.requestFocus=function(){for(var t=this;t&&!t._focusable;)t=t.parent;null!=t&&(this.root.focus=t)},e.getGear=function(t){var e=this._gears[t];if(null==e){switch(t){case 0:e=new xt(this);break;case 1:e=new It(this);break;case 2:e=new Tt(this);break;case 3:e=new wt(this);break;case 4:e=new vt(this);break;case 5:e=new yt(this);break;case 6:e=new Mt(this);break;case 7:e=new bt(this);break;default:throw new Error("FairyGUI: invalid gear index!")}this._gears[t]=e}return e},e.updateGear=function(t){if(!this._underConstruct&&!this._gearLocked){var e=this._gears[t];null!=e&&null!=e.controller&&e.updateState()}},e.checkGearController=function(t,e){return null!=this._gears[t]&&this._gears[t].controller==e},e.updateGearFromRelations=function(t,e,i){null!=this._gears[t]&&this._gears[t].updateFromRelations(e,i)},e.addDisplayLock=function(){var t=this._gears[0];if(t&&t.controller){var e=t.addLock();return this.checkGearDisplay(),e}return 0},e.releaseDisplayLock=function(t){var e=this._gears[0];e&&e.controller&&(e.releaseLock(t),this.checkGearDisplay())},e.checkGearDisplay=function(){if(!this._handlingController){var t=null==this._gears[0]||this._gears[0].connected;t!=this._internalVisible&&(this._internalVisible=t,this._parent&&this._parent.childStateChanged(this))}},e.addRelation=function(t,e,i){void 0===i&&(i=!1),this._relations.add(t,e,i)},e.removeRelation=function(t,e){void 0===e&&(e=0),this._relations.remove(t,e)},e.removeFromParent=function(){this._parent&&this._parent.removeChild(this)},e.dispose=function(){this.removeFromParent(),this._relations.dispose(),this._displayObject.destroy()},e.onClick=function(t,e,i){this.on("click",t,e,i)},e.offClick=function(t,e){this.off("click",t,e)},e.hasClickListener=function(){return this._displayObject.hasListener("click")},e.on=function(t,e,i,n){this._displayObject.on(t,e,i,n)},e.off=function(t,e,i){this._displayObject.off(t,e,i)},e.startDrag=function(t){void 0===t&&(t=-1),null!=this._displayObject.stage&&this.dragBegin()},e.stopDrag=function(){this.dragEnd()},e.localToGlobal=function(t,e,i){return void 0===t&&(t=0),void 0===e&&(e=0),this._pivotAsAnchor&&(t+=this._pivotX*this._width,e+=this._pivotY*this._height),i?(i.x=t,i.y=e,this._displayObject.localToGlobal(i,!1)):(i=fairygui.GObject.sHelperPoint,i.x=t,i.y=e,this._displayObject.localToGlobal(i,!0))},e.globalToLocal=function(t,e,i){return void 0===t&&(t=0),void 0===e&&(e=0),i?(i.x=t,i.y=e,this._displayObject.globalToLocal(i,!1)):(i=fairygui.GObject.sHelperPoint,i.x=t,i.y=e,i=this._displayObject.globalToLocal(i,!0)),this._pivotAsAnchor&&(i.x-=this._pivotX*this._width,i.y-=this._pivotY*this._height),i},e.localToGlobalRect=function(t,e,i,n,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),null==r&&(r=new v);var s=this.localToGlobal(t,e);return r.x=s.x,r.y=s.y,s=this.localToGlobal(t+i,e+n),r.width=s.x-r.x,r.height=s.y-r.y,r},e.globalToLocalRect=function(t,e,i,n,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),null==r&&(r=new v);var s=this.globalToLocal(t,e);return r.x=s.x,r.y=s.y,s=this.globalToLocal(t+i,e+n),r.width=s.x-r.x,r.height=s.y-r.y,r},e.handleControllerChanged=function(t){this._handlingController=!0;for(var e=0;8>e;e++){var i=this._gears[e];null!=i&&i.controller==t&&i.apply()}this._handlingController=!1,this.checkGearDisplay()},e.createDisplayObject=function(){this._displayObject=new w,this._displayObject.$owner=this},e.handleXYChanged=function(){var t=this._x,e=this._y+this._yOffset;this._pivotAsAnchor&&(t-=this._pivotX*this._width,e-=this._pivotY*this._height),this._pixelSnapping&&(t=Math.round(t),e=Math.round(e)),this._displayObject.pos(t+this._pivotOffsetX,e+this._pivotOffsetY)},e.handleSizeChanged=function(){null!=this._displayObject&&(0==this._sizeImplType||0==this.sourceWidth||0==this.sourceHeight?this._displayObject.size(this._width,this._height):this._displayObject.scale(this._width/this.sourceWidth*this._scaleX,this._height/this.sourceHeight*this._scaleY))},e.handleScaleChanged=function(){null!=this._displayObject&&(0==this._sizeImplType||0==this.sourceWidth||0==this.sourceHeight?this._displayObject.scale(this._scaleX,this._scaleY):this._displayObject.scale(this._width/this.sourceWidth*this._scaleX,this._height/this.sourceHeight*this._scaleY))},e.handleGrayedChanged=function(){this._displayObject&&(this._grayed?this._displayObject.filters=[t.grayFilter]:this._displayObject.filters=null)},e.constructFromResource=function(){},e.setup_beforeAdd=function(t){var e,i;if(this._id=t.getAttribute("id"),this._name=t.getAttribute("name"),e=t.getAttribute("xy"),i=e.split(","),this.setXY(parseInt(i[0]),parseInt(i[1])),e=t.getAttribute("size"),e&&(i=e.split(","),this.initWidth=parseInt(i[0]),this.initHeight=parseInt(i[1]),this.setSize(this.initWidth,this.initHeight,!0)),e=t.getAttribute("restrictSize"),e&&(i=e.split(","),this.minWidth=parseInt(i[0]),this.maxWidth=parseInt(i[1]),this.minHeight=parseInt(i[2]),this.maxHeight=parseInt(i[3])),e=t.getAttribute("scale"),e&&(i=e.split(","),this.setScale(parseFloat(i[0]),parseFloat(i[1]))),e=t.getAttribute("skew"),e&&(i=e.split(","),this.setSkew(parseFloat(i[0]),parseFloat(i[1]))),e=t.getAttribute("rotation"),e&&(this.rotation=parseInt(e)),e=t.getAttribute("pivot"),e&&(i=e.split(","),e=t.getAttribute("anchor"),this.setPivot(parseFloat(i[0]),parseFloat(i[1]),"true"==e)),e=t.getAttribute("alpha"),e&&(this.alpha=parseFloat(e)),"false"==t.getAttribute("touchable")&&(this.touchable=!1),"false"==t.getAttribute("visible")&&(this.visible=!1),"true"==t.getAttribute("grayed")&&(this.grayed=!0),this.tooltips=t.getAttribute("tooltips"),e=t.getAttribute("blend"),e&&(this.blendMode=e),e=t.getAttribute("filter"))switch(e){case"color":e=t.getAttribute("filterData"),i=e.split(",");var n=new ct;n.adjustBrightness(parseFloat(i[0])),n.adjustContrast(parseFloat(i[1])),n.adjustSaturation(parseFloat(i[2])),n.adjustHue(parseFloat(i[3]));var r=new l(n);this.filters=[r]}},e.setup_afterAdd=function(t){var e=t.getAttribute("group");e&&(this._group=this._parent.getChildById(e));for(var i=t.childNodes,n=i.length,r=0;n>r;r++){var s=i[r];if(1==s.nodeType){var a=fairygui.GObject.GearXMLKeys[s.nodeName];void 0!=a&&this.getGear(a).setup(s)}}},e.initDrag=function(){this._draggable?this.on("mousedown",this,this.__begin):this.off("mousedown",this,this.__begin)},e.dragBegin=function(){null!=fairygui.GObject.draggingObject&&fairygui.GObject.draggingObject.stopDrag(),fairygui.GObject.sGlobalDragStart.x=i.stage.mouseX,fairygui.GObject.sGlobalDragStart.y=i.stage.mouseY,this.localToGlobalRect(0,0,this.width,this.height,fairygui.GObject.sGlobalRect),fairygui.GObject.draggingObject=this,i.stage.on("mousemove",this,this.__moving2),i.stage.on("mouseup",this,this.__end2)},e.dragEnd=function(){fairygui.GObject.draggingObject==this&&(i.stage.off("mousemove",this,this.__moving2),i.stage.off("mouseup",this,this.__end2),fairygui.GObject.draggingObject=null),fairygui.GObject.sDraggingQuery=!1},e.reset=function(){i.stage.off("mousemove",this,this.__moving),i.stage.off("mouseup",this,this.__end)},e.__begin=function(){null==this._touchDownPoint&&(this._touchDownPoint=new y),this._touchDownPoint.x=i.stage.mouseX,this._touchDownPoint.y=i.stage.mouseY,i.stage.on("mousemove",this,this.__moving),i.stage.on("mouseup",this,this.__end)},e.__end=function(){this.reset()},e.__moving=function(t){var e=st.touchDragSensitivity;null!=this._touchDownPoint&&Math.abs(this._touchDownPoint.x-i.stage.mouseX)<e&&Math.abs(this._touchDownPoint.y-i.stage.mouseY)<e||(this.reset(),fairygui.GObject.sDraggingQuery=!0,V.dispatch("fui_drag_start",this._displayObject,t),fairygui.GObject.sDraggingQuery&&this.dragBegin())},e.__moving2=function(e){var n=i.stage.mouseX-fairygui.GObject.sGlobalDragStart.x+fairygui.GObject.sGlobalRect.x,r=i.stage.mouseY-fairygui.GObject.sGlobalDragStart.y+fairygui.GObject.sGlobalRect.y;if(null!=this._dragBounds){var s=Bt.inst.localToGlobalRect(this._dragBounds.x,this._dragBounds.y,this._dragBounds.width,this._dragBounds.height,fairygui.GObject.sDragHelperRect);n<s.x?n=s.x:n+fairygui.GObject.sGlobalRect.width>s.right&&(n=s.right-fairygui.GObject.sGlobalRect.width,n<s.x&&(n=s.x)),r<s.y?r=s.y:r+fairygui.GObject.sGlobalRect.height>s.bottom&&(r=s.bottom-fairygui.GObject.sGlobalRect.height,r<s.y&&(r=s.y))}t.sUpdateInDragging=!0;var a=this.parent.globalToLocal(n,r,fairygui.GObject.sHelperPoint);this.setXY(Math.round(a.x),Math.round(a.y)),t.sUpdateInDragging=!1,V.dispatch("fui_drag_move",this._displayObject,e)},e.__end2=function(t){fairygui.GObject.draggingObject==this&&(this.stopDrag(),V.dispatch("fui_drag_end",this._displayObject,t))},s(0,e,"actualHeight",function(){return this.height*Math.abs(this._scaleY)}),s(0,e,"id",function(){return this._id}),s(0,e,"name",function(){return this._name},function(t){this._name=t}),s(0,e,"rotation",function(){return this._rotation},function(t){this._rotation!=t&&(this._rotation=t,null!=this._displayObject&&(this._displayObject.rotation=this.normalizeRotation,this.applyPivot()),this.updateGear(3))}),s(0,e,"width",function(){return this.ensureSizeCorrect(),this._relations.sizeDirty&&this._relations.ensureRelationsSizeCorrect(),this._width},function(t){this.setSize(t,this._rawHeight)}),s(0,e,"x",function(){return this._x},function(t){this.setXY(t,this._y)}),s(0,e,"draggable",function(){return this._draggable},function(t){this._draggable!=t&&(this._draggable=t,this.initDrag())}),s(0,e,"y",function(){return this._y},function(t){this.setXY(this._x,t)}),s(0,e,"pixelSnapping",function(){return this._pixelSnapping},function(t){this._pixelSnapping!=t&&(this._pixelSnapping=t,this.handleXYChanged())}),s(0,e,"height",function(){return this.ensureSizeCorrect(),this._relations.sizeDirty&&this._relations.ensureRelationsSizeCorrect(),this._height},function(t){this.setSize(this._rawWidth,t)}),s(0,e,"asButton",function(){return this}),s(0,e,"actualWidth",function(){return this.width*Math.abs(this._scaleX)}),s(0,e,"blendMode",function(){return this._displayObject.blendMode},function(t){this._displayObject.blendMode=t}),s(0,e,"scaleX",function(){return this._scaleX},function(t){this.setScale(t,this._scaleY)}),s(0,e,"scaleY",function(){return this._scaleY},function(t){this.setScale(this._scaleX,t)}),s(0,e,"skewX",function(){return this._skewX},function(t){this.setScale(t,this._skewY)}),s(0,e,"skewY",function(){return this._skewY},function(t){this.setSkew(this._skewX,t)}),s(0,e,"pivotX",function(){return this._pivotX},function(t){this.setPivot(t,this._pivotY)}),s(0,e,"asLoader",function(){return this}),s(0,e,"asTextInput",function(){return this}),s(0,e,"displayObject",function(){return this._displayObject}),s(0,e,"normalizeRotation",function(){var t=this._rotation%360;return t>180?t-=360:-180>t&&(t=360+t),t}),s(0,e,"pivotY",function(){return this._pivotY},function(t){this.setPivot(this._pivotX,t)}),s(0,e,"touchable",function(){return this._touchable},function(t){if(this._touchable!=t){if(this._touchable=t,this.updateGear(3),this instanceof fairygui.GImage||this instanceof fairygui.GMovieClip||this instanceof fairygui.GTextField&&!(this instanceof fairygui.GTextInput)&&!(this instanceof fairygui.GRichTextField))return;null!=this._displayObject&&(this._displayObject.mouseEnabled=this._touchable)}}),s(0,e,"alpha",function(){return this._alpha},function(t){this._alpha!=t&&(this._alpha=t,this.updateAlpha())}),s(0,e,"grayed",function(){return this._grayed},function(t){this._grayed!=t&&(this._grayed=t,this.handleGrayedChanged(),this.updateGear(3))}),s(0,e,"dragBounds",function(){return this._dragBounds},function(t){this._dragBounds=t}),s(0,e,"asProgress",function(){return this}),s(0,e,"enabled",function(){return!this._grayed&&this._touchable},function(t){this.grayed=!t,this.touchable=t}),s(0,e,"sortingOrder",function(){return this._sortingOrder},function(t){if(0>t&&(t=0),this._sortingOrder!=t){var e=this._sortingOrder;this._sortingOrder=t,null!=this._parent&&this._parent.childSortingOrderChanged(this,e,this._sortingOrder)}}),s(0,e,"visible",function(){return this._visible},function(t){this._visible!=t&&(this._visible=t,this._displayObject&&(this._displayObject.visible=this._visible),this._parent&&(this._parent.childStateChanged(this),
this._parent.setBoundsChangedFlag()))}),s(0,e,"finalVisible",function(){return this._visible&&this._internalVisible&&(!this._group||this._group.finalVisible)&&!this._displayObject._$P.maskParent}),s(0,e,"asGraph",function(){return this}),s(0,e,"gearSize",function(){return this.getGear(2)}),s(0,e,"focusable",function(){return this._focusable},function(t){this._focusable=t}),s(0,e,"focused",function(){return this.root.focus==this}),s(0,e,"tooltips",function(){return this._tooltips},function(t){this._tooltips=t}),s(0,e,"dragging",function(){return fairygui.GObject.draggingObject==this}),s(0,e,"group",function(){return this._group},function(t){this._group!=t&&(null!=this._group&&this._group.setBoundsChangedFlag(!0),this._group=t,null!=this._group&&this._group.setBoundsChangedFlag(!0))}),s(0,e,"filters",function(){return this._displayObject.filters},function(t){this._displayObject.filters=t}),s(0,e,"inContainer",function(){return null!=this._displayObject&&null!=this._displayObject.parent}),s(0,e,"resourceURL",function(){return null!=this.packageItem?"ui://"+this.packageItem.owner.id+this.packageItem.id:null}),s(0,e,"onStage",function(){return null!=this._displayObject&&null!=this._displayObject.stage}),s(0,e,"gearXY",function(){return this.getGear(1)}),s(0,e,"root",function(){if(this instanceof fairygui.GRoot)return this;for(var t=this._parent;t;){if(t instanceof fairygui.GRoot)return t;t=t.parent}return Bt.inst}),s(0,e,"gearLook",function(){return this.getGear(3)}),s(0,e,"asCom",function(){return this}),s(0,e,"relations",function(){return this._relations}),s(0,e,"parent",function(){return this._parent},function(t){this._parent=t}),s(0,e,"asLabel",function(){return this}),s(0,e,"asImage",function(){return this}),s(0,e,"asTextField",function(){return this}),s(0,e,"asGroup",function(){return this}),s(0,e,"asRichTextField",function(){return this}),s(0,e,"asList",function(){return this}),s(0,e,"asSlider",function(){return this}),s(0,e,"asComboBox",function(){return this}),s(0,e,"asMovieClip",function(){return this}),s(0,e,"text",function(){return null},function(t){}),s(0,e,"icon",function(){return null},function(t){}),t.cast=function(t){return t.$owner},t.draggingObject=null,t._gInstanceCounter=0,t.sDraggingQuery=!1,t.sUpdateInDragging=!1,n(t,["grayFilter",function(){return this.grayFilter=new l([.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0])},"GearXMLKeys",function(){return this.GearXMLKeys={gearDisplay:0,gearXY:1,gearSize:2,gearLook:3,gearColor:4,gearAni:5,gearText:6,gearIcon:7}},"sGlobalDragStart",function(){return this.sGlobalDragStart=new y},"sGlobalRect",function(){return this.sGlobalRect=new v},"sHelperPoint",function(){return this.sHelperPoint=new y},"sDragHelperRect",function(){return this.sDragHelperRect=new v}]),t}(),U=function(){function t(t){this._tween=!1,this._easeType=null,this._tweenTime=.3,this._delay=0,this._displayLockToken=0,this._owner=null,this._controller=null,this._owner=t,this._easeType=u.quadOut}r(t,"fairygui.GearBase");var e=t.prototype;return e.setup=function(t){if(this._controller=this._owner.parent.getController(t.getAttribute("controller")),null!=this._controller){this.init();var e;if(e=t.getAttribute("tween"),e&&(this._tween=!0),e=t.getAttribute("ease"),e&&(this._easeType=lt.parseEaseType(e)),e=t.getAttribute("duration"),e&&(this._tweenTime=parseFloat(e)),e=t.getAttribute("delay"),e&&(this._delay=parseFloat(e)),this instanceof fairygui.GearDisplay){if(e=t.getAttribute("pages")){var i=e.split(",");this.pages=i}}else{var n,r;if(e=t.getAttribute("pages"),e&&(n=e.split(",")),n){e=t.getAttribute("values"),r=null!=e?e.split("|"):[];for(var s=0;s<n.length;s++)this.addStatus(n[s],r[s])}e=t.getAttribute("default"),e&&this.addStatus(null,e)}}},e.updateFromRelations=function(t,e){},e.addStatus=function(t,e){},e.init=function(){},e.apply=function(){},e.updateState=function(){},s(0,e,"controller",function(){return this._controller},function(t){t!=this._controller&&(this._controller=t,this._controller&&this.init())}),s(0,e,"tween",function(){return this._tween},function(t){this._tween=t}),s(0,e,"delay",function(){return this._delay},function(t){this._delay=t}),s(0,e,"tweenTime",function(){return this._tweenTime},function(t){this._tweenTime=t}),s(0,e,"easeType",function(){return this._easeType},function(t){this._easeType=t}),t.disableAllTweenEffect=!1,t}(),H=function(){function t(){this._pool=null,this._count=0,this._pool={}}r(t,"fairygui.GObjectPool");var e=t.prototype;return e.clear=function(){for(var t=this._pool.length,e=0;t>e;e++)for(var i=this._pool[e],n=i.length,r=0;n>r;r++)i[r].dispose();this._pool={},this._count=0},e.getObject=function(t){if(t=ot.normalizeURL(t),null==t)return null;var e=this._pool[t];if(null!=e&&e.length>0)return this._count--,e.shift();var i=ot.createObjectFromURL(t);return i},e.returnObject=function(t){var e=t.resourceURL;if(e){var i=this._pool[e];null==i&&(i=[],this._pool[e]=i),this._count++,i.push(t)}},s(0,e,"count",function(){return this._count}),t}(),z=function(){function t(){}return r(t,"fairygui.GroupLayoutType"),t.parse=function(t){switch(t){case"none":return 0;case"hz":return 1;case"vt":return 2;default:return 0}},t.None=0,t.Horizontal=1,t.Vertical=2,t}(),G=function(){function t(){}return r(t,"fairygui.ListLayoutType"),t.parse=function(t){switch(t){case"column":return 0;case"row":return 1;case"flow_hz":return 2;case"flow_vt":return 3;case"pagination":return 4;default:return 0}},t.SingleColumn=0,t.SingleRow=1,t.FlowHorizontal=2,t.FlowVertical=3,t.Pagination=4,t}(),W=function(){function t(){}return r(t,"fairygui.ListSelectionMode"),t.parse=function(t){switch(t){case"single":return 0;case"multiple":return 1;case"multipleSingleClick":return 2;case"none":return 3;default:return 0}},t.Single=0,t.Multiple=1,t.Multiple_SingleClick=2,t.None=3,t}(),j=function(){function t(){}return r(t,"fairygui.LoaderFillType"),t.parse=function(t){switch(t){case"none":return 0;case"scale":return 1;case"scaleMatchHeight":return 2;case"scaleMatchWidth":return 3;case"scaleFree":return 4;default:return 0}},t.None=0,t.Scale=1,t.ScaleMatchHeight=2,t.ScaleMatchWidth=3,t.ScaleFree=4,t}(),Y=function(){function t(){this.left=0,this.right=0,this.top=0,this.bottom=0}r(t,"fairygui.Margin");var e=t.prototype;return e.parse=function(t){if(!t)return this.left=0,this.right=0,this.top=0,void(this.bottom=0);var e=t.split(",");if(1==e.length){var i=parseInt(e[0]);this.top=i,this.bottom=i,this.left=i,this.right=i}else this.top=parseInt(e[0]),this.bottom=parseInt(e[1]),this.left=parseInt(e[2]),this.right=parseInt(e[3])},e.copy=function(t){this.top=t.top,this.bottom=t.bottom,this.left=t.left,this.right=t.right},t}(),X=function(){function t(){}return r(t,"fairygui.OverflowType"),t.parse=function(t){switch(t){case"visible":return 0;case"hidden":return 1;case"scroll":return 2;case"scale":return 3;case"scaleFree":return 4;default:return 0}},t.Visible=0,t.Hidden=1,t.Scroll=2,t.Scale=3,t.ScaleFree=4,t}(),q=function(){function t(){this.owner=null,this.type=0,this.id=null,this.name=null,this.width=0,this.height=0,this.file=null,this.decoded=!1,this.scale9Grid=null,this.scaleByTile=!1,this.tileGridIndice=0,this.smoothing=!1,this.texture=null,this.interval=0,this.repeatDelay=0,this.swing=!1,this.frames=null,this.componentData=null,this.displayList=null,this.extensionType=null,this.sound=null,this.bitmapFont=null}r(t,"fairygui.PackageItem");var e=t.prototype;return e.load=function(){return this.owner.getItemAsset(this)},e.toString=function(){return this.name},t}(),$=function(){function t(){}return r(t,"fairygui.PackageItemType"),t.parse=function(t){switch(t){case"image":return 0;case"movieclip":return 2;case"sound":return 3;case"component":return 4;case"swf":return 1;case"font":return 6;case"atlas":return 7}return 0},t.Image=0,t.Swf=1,t.MovieClip=2,t.Sound=3,t.Component=4,t.Misc=5,t.Font=6,t.Atlas=7,t}(),K=function(){function t(){this._controller=null,this._id=null}r(t,"fairygui.PageOption");var e=t.prototype;return e.clear=function(){this._id=null},s(0,e,"controller",null,function(t){this._controller=t}),s(0,e,"index",function(){return this._id?this._controller.getPageIndexById(this._id):-1},function(t){this._id=this._controller.getPageId(t)}),s(0,e,"name",function(){return this._id?this._controller.getPageNameById(this._id):null},function(t){this._id=this._controller.getPageIdByName(t)}),s(0,e,"id",function(){return this._id},function(t){this._id=t}),t}(),Z=(function(){function t(t){if(this._contentPane=null,this._list=null,!t&&(t=st.popupMenu,!t))throw"UIConfig.popupMenu not defined";this._contentPane=ot.createObjectFromURL(t).asCom,this._contentPane.on("display",this,this.__addedToStage),this._list=this._contentPane.getChild("list"),this._list.removeChildrenToPool(),this._list.addRelation(this._contentPane,14),this._list.removeRelation(this._contentPane,15),this._contentPane.addRelation(this._list,15),this._list.on("fui_click_item",this,this.__clickItem)}r(t,"fairygui.PopupMenu");var e=t.prototype;return e.dispose=function(){this._contentPane.dispose()},e.addItem=function(t,e){var i=this._list.addItemFromPool().asButton;i.title=t,i.data=e,i.grayed=!1;var n=i.getController("checked");return null!=n&&(n.selectedIndex=0),i},e.addItemAt=function(t,e,i){var n=this._list.getFromPool().asButton;this._list.addChildAt(n,e),n.title=t,n.data=i,n.grayed=!1;var r=n.getController("checked");return null!=r&&(r.selectedIndex=0),n},e.addSeperator=function(){if(null==st.popupMenu_seperator)throw"UIConfig.popupMenu_seperator not defined";this.list.addItemFromPool(st.popupMenu_seperator)},e.getItemName=function(t){var e=this._list.getChildAt(t);return e.name},e.setItemText=function(t,e){var i=this._list.getChild(t).asButton;i.title=e},e.setItemVisible=function(t,e){var i=this._list.getChild(t).asButton;i.visible!=e&&(i.visible=e,this._list.setBoundsChangedFlag())},e.setItemGrayed=function(t,e){var i=this._list.getChild(t).asButton;i.grayed=e},e.setItemCheckable=function(t,e){var i=this._list.getChild(t).asButton,n=i.getController("checked");null!=n&&(e?0==n.selectedIndex&&(n.selectedIndex=1):n.selectedIndex=0)},e.setItemChecked=function(t,e){var i=this._list.getChild(t).asButton,n=i.getController("checked");null!=n&&(n.selectedIndex=e?2:1)},e.isItemChecked=function(t){var e=this._list.getChild(t).asButton,i=e.getController("checked");return null!=i?2==i.selectedIndex:!1},e.removeItem=function(t){var e=this._list.getChild(t);if(null!=e){var i=this._list.getChildIndex(e);return this._list.removeChildToPoolAt(i),!0}return!1},e.clearItems=function(){this._list.removeChildrenToPool()},e.show=function(t,e){var i=null!=t?t.root:Bt.inst;i.showPopup(this.contentPane,t instanceof fairygui.GRoot?null:t,e)},e.__clickItem=function(t){i.timer.once(100,this,this.__clickItem2,[t])},e.__clickItem2=function(t){if(t instanceof fairygui.GButton){if(t.grayed)return void(this._list.selectedIndex=-1);var e=t.asCom.getController("checked");null!=e&&0!=e.selectedIndex&&(1==e.selectedIndex?e.selectedIndex=2:e.selectedIndex=1);var i=this._contentPane.parent;i.hidePopup(this.contentPane),null!=t.data&&t.data.run()}},e.__addedToStage=function(){this._list.selectedIndex=-1,this._list.resizeToFit(1e5,10)},s(0,e,"itemCount",function(){return this._list.numChildren}),s(0,e,"contentPane",function(){return this._contentPane}),s(0,e,"list",function(){return this._list}),t}(),function(){function t(){}return r(t,"fairygui.ProgressTitleType"),t.parse=function(t){switch(t){case"percent":return 0;case"valueAndmax":return 1;case"value":return 2;case"max":return 3;default:return 0}},t.Percent=0,t.ValueAndMax=1,t.Value=2,t.Max=3,t}()),Q=function(){function t(t){this._owner=null,this._target=null,this._defs=null,this._targetX=NaN,this._targetY=NaN,this._targetWidth=NaN,this._targetHeight=NaN,this._owner=t,this._defs=[]}var e;r(t,"fairygui.RelationItem");var i=t.prototype;return i.add=function(t,e){if(24==t)return this.add(14,e),void this.add(15,e);for(var i=this._defs.length,n=0;i>n;n++){var r=this._defs[n];if(r.type==t)return}this.internalAdd(t,e)},i.internalAdd=function(t,i){if(24==t)return this.internalAdd(14,i),void this.internalAdd(15,i);var n=new e;n.percent=i,n.type=t,this._defs.push(n),(i||1==t||3==t||5==t||8==t||10==t||12==t)&&(this._owner.pixelSnapping=!0)},i.remove=function(t){if(void 0===t&&(t=0),24==t)return this.remove(14),void this.remove(15);for(var e=this._defs.length,i=0;e>i;i++)if(this._defs[i].type==t){this._defs.splice(i,1);break}},i.copyFrom=function(t){this.target=t.target,this._defs.length=0;for(var i=t._defs.length,n=0;i>n;n++){var r=t._defs[n],s=new e;s.copyFrom(r),this._defs.push(s)}},i.dispose=function(){null!=this._target&&(this.releaseRefTarget(this._target),this._target=null)},i.applyOnSelfResized=function(t,e){for(var i=this._owner.x,n=this._owner.y,r=this._defs.length,s=0;r>s;s++){var a=this._defs[s];switch(a.type){case 3:case 5:this._owner.x-=t/2;break;case 4:case 6:this._owner.x-=t;break;case 10:case 12:this._owner.y-=e/2;break;case 11:case 13:this._owner.y-=e}}if((i!=this._owner.x||n!=this._owner.y)&&(i=this._owner.x-i,n=this._owner.y-n,this._owner.updateGearFromRelations(1,i,n),null!=this._owner.parent)){var o=this._owner.parent._transitions.length;if(o>0)for(s=0;o>s;++s)this._owner.parent._transitions[s].updateFromRelations(this._owner.id,i,n)}},i.applyOnXYChanged=function(t,e,i){switch(t.type){case 0:case 1:case 2:case 3:case 4:case 5:case 6:this._owner.x+=e;break;case 7:case 8:case 9:case 10:case 11:case 12:case 13:this._owner.y+=i;break;case 14:case 15:break;case 16:case 17:this._owner.x+=e,this._owner.width=this._owner._rawWidth-e;break;case 18:case 19:this._owner.width=this._owner._rawWidth+e;break;case 20:case 21:this._owner.y+=i,this._owner.height=this._owner._rawHeight-i;break;case 22:case 23:this._owner.height=this._owner._rawHeight+i}},i.applyOnSizeChanged=function(t){var e=NaN,i=NaN;this._target!=this._owner.parent?(e=this._target.x,i=this._target.y):(e=0,i=0);var n=NaN,r=NaN;switch(t.type){case 0:t.percent&&this._target==this._owner.parent&&(n=this._owner.x-e,t.percent&&(n=n/this._targetWidth*this._target._width),this._owner.x=e+n);break;case 1:n=this._owner.x-(e+this._targetWidth/2),t.percent&&(n=n/this._targetWidth*this._target._width),this._owner.x=e+this._target._width/2+n;break;case 2:n=this._owner.x-(e+this._targetWidth),t.percent&&(n=n/this._targetWidth*this._target._width),this._owner.x=e+this._target._width+n;break;case 3:n=this._owner.x+this._owner._rawWidth/2-(e+this._targetWidth/2),t.percent&&(n=n/this._targetWidth*this._target._width),this._owner.x=e+this._target._width/2+n-this._owner._rawWidth/2;break;case 4:n=this._owner.x+this._owner._rawWidth-e,t.percent&&(n=n/this._targetWidth*this._target._width),this._owner.x=e+n-this._owner._rawWidth;break;case 5:n=this._owner.x+this._owner._rawWidth-(e+this._targetWidth/2),t.percent&&(n=n/this._targetWidth*this._target._width),this._owner.x=e+this._target._width/2+n-this._owner._rawWidth;break;case 6:n=this._owner.x+this._owner._rawWidth-(e+this._targetWidth),t.percent&&(n=n/this._targetWidth*this._target._width),this._owner.x=e+this._target._width+n-this._owner._rawWidth;break;case 7:t.percent&&this._target==this._owner.parent&&(n=this._owner.y-i,t.percent&&(n=n/this._targetHeight*this._target._height),this._owner.y=i+n);break;case 8:n=this._owner.y-(i+this._targetHeight/2),t.percent&&(n=n/this._targetHeight*this._target._height),this._owner.y=i+this._target._height/2+n;break;case 9:n=this._owner.y-(i+this._targetHeight),t.percent&&(n=n/this._targetHeight*this._target._height),this._owner.y=i+this._target._height+n;break;case 10:n=this._owner.y+this._owner._rawHeight/2-(i+this._targetHeight/2),t.percent&&(n=n/this._targetHeight*this._target._height),this._owner.y=i+this._target._height/2+n-this._owner._rawHeight/2;break;case 11:n=this._owner.y+this._owner._rawHeight-i,t.percent&&(n=n/this._targetHeight*this._target._height),this._owner.y=i+n-this._owner._rawHeight;break;case 12:n=this._owner.y+this._owner._rawHeight-(i+this._targetHeight/2),t.percent&&(n=n/this._targetHeight*this._target._height),this._owner.y=i+this._target._height/2+n-this._owner._rawHeight;break;case 13:n=this._owner.y+this._owner._rawHeight-(i+this._targetHeight),t.percent&&(n=n/this._targetHeight*this._target._height),this._owner.y=i+this._target._height+n-this._owner._rawHeight;break;case 14:n=this._owner._underConstruct&&this._owner==this._target.parent?this._owner.sourceWidth-this._target.initWidth:this._owner._rawWidth-this._targetWidth,t.percent&&(n=n/this._targetWidth*this._target._width),this._target==this._owner.parent?this._owner.setSize(this._target._width+n,this._owner._rawHeight,!0):this._owner.width=this._target._width+n;break;case 15:n=this._owner._underConstruct&&this._owner==this._target.parent?this._owner.sourceHeight-this._target.initHeight:this._owner._rawHeight-this._targetHeight,t.percent&&(n=n/this._targetHeight*this._target._height),this._target==this._owner.parent?this._owner.setSize(this._owner._rawWidth,this._target._height+n,!0):this._owner.height=this._target._height+n;break;case 16:break;case 17:n=this._owner.x-(e+this._targetWidth),t.percent&&(n=n/this._targetWidth*this._target._width),r=this._owner.x,this._owner.x=e+this._target._width+n,this._owner.width=this._owner._rawWidth-(this._owner.x-r);break;case 18:break;case 19:n=this._owner._underConstruct&&this._owner==this._target.parent?this._owner.sourceWidth-(e+this._target.initWidth):this._owner.width-(e+this._targetWidth),this._owner!=this._target.parent&&(n+=this._owner.x),t.percent&&(n=n/this._targetWidth*this._target._width),this._owner!=this._target.parent?this._owner.width=e+this._target._width+n-this._owner.x:this._owner.width=e+this._target._width+n;break;case 20:break;case 21:n=this._owner.y-(i+this._targetHeight),t.percent&&(n=n/this._targetHeight*this._target._height),r=this._owner.y,this._owner.y=i+this._target._height+n,this._owner.height=this._owner._rawHeight-(this._owner.y-r);break;case 22:break;case 23:n=this._owner._underConstruct&&this._owner==this._target.parent?this._owner.sourceHeight-(i+this._target.initHeight):this._owner._rawHeight-(i+this._targetHeight),this._owner!=this._target.parent&&(n+=this._owner.y),t.percent&&(n=n/this._targetHeight*this._target._height),this._owner!=this._target.parent?this._owner.height=i+this._target._height+n-this._owner.y:this._owner.height=i+this._target._height+n}},i.addRefTarget=function(t){t!=this._owner.parent&&t.on("fui_xy_changed",this,this.__targetXYChanged),t.on("fui_size_changed",this,this.__targetSizeChanged),t.on("fui_size_delay_change",this,this.__targetSizeWillChange),this._targetX=this._target.x,this._targetY=this._target.y,this._targetWidth=this._target._width,this._targetHeight=this._target._height},i.releaseRefTarget=function(t){t.off("fui_xy_changed",this,this.__targetXYChanged),t.off("fui_size_changed",this,this.__targetSizeChanged),t.off("fui_size_delay_change",this,this.__targetSizeWillChange)},i.__targetXYChanged=function(){if(null!=this._owner.relations.handling||null!=this._owner.group&&this._owner.group._updating)return this._targetX=this._target.x,void(this._targetY=this._target.y);this._owner.relations.handling=this._target;for(var t=this._owner.x,e=this._owner.y,i=this._target.x-this._targetX,n=this._target.y-this._targetY,r=this._defs.length,s=0;r>s;s++){var a=this._defs[s];this.applyOnXYChanged(a,i,n)}if(this._targetX=this._target.x,this._targetY=this._target.y,(t!=this._owner.x||e!=this._owner.y)&&(t=this._owner.x-t,e=this._owner.y-e,this._owner.updateGearFromRelations(1,t,e),null!=this._owner.parent)){var o=this._owner.parent._transitions.length;if(o>0)for(s=0;o>s;++s)this._owner.parent._transitions[s].updateFromRelations(this._owner.id,t,e)}this._owner.relations.handling=null},i.__targetSizeChanged=function(){if(null==this._owner.relations.handling){this._owner.relations.handling=this._target;for(var t=this._owner.x,e=this._owner.y,i=this._owner._rawWidth,n=this._owner._rawHeight,r=this._defs.length,s=0;r>s;s++){var a=this._defs[s];this.applyOnSizeChanged(a)}if(this._targetWidth=this._target._width,this._targetHeight=this._target._height,(t!=this._owner.x||e!=this._owner.y)&&(t=this._owner.x-t,e=this._owner.y-e,this._owner.updateGearFromRelations(1,t,e),null!=this._owner.parent)){var o=this._owner.parent._transitions.length;if(o>0)for(s=0;o>s;++s)this._owner.parent._transitions[s].updateFromRelations(this._owner.id,t,e)}(i!=this._owner._rawWidth||n!=this._owner._rawHeight)&&(i=this._owner._rawWidth-i,n=this._owner._rawHeight-n,this._owner.updateGearFromRelations(2,i,n)),this._owner.relations.handling=null}},i.__targetSizeWillChange=function(){this._owner.relations.sizeDirty=!0},s(0,i,"owner",function(){return this._owner}),s(0,i,"target",function(){return this._target},function(t){this._target!=t&&(this._target&&this.releaseRefTarget(this._target),this._target=t,this._target&&this.addRefTarget(this._target))}),s(0,i,"isEmpty",function(){return 0==this._defs.length}),t.__init$=function(){e=function(){function t(){this.percent=!1,this.type=NaN}r(t,"");var e=t.prototype;return e.copyFrom=function(t){this.percent=t.percent,this.type=t.type},t}()},t}(),J=function(){function t(t){this._owner=null,this._items=null,this.handling=null,this.sizeDirty=!1,this._owner=t,this._items=[]}r(t,"fairygui.Relations");var e=t.prototype;return e.add=function(t,e,i){void 0===i&&(i=!1);for(var n=this._items.length,r=0;n>r;r++){var s=this._items[r];if(s.target==t)return void s.add(e,i)}var a=new Q(this._owner);a.target=t,a.add(e,i),this._items.push(a)},e.addItems=function(t,e){var i,n=e.split(","),r=!1,s=NaN,a=new Q(this._owner);for(a.target=t,s=0;2>s;s++)if(i=n[s]){"%"==i.charAt(i.length-1)?(i=i.substr(0,i.length-1),r=!0):r=!1;var o=i.indexOf("-");-1==o&&(i=i+"-"+i);var h=fairygui.Relations.RELATION_NAMES.indexOf(i);if(-1==h)throw"invalid relation type";a.internalAdd(h,r)}this._items.push(a)},e.remove=function(t,e){void 0===e&&(e=0);for(var i=this._items.length,n=0;i>n;){var r=this._items[n];r.target==t?(r.remove(e),r.isEmpty?(r.dispose(),this._items.splice(n,1),i--):n++):n++}},e.contains=function(t){for(var e=this._items.length,i=0;e>i;i++){var n=this._items[i];if(n.target==t)return!0}return!1},e.clearFor=function(t){for(var e=this._items.length,i=0;e>i;){var n=this._items[i];n.target==t?(n.dispose(),this._items.splice(i,1),e--):i++}},e.clearAll=function(){for(var t=this._items.length,e=0;t>e;e++){var i=this._items[e];i.dispose()}this._items.length=0},e.copyFrom=function(t){this.clearAll();for(var e=t._items,i=e.length,n=0;i>n;n++){var r=e[n],s=new Q(this._owner);s.copyFrom(r),this._items.push(s)}},e.dispose=function(){this.clearAll()},e.onOwnerSizeChanged=function(t,e){if(0!=this._items.length)for(var i=this._items.length,n=0;i>n;n++){var r=this._items[n];r.applyOnSelfResized(t,e)}},e.ensureRelationsSizeCorrect=function(){if(0!=this._items.length){this.sizeDirty=!1;for(var t=this._items.length,e=0;t>e;e++){var i=this._items[e];i.target.ensureSizeCorrect()}}},e.setup=function(t){for(var e,i,n=t.childNodes,r=n.length,s=0;r>s;s++){var a=n[s];"relation"==a.nodeName&&(e=a.getAttribute("target"),i=this._owner.parent?e?this._owner.parent.getChildById(e):this._owner.parent:this._owner.getChildById(e),i&&this.addItems(i,a.getAttribute("sidePair")))}},s(0,e,"empty",function(){return 0==this._items.length}),n(t,["RELATION_NAMES",function(){return this.RELATION_NAMES=["left-left","left-center","left-right","center-center","right-left","right-center","right-right","top-top","top-middle","top-bottom","middle-middle","bottom-top","bottom-middle","bottom-bottom","width-width","height-height","leftext-left","leftext-right","rightext-left","rightext-right","topext-top","topext-bottom","bottomext-top","bottomext-bottom"]}]),t}(),tt=(function(){function t(){}return r(t,"fairygui.RelationType"),t.Left_Left=0,t.Left_Center=1,t.Left_Right=2,t.Center_Center=3,t.Right_Left=4,t.Right_Center=5,t.Right_Right=6,t.Top_Top=7,t.Top_Middle=8,t.Top_Bottom=9,t.Middle_Middle=10,t.Bottom_Top=11,t.Bottom_Middle=12,t.Bottom_Bottom=13,t.Width=14,t.Height=15,t.LeftExt_Left=16,t.LeftExt_Right=17,t.RightExt_Left=18,t.RightExt_Right=19,t.TopExt_Top=20,t.TopExt_Bottom=21,t.BottomExt_Top=22,t.BottomExt_Bottom=23,t.Size=24,t}(),function(){function t(){}return r(t,"fairygui.ScrollBarDisplayType"),t.parse=function(t){switch(t){case"default":return 0;case"visible":return 1;case"auto":return 2;case"hidden":return 3;default:return 0}},t.Default=0,t.Visible=1,t.Auto=2,t.Hidden=3,t}()),et=function(){function t(t,i,n,r,s,a,o){if(this._owner=null,this._maskContainer=null,this._container=null,this._alignContainer=null,this._viewWidth=0,this._viewHeight=0,this._contentWidth=0,this._contentHeight=0,this._scrollType=0,this._scrollSpeed=0,this._mouseWheelSpeed=0,this._scrollBarMargin=null,this._bouncebackEffect=!1,this._touchEffect=!1,this._scrollBarDisplayAuto=!1,this._vScrollNone=!1,this._hScrollNone=!1,this._displayOnLeft=!1,this._snapToItem=!1,this._displayInDemand=!1,this._mouseWheelEnabled=!1,this._pageMode=!1,this._pageSizeH=NaN,this._pageSizeV=NaN,this._inertiaDisabled=!1,this._yPerc=NaN,this._xPerc=NaN,this._xPos=NaN,this._yPos=NaN,this._xOverlap=NaN,this._yOverlap=NaN,this._tweening=NaN,this._tweenHelper=null,this._tweener=null,this._needRefresh=!1,this._time1=NaN,this._time2=NaN,this._y1=NaN,this._y2=NaN,this._yOffset=NaN,this._x1=NaN,this._x2=NaN,this._xOffset=NaN,this._holdAreaPoint=null,this._isHoldAreaDone=!1,this._aniFlag=0,this._scrollBarVisible=!1,this._pageController=null,this._hzScrollBar=null,this._vtScrollBar=null,this.isDragged=!1,null==fairygui.ScrollPane._easeTypeFunc&&(fairygui.ScrollPane._easeTypeFunc=u.cubicOut),this._tweenHelper=new e,this._owner=t,this._maskContainer=new w,this._owner.displayObject.addChild(this._maskContainer),this._container=this._owner._container,this._container.pos(0,0),this._maskContainer.addChild(this._container),this._scrollType=i,this._scrollBarMargin=n,this._bouncebackEffect=st.defaultScrollBounceEffect,this._touchEffect=st.defaultScrollTouchEffect,this._scrollSpeed=st.defaultScrollSpeed,this._mouseWheelSpeed=2*this._scrollSpeed,this._displayOnLeft=0!=(1&s),this._snapToItem=0!=(2&s),this._displayInDemand=0!=(4&s),this._pageMode=0!=(8&s),16&s?this._touchEffect=!0:32&s?this._touchEffect=!1:this._touchEffect=st.defaultScrollTouchEffect,64&s?this._bouncebackEffect=!0:128&s?this._bouncebackEffect=!1:this._bouncebackEffect=st.defaultScrollBounceEffect,this._inertiaDisabled=0!=(256&s),0==(512&s)&&(this._maskContainer.scrollRect=new v),this._xPerc=0,this._yPerc=0,this._xPos=0,this._yPos=0,this._xOverlap=0,this._yOverlap=0,this._aniFlag=0,this._scrollBarVisible=!0,this._mouseWheelEnabled=!0,this._holdAreaPoint=new y,0==r&&(r=st.defaultScrollBarDisplay),3!=r){if(2==this._scrollType||1==this._scrollType){var h=a?a:st.verticalScrollBar;if(h){if(this._vtScrollBar=ot.createObjectFromURL(h),!this._vtScrollBar)throw"cannot create scrollbar from "+h;this._vtScrollBar.setScrollPane(this,!0),this._owner.displayObject.addChild(this._vtScrollBar.displayObject)}}if((2==this._scrollType||0==this._scrollType)&&(h=o?o:st.horizontalScrollBar)){if(this._hzScrollBar=ot.createObjectFromURL(h),!this._hzScrollBar)throw"cannot create scrollbar from "+h;this._hzScrollBar.setScrollPane(this,!1),this._owner.displayObject.addChild(this._hzScrollBar.displayObject)}this._scrollBarDisplayAuto=2==r,this._scrollBarDisplayAuto&&(this._scrollBarVisible=!1,this._vtScrollBar&&(this._vtScrollBar.displayObject.visible=!1),this._hzScrollBar&&(this._hzScrollBar.displayObject.visible=!1))}this._contentWidth=0,this._contentHeight=0,this.setSize(t.width,t.height),this._owner.on("mousedown",this,this.__mouseDown),this._owner.on("mousewheel",this,this.__mouseWheel)}var e;r(t,"fairygui.ScrollPane");var a=t.prototype;return a.setPercX=function(t,e){void 0===e&&(e=!1),this._owner.ensureBoundsCorrect(),t=lt.clamp01(t),t!=this._xPerc&&(this._xPerc=t,this._xPos=this._xPerc*this._xOverlap,this.posChanged(e))},a.setPercY=function(t,e){void 0===e&&(e=!1),this._owner.ensureBoundsCorrect(),t=lt.clamp01(t),t!=this._yPerc&&(this._yPerc=t,this._yPos=this._yPerc*this._yOverlap,this.posChanged(e))},a.setPosX=function(t,e){void 0===e&&(e=!1),this._owner.ensureBoundsCorrect(),t=lt.clamp(t,0,this._xOverlap),t!=this._xPos&&(this._xPos=t,this._xPerc=0==this._xOverlap?0:this._xPos/this._xOverlap,this.posChanged(e))},a.setPosY=function(t,e){void 0===e&&(e=!1),this._owner.ensureBoundsCorrect(),t=lt.clamp(t,0,this._yOverlap),t!=this._yPos&&(this._yPos=t,this._yPerc=0==this._yOverlap?0:this._yPos/this._yOverlap,this.posChanged(e))},a.getDeltaX=function(t){return t/(this._contentWidth-this._viewWidth)},a.getDeltaY=function(t){return t/(this._contentHeight-this._viewHeight)},a.scrollTop=function(t){void 0===t&&(t=!1),this.setPercY(0,t)},a.scrollBottom=function(t){void 0===t&&(t=!1),this.setPercY(1,t)},a.scrollUp=function(t,e){void 0===t&&(t=1),void 0===e&&(e=!1),this.setPercY(this._yPerc-this.getDeltaY(this._scrollSpeed*t),e)},a.scrollDown=function(t,e){void 0===t&&(t=1),void 0===e&&(e=!1),this.setPercY(this._yPerc+this.getDeltaY(this._scrollSpeed*t),e)},a.scrollLeft=function(t,e){void 0===t&&(t=1),void 0===e&&(e=!1),this.setPercX(this._xPerc-this.getDeltaX(this._scrollSpeed*t),e)},a.scrollRight=function(t,e){void 0===t&&(t=1),void 0===e&&(e=!1),this.setPercX(this._xPerc+this.getDeltaX(this._scrollSpeed*t),e)},a.scrollToView=function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1),this._owner.ensureBoundsCorrect(),this._needRefresh&&this.refresh();var n;if(t instanceof fairygui.GObject?t.parent!=this._owner?(t.parent.localToGlobalRect(t.x,t.y,t.width,t.height,fairygui.ScrollPane.sHelperRect),n=this._owner.globalToLocalRect(fairygui.ScrollPane.sHelperRect.x,fairygui.ScrollPane.sHelperRect.y,fairygui.ScrollPane.sHelperRect.width,fairygui.ScrollPane.sHelperRect.height,fairygui.ScrollPane.sHelperRect)):(n=fairygui.ScrollPane.sHelperRect,n.setTo(t.x,t.y,t.width,t.height)):n=t,this._yOverlap>0){var r=this.posY,s=r+this._viewHeight;i||n.y<r||n.height>=this._viewHeight?this._pageMode?this.setPosY(Math.floor(n.y/this._pageSizeV)*this._pageSizeV,e):this.setPosY(n.y,e):n.y+n.height>s&&(this._pageMode?this.setPosY(Math.floor(n.y/this._pageSizeV)*this._pageSizeV,e):n.height<=this._viewHeight/2?this.setPosY(n.y+2*n.height-this._viewHeight,e):this.setPosY(n.y+n.height-this._viewHeight,e))}if(this._xOverlap>0){var a=this.posX,o=a+this._viewWidth;i||n.x<a||n.width>=this._viewWidth?this._pageMode?this.setPosX(Math.floor(n.x/this._pageSizeH)*this._pageSizeH,e):this.setPosX(n.x,e):n.x+n.width>o&&(this._pageMode?this.setPosX(Math.floor(n.x/this._pageSizeH)*this._pageSizeH,e):n.width<=this._viewWidth/2?this.setPosX(n.x+2*n.width-this._viewWidth,e):this.setPosX(n.x+n.width-this._viewWidth,e))}!e&&this._needRefresh&&this.refresh()},a.isChildInView=function(t){var e=NaN;return this._yOverlap>0&&(e=t.y+this._container.y,e<-t.height-20||e>this._viewHeight+20)?!1:this._xOverlap>0&&(e=t.x+this._container.x,e<-t.width-20||e>this._viewWidth+20)?!1:!0},a.cancelDragging=function(){this._owner.displayObject.stage.off("mousemove",this,this.__mouseMove),this._owner.displayObject.stage.off("mouseup",this,this.__mouseUp),this._owner.displayObject.stage.off("click",this,this.__click),t.draggingPane==this&&(t.draggingPane=null),t._gestureFlag=0,this.isDragged=!1,this._maskContainer.mouseEnabled=!0},a.onOwnerSizeChanged=function(){this.setSize(this._owner.width,this._owner.height),this.posChanged(!1)},a.handleControllerChanged=function(t){this._pageController==t&&(0==this._scrollType?this.currentPageX=t.selectedIndex:this.currentPageY=t.selectedIndex)},a.updatePageController=function(){if(null!=this._pageController&&!this._pageController.changing){var t=0;if(t=0==this._scrollType?this.currentPageX:this.currentPageY,t<this._pageController.pageCount){var e=this._pageController;this._pageController=null,e.selectedIndex=t,this._pageController=e}}},a.adjustMaskContainer=function(){var t=NaN,e=NaN;t=this._displayOnLeft&&null!=this._vtScrollBar?Math.floor(this._owner.margin.left+this._vtScrollBar.width):Math.floor(this._owner.margin.left),
e=Math.floor(this._owner.margin.top),this._maskContainer.pos(t,e),0!=this._owner._alignOffset.x||0!=this._owner._alignOffset.y?(null==this._alignContainer&&(this._alignContainer=new w,this._maskContainer.addChild(this._alignContainer),this._alignContainer.addChild(this._container)),this._alignContainer.pos(this._owner._alignOffset.x,this._owner._alignOffset.y)):this._alignContainer&&this._alignContainer.pos(0,0)},a.setSize=function(t,e){this.adjustMaskContainer(),this._hzScrollBar&&(this._hzScrollBar.y=e-this._hzScrollBar.height,this._vtScrollBar&&!this._vScrollNone?(this._hzScrollBar.width=t-this._vtScrollBar.width-this._scrollBarMargin.left-this._scrollBarMargin.right,this._displayOnLeft?this._hzScrollBar.x=this._scrollBarMargin.left+this._vtScrollBar.width:this._hzScrollBar.x=this._scrollBarMargin.left):(this._hzScrollBar.width=t-this._scrollBarMargin.left-this._scrollBarMargin.right,this._hzScrollBar.x=this._scrollBarMargin.left)),this._vtScrollBar&&(this._displayOnLeft||(this._vtScrollBar.x=t-this._vtScrollBar.width),this._hzScrollBar?this._vtScrollBar.height=e-this._hzScrollBar.height-this._scrollBarMargin.top-this._scrollBarMargin.bottom:this._vtScrollBar.height=e-this._scrollBarMargin.top-this._scrollBarMargin.bottom,this._vtScrollBar.y=this._scrollBarMargin.top),this._viewWidth=t,this._viewHeight=e,this._hzScrollBar&&!this._hScrollNone&&(this._viewHeight-=this._hzScrollBar.height),this._vtScrollBar&&!this._vScrollNone&&(this._viewWidth-=this._vtScrollBar.width),this._viewWidth-=this._owner.margin.left+this._owner.margin.right,this._viewHeight-=this._owner.margin.top+this._owner.margin.bottom,this._viewWidth=Math.max(1,this._viewWidth),this._viewHeight=Math.max(1,this._viewHeight),this._pageSizeH=this._viewWidth,this._pageSizeV=this._viewHeight,this.handleSizeChanged()},a.setContentSize=function(t,e){(this._contentWidth!=t||this._contentHeight!=e)&&(this._contentWidth=t,this._contentHeight=e,this.handleSizeChanged())},a.changeContentSizeOnScrolling=function(t,e,i,n){if(this._contentWidth+=t,this._contentHeight+=e,this.isDragged){0!=i&&(this._container.x-=i),0!=n&&(this._container.y-=n),this.validateHolderPos(),this._xOffset+=i,this._yOffset+=n;var r=this._y2-this._y1;this._y1=this._container.y,this._y2=this._y1+r,r=this._x2-this._x1,this._x1=this._container.x,this._x2=this._x1+r,this._yPos=-this._container.y,this._xPos=-this._container.x}else 2==this._tweening&&(0!=i&&(this._container.x-=i,this._tweenHelper.start.x-=i),0!=n&&(this._container.y-=n,this._tweenHelper.start.y-=n));this.handleSizeChanged(!0)},a.handleSizeChanged=function(t){void 0===t&&(t=!1),this._displayInDemand&&(this._vtScrollBar&&(this._contentHeight<=this._viewHeight?this._vScrollNone||(this._vScrollNone=!0,this._viewWidth+=this._vtScrollBar.width):this._vScrollNone&&(this._vScrollNone=!1,this._viewWidth-=this._vtScrollBar.width)),this._hzScrollBar&&(this._contentWidth<=this._viewWidth?this._hScrollNone||(this._hScrollNone=!0,this._viewHeight+=this._hzScrollBar.height):this._hScrollNone&&(this._hScrollNone=!1,this._viewHeight-=this._hzScrollBar.height))),this._vtScrollBar&&(this._viewHeight<this._vtScrollBar.minSize?this._vtScrollBar.displayObject.visible=!1:(this._vtScrollBar.displayObject.visible=this._scrollBarVisible&&!this._vScrollNone,0==this._contentHeight?this._vtScrollBar.displayPerc=0:this._vtScrollBar.displayPerc=Math.min(1,this._viewHeight/this._contentHeight))),this._hzScrollBar&&(this._viewWidth<this._hzScrollBar.minSize?this._hzScrollBar.displayObject.visible=!1:(this._hzScrollBar.displayObject.visible=this._scrollBarVisible&&!this._hScrollNone,0==this._contentWidth?this._hzScrollBar.displayPerc=0:this._hzScrollBar.displayPerc=Math.min(1,this._viewWidth/this._contentWidth)));var e=this._maskContainer.scrollRect;null!=e&&(e.width=this._viewWidth,e.height=this._viewHeight,this._maskContainer.scrollRect=e),0==this._scrollType||2==this._scrollType?this._xOverlap=Math.ceil(Math.max(0,this._contentWidth-this._viewWidth)):this._xOverlap=0,1==this._scrollType||2==this._scrollType?this._yOverlap=Math.ceil(Math.max(0,this._contentHeight-this._viewHeight)):this._yOverlap=0,0==this._tweening&&t?((0==this._xPerc||1==this._xPerc)&&(this._xPos=this._xPerc*this._xOverlap,this._container.x=-this._xPos),(0==this._yPerc||1==this._yPerc)&&(this._yPos=this._yPerc*this._yOverlap,this._container.y=-this._yPos)):(this._xPos=lt.clamp(this._xPos,0,this._xOverlap),this._xPerc=this._xOverlap>0?this._xPos/this._xOverlap:0,this._yPos=lt.clamp(this._yPos,0,this._yOverlap),this._yPerc=this._yOverlap>0?this._yPos/this._yOverlap:0),this.validateHolderPos(),null!=this._vtScrollBar&&(this._vtScrollBar.scrollPerc=this._yPerc),null!=this._hzScrollBar&&(this._hzScrollBar.scrollPerc=this._xPerc),this._pageMode&&this.updatePageController()},a.validateHolderPos=function(){this._container.x=lt.clamp(this._container.x,-this._xOverlap,0),this._container.y=lt.clamp(this._container.y,-this._yOverlap,0)},a.posChanged=function(t){0==this._aniFlag?this._aniFlag=t?1:-1:1!=this._aniFlag||t||(this._aniFlag=-1),this._needRefresh=!0,i.timer.callLater(this,this.refresh),2==this._tweening&&this.killTween()},a.killTween=function(){1==this._tweening?(this._tweener.clear(),this._tweening=0,this._tweener=null,this.syncScrollBar(!0)):2==this._tweening&&(this._tweener.clear(),this._tweener=null,this._tweening=0,this.validateHolderPos(),this.syncScrollBar(!0),V.dispatch("fui_scroll_end",this._owner.displayObject))},a.refresh=function(){if(this._needRefresh=!1,i.timer.clear(this,this.refresh),this._pageMode){var e=0,n=NaN;this._yOverlap>0&&1!=this._yPerc&&0!=this._yPerc&&(e=Math.floor(this._yPos/this._pageSizeV),n=this._yPos-e*this._pageSizeV,n>this._pageSizeV/2&&e++,this._yPos=e*this._pageSizeV,this._yPos>this._yOverlap?(this._yPos=this._yOverlap,this._yPerc=1):this._yPerc=this._yPos/this._yOverlap),this._xOverlap>0&&1!=this._xPerc&&0!=this._xPerc&&(e=Math.floor(this._xPos/this._pageSizeH),n=this._xPos-e*this._pageSizeH,n>this._pageSizeH/2&&e++,this._xPos=e*this._pageSizeH,this._xPos>this._xOverlap?(this._xPos=this._xOverlap,this._xPerc=1):this._xPerc=this._xPos/this._xOverlap)}else if(this._snapToItem){var r=this._owner.getSnappingPosition(1==this._xPerc?0:this._xPos,1==this._yPerc?0:this._yPos,t.sHelperPoint);1!=this._xPerc&&r.x!=this._xPos&&(this._xPos=r.x,this._xPerc=this._xPos/this._xOverlap,this._xPerc>1&&(this._xPerc=1,this._xPos=this._xOverlap)),1!=this._yPerc&&r.y!=this._yPos&&(this._yPos=r.y,this._yPerc=this._yPos/this._yOverlap,this._yPerc>1&&(this._yPerc=1,this._yPos=this._yOverlap))}this.refresh2(),V.dispatch("fui_scroll",this._owner.displayObject),this._needRefresh&&(this._needRefresh=!1,i.timer.clear(this,this.refresh),this.refresh2()),this._aniFlag=0},a.refresh2=function(){var t=Math.floor(this._xPos),e=Math.floor(this._yPos);if(1!=this._aniFlag||this.isDragged)null!=this._tweener&&this.killTween(),this.isDragged&&(this._xOffset+=this._container.x- -t,this._yOffset+=this._container.y- -e),this._container.pos(-t,-e),this.isDragged&&(this._y1=this._y2=this._container.y,this._x1=this._x2=this._container.x),this._vtScrollBar&&(this._vtScrollBar.scrollPerc=this._yPerc),this._hzScrollBar&&(this._hzScrollBar.scrollPerc=this._xPerc);else{var i=this._container.x,n=this._container.y;this._yOverlap>0?n=-e:0!=this._container.y&&(this._container.y=0),this._xOverlap>0?i=-t:0!=this._container.x&&(this._container.x=0),(i!=this._container.x||n!=this._container.y)&&(this.killTween(),this._maskContainer.mouseEnabled=!1,this._tweening=1,this._tweener=T.to(this._container,{x:i,y:n},500,fairygui.ScrollPane._easeTypeFunc,f.create(this,this.__tweenComplete)),this._tweener.update=f.create(this,this.__tweenUpdate,null,!1))}this._pageMode&&this.updatePageController()},a.syncPos=function(){this._xOverlap>0&&(this._xPos=lt.clamp(-this._container.x,0,this._xOverlap),this._xPerc=this._xPos/this._xOverlap),this._yOverlap>0&&(this._yPos=lt.clamp(-this._container.y,0,this._yOverlap),this._yPerc=this._yPos/this._yOverlap),this._pageMode&&this.updatePageController()},a.syncScrollBar=function(t){void 0===t&&(t=!1),t?(this._vtScrollBar&&this._scrollBarDisplayAuto&&this.showScrollBar(!1),this._hzScrollBar&&this._scrollBarDisplayAuto&&this.showScrollBar(!1),this._maskContainer.mouseEnabled=!0):(this._vtScrollBar&&(this._vtScrollBar.scrollPerc=0==this._yOverlap?0:lt.clamp(-this._container.y,0,this._yOverlap)/this._yOverlap,this._scrollBarDisplayAuto&&this.showScrollBar(!0)),this._hzScrollBar&&(this._hzScrollBar.scrollPerc=0==this._xOverlap?0:lt.clamp(-this._container.x,0,this._xOverlap)/this._xOverlap,this._scrollBarDisplayAuto&&this.showScrollBar(!0)))},a.__mouseDown=function(){this._touchEffect&&(null!=this._tweener&&this.killTween(),this._owner.globalToLocal(i.stage.mouseX,i.stage.mouseY,fairygui.ScrollPane.sHelperPoint),this._x1=this._x2=this._container.x,this._y1=this._y2=this._container.y,this._xOffset=fairygui.ScrollPane.sHelperPoint.x-this._container.x,this._yOffset=fairygui.ScrollPane.sHelperPoint.y-this._container.y,this._time1=this._time2=i.timer.currTimer,this._holdAreaPoint.x=fairygui.ScrollPane.sHelperPoint.x,this._holdAreaPoint.y=fairygui.ScrollPane.sHelperPoint.y,this._isHoldAreaDone=!1,this.isDragged=!1,this._owner.displayObject.stage.on("mousemove",this,this.__mouseMove),this._owner.displayObject.stage.on("mouseup",this,this.__mouseUp),this._owner.displayObject.stage.on("click",this,this.__click))},a.__mouseMove=function(){if(this._touchEffect&&(null==t.draggingPane||t.draggingPane==this)&&null==k.draggingObject){var e=st.touchScrollSensitivity,n=this._owner.globalToLocal(i.stage.mouseX,i.stage.mouseY,fairygui.ScrollPane.sHelperPoint),r=NaN,s=NaN,a=!1,o=!1,h=!1;if(1==this._scrollType){if(!this._isHoldAreaDone){if(t._gestureFlag|=1,r=Math.abs(this._holdAreaPoint.y-this._maskContainer.mouseY),e>r)return;if(0!=(2&t._gestureFlag)&&(s=Math.abs(this._holdAreaPoint.x-this._maskContainer.mouseX),s>r))return}a=!0}else if(0==this._scrollType){if(!this._isHoldAreaDone){if(t._gestureFlag|=2,r=Math.abs(this._holdAreaPoint.x-this._maskContainer.mouseX),e>r)return;if(0!=(1&t._gestureFlag)&&(s=Math.abs(this._holdAreaPoint.y-this._maskContainer.mouseY),s>r))return}o=!0}else{if(t._gestureFlag=3,!this._isHoldAreaDone&&(r=Math.abs(this._holdAreaPoint.y-this._maskContainer.mouseY),e>r&&(r=Math.abs(this._holdAreaPoint.x-this._maskContainer.mouseX),e>r)))return;a=o=!0}var l=i.timer.currTimer;if(l-this._time2>50&&(this._time2=this._time1,this._time1=l,h=!0),a){var u=Math.floor(n.y-this._yOffset);u>0?!this._bouncebackEffect||this._inertiaDisabled?this._container.y=0:this._container.y=Math.floor(.5*u):u<-this._yOverlap?!this._bouncebackEffect||this._inertiaDisabled?this._container.y=-Math.floor(this._yOverlap):this._container.y=Math.floor(.5*(u-this._yOverlap)):this._container.y=u,h&&(this._y2=this._y1,this._y1=this._container.y)}if(o){var c=Math.floor(n.x-this._xOffset);c>0?!this._bouncebackEffect||this._inertiaDisabled?this._container.x=0:this._container.x=Math.floor(.5*c):c<0-this._xOverlap||this._inertiaDisabled?this._bouncebackEffect?this._container.x=Math.floor(.5*(c-this._xOverlap)):this._container.x=-Math.floor(this._xOverlap):this._container.x=c,h&&(this._x2=this._x1,this._x1=this._container.x)}t.draggingPane=this,this._maskContainer.mouseEnabled=!1,this._isHoldAreaDone=!0,this.isDragged=!0,this.syncPos(),this.syncScrollBar(),V.dispatch("fui_scroll",this._owner.displayObject)}},a.__mouseUp=function(){if(this._owner.displayObject.stage.off("mousemove",this,this.__mouseMove),this._owner.displayObject.stage.off("mouseup",this,this.__mouseUp),this._owner.displayObject.stage.off("click",this,this.__click),!this._touchEffect)return void(this.isDragged=!1);if(t.draggingPane==this&&(t.draggingPane=null),t._gestureFlag=0,!this.isDragged||!this._touchEffect||this._inertiaDisabled)return void(this.isDragged=!1);this.isDragged=!1;var n=(i.timer.currTimer-this._time2)/1e3;0==n&&(n=.001);var r=(this._container.y-this._y2)/n*2*st.defaultTouchScrollSpeedRatio,s=(this._container.x-this._x2)/n*2*st.defaultTouchScrollSpeedRatio,a=.3;this._tweenHelper.start.x=this._container.x,this._tweenHelper.start.y=this._container.y;var o=this._tweenHelper.change1,h=this._tweenHelper.change2,l=0,u=0,c=0,_=0,d=0,p=NaN;if(2==this._scrollType||0==this._scrollType?(this._container.x>st.touchDragSensitivity?d=1:this._container.x<-this._xOverlap-st.touchDragSensitivity&&(d=2),o.x=e.calculateChange(s,a),h.x=0,l=this._container.x+o.x,this._pageMode&&0>l&&l>-this._xOverlap&&(c=Math.floor(-l/this._pageSizeH),p=Math.min(this._pageSizeH,this._contentWidth-(c+1)*this._pageSizeH),_=-l-c*this._pageSizeH,Math.abs(o.x)>this._pageSizeH?_>.5*p&&c++:_>p*(o.x<0?.3:.7)&&c++,l=-c*this._pageSizeH,l<-this._xOverlap&&(l=-this._xOverlap),o.x=l-this._container.x)):o.x=h.x=0,2==this._scrollType||1==this._scrollType?(this._container.y>st.touchDragSensitivity?d=1:this._container.y<-this._yOverlap-st.touchDragSensitivity&&(d=2),o.y=e.calculateChange(r,a),h.y=0,u=this._container.y+o.y,this._pageMode&&0>u&&u>-this._yOverlap&&(c=Math.floor(-u/this._pageSizeV),p=Math.min(this._pageSizeV,this._contentHeight-(c+1)*this._pageSizeV),_=-u-c*this._pageSizeV,Math.abs(o.y)>this._pageSizeV?_>.5*p&&c++:_>p*(o.y<0?.3:.7)&&c++,u=-c*this._pageSizeV,u<-this._yOverlap&&(u=-this._yOverlap),o.y=u-this._container.y)):o.y=h.y=0,this._snapToItem&&!this._pageMode){l=-l,u=-u;var m=this._owner.getSnappingPosition(l,u,fairygui.ScrollPane.sHelperPoint);l=-m.x,u=-m.y,o.x=l-this._container.x,o.y=u-this._container.y}this._bouncebackEffect?(l>0?h.x=0-this._container.x-o.x:l<-this._xOverlap&&(h.x=-this._xOverlap-this._container.x-o.x),u>0?h.y=0-this._container.y-o.y:u<-this._yOverlap&&(h.y=-this._yOverlap-this._container.y-o.y)):(l>0?o.x=0-this._container.x:l<-this._xOverlap&&(o.x=-this._xOverlap-this._container.x),u>0?o.y=0-this._container.y:u<-this._yOverlap&&(o.y=-this._yOverlap-this._container.y)),this._tweenHelper.value=0,this._tweenHelper.change1=o,this._tweenHelper.change2=h,null!=this._tweener&&this.killTween(),this._tweening=2,this._tweener=T.to(this._tweenHelper,{value:1},1e3*a,fairygui.ScrollPane._easeTypeFunc,f.create(this,this.__tweenComplete2)),this._tweener.update=f.create(this,this.__tweenUpdate2,null,!1),1==d?V.dispatch("fui_pull_down_release",this._owner.displayObject):2==d&&V.dispatch("fui_pull_up_release",this._owner.displayObject)},a.__click=function(){this.isDragged=!1},a.__mouseWheel=function(t){if(this._mouseWheelEnabled){var e=(this._owner.globalToLocal(i.stage.mouseX,i.stage.mouseY,fairygui.ScrollPane.sHelperPoint),t.delta);this._xOverlap>0&&0==this._yOverlap?0>e?this.setPercX(this._xPerc+this.getDeltaX(this._mouseWheelSpeed),!1):this.setPercX(this._xPerc-this.getDeltaX(this._mouseWheelSpeed),!1):0>e?this.setPercY(this._yPerc+this.getDeltaY(this._mouseWheelSpeed),!1):this.setPercY(this._yPerc-this.getDeltaY(this._mouseWheelSpeed),!1)}},a.__rollOver=function(){this.showScrollBar(!0)},a.__rollOut=function(){this.showScrollBar(!1)},a.showScrollBar=function(t){t?(this.__showScrollBar(!0),i.timer.clear(this,this.__showScrollBar)):i.timer.once(500,this,this.__showScrollBar,[t])},a.__showScrollBar=function(t){this._scrollBarVisible=t&&this._viewWidth>0&&this._viewHeight>0,this._vtScrollBar&&(this._vtScrollBar.displayObject.visible=this._scrollBarVisible&&!this._vScrollNone),this._hzScrollBar&&(this._hzScrollBar.displayObject.visible=this._scrollBarVisible&&!this._hScrollNone)},a.__tweenUpdate=function(){this.syncScrollBar(),V.dispatch("fui_scroll",this._owner.displayObject)},a.__tweenComplete=function(){this._tweener=null,this._tweening=0,this.validateHolderPos(),this.syncScrollBar(!0),V.dispatch("fui_scroll",this._owner.displayObject)},a.__tweenUpdate2=function(){this._container.pos(Math.floor(this._tweenHelper.start.x+this._tweenHelper.change1.x*this._tweenHelper.value+this._tweenHelper.change2.x*this._tweenHelper.value*this._tweenHelper.value),Math.floor(this._tweenHelper.start.y+this._tweenHelper.change1.y*this._tweenHelper.value+this._tweenHelper.change2.y*this._tweenHelper.value*this._tweenHelper.value)),this.syncPos(),this.syncScrollBar(),V.dispatch("fui_scroll",this._owner.displayObject)},a.__tweenComplete2=function(){this._tweener=null,this._tweening=0,this.validateHolderPos(),this.syncPos(),this.syncScrollBar(!0),V.dispatch("fui_scroll",this._owner.displayObject),V.dispatch("fui_scroll_end",this._owner.displayObject)},s(0,a,"viewWidth",function(){return this._viewWidth},function(t){t=t+this._owner.margin.left+this._owner.margin.right,null!=this._vtScrollBar&&(t+=this._vtScrollBar.width),this._owner.width=t}),s(0,a,"owner",function(){return this._owner}),s(0,a,"percY",function(){return this._yPerc},function(t){this.setPercY(t,!1)}),s(0,a,"scrollSpeed",function(){return this._scrollSpeed},function(t){this._scrollSpeed=this.scrollSpeed,0==this._scrollSpeed&&(this._scrollSpeed=st.defaultScrollSpeed),this._mouseWheelSpeed=2*this._scrollSpeed}),s(0,a,"percX",function(){return this._xPerc},function(t){this.setPercX(t,!1)}),s(0,a,"bouncebackEffect",function(){return this._bouncebackEffect},function(t){this._bouncebackEffect=t}),s(0,a,"isBottomMost",function(){return 1==this._yPerc||0==this._yOverlap}),s(0,a,"touchEffect",function(){return this._touchEffect},function(t){this._touchEffect=t}),s(0,a,"mouseWheelEnabled",function(){return this._mouseWheelEnabled},function(t){this._mouseWheelEnabled=t}),s(0,a,"viewHeight",function(){return this._viewHeight},function(t){t=t+this._owner.margin.top+this._owner.margin.bottom,null!=this._hzScrollBar&&(t+=this._hzScrollBar.height),this._owner.height=t}),s(0,a,"snapToItem",function(){return this._snapToItem},function(t){this._snapToItem=t}),s(0,a,"posX",function(){return this._xPos},function(t){this.setPosX(t,!1)}),s(0,a,"posY",function(){return this._yPos},function(t){this.setPosY(t,!1)}),s(0,a,"isRightMost",function(){return 1==this._xPerc||0==this._xOverlap}),s(0,a,"currentPageX",function(){if(!this._pageMode)return 0;var t=Math.floor(this._xPos/this._pageSizeH);return this._xPos-t*this._pageSizeH>.5*this._pageSizeH&&t++,t},function(t){this._pageMode&&this._xOverlap>0&&this.setPosX(t*this._pageSizeH,!1)}),s(0,a,"currentPageY",function(){if(!this._pageMode)return 0;var t=Math.floor(this._yPos/this._pageSizeV);return this._yPos-t*this._pageSizeV>.5*this._pageSizeV&&t++,t},function(t){this._pageMode&&this._yOverlap>0&&this.setPosY(t*this._pageSizeV,!1)}),s(0,a,"pageController",function(){return this._pageController},function(t){this._pageController=t}),s(0,a,"scrollingPosX",function(){return lt.clamp(-this._container.x,0,this._xOverlap)}),s(0,a,"scrollingPosY",function(){return lt.clamp(-this._container.y,0,this._yOverlap)}),s(0,a,"contentWidth",function(){return this._contentWidth}),s(0,a,"contentHeight",function(){return this._contentHeight}),t._easeTypeFunc=null,t.draggingPane=null,t._gestureFlag=0,n(t,["sHelperRect",function(){return this.sHelperRect=new v},"sHelperPoint",function(){return this.sHelperPoint=new y}]),t.__init$=function(){e=function(){function t(){this.value=NaN,this.start=null,this.change1=null,this.change2=null,this.start=new y,this.change1=new y,this.change2=new y}return r(t,""),t.calculateChange=function(e,i){return i*t.checkpoint*e/t.easeOutCubic(t.checkpoint,0,1,1)},t.easeOutCubic=function(t,e,i,n){return i*((t=t/n-1)*t*t+1)+e},t.checkpoint=.05,t}()},t}(),it=function(){function t(){}return r(t,"fairygui.ScrollType"),t.parse=function(t){switch(t){case"horizontal":return 0;case"vertical":return 1;case"both":return 2;default:return 1}},t.Horizontal=0,t.Vertical=1,t.Both=2,t}(),nt=function(){function t(t){this.name=null,this.autoPlayRepeat=1,this.autoPlayDelay=0,this._owner=null,this._ownerBaseX=0,this._ownerBaseY=0,this._items=null,this._totalTimes=0,this._totalTasks=0,this._playing=!1,this._onComplete=null,this._options=0,this._reversed=!1,this._maxTime=0,this._autoPlay=!1,this.OPTION_IGNORE_DISPLAY_CONTROLLER=1,this.OPTION_AUTO_STOP_DISABLED=2,this.OPTION_AUTO_STOP_AT_END=4,this.FRAME_RATE=24,this._owner=t,this._items=[]}var e,n,a;r(t,"fairygui.Transition");var o=t.prototype;return o.play=function(t,e,i){void 0===e&&(e=1),void 0===i&&(i=0),this._play(t,e,i,!1)},o.playReverse=function(t,e,i){void 0===e&&(e=1),void 0===i&&(i=0),this._play(t,e,i,!0)},o.changeRepeat=function(t){this._totalTimes=t},o._play=function(t,e,i,n){if(void 0===e&&(e=1),void 0===i&&(i=0),void 0===n&&(n=!1),this.stop(),this._totalTimes=e,this._reversed=n,this.internalPlay(i),this._playing=this._totalTasks>0,this._playing){if(this._onComplete=t,0!=(this._options&this.OPTION_IGNORE_DISPLAY_CONTROLLER))for(var r=this._items.length,s=0;r>s;s++){var a=this._items[s];null!=a.target&&a.target!=this._owner&&(a.displayLockToken=a.target.addDisplayLock())}}else null!=t&&t.run()},o.stop=function(t,e){if(void 0===t&&(t=!0),void 0===e&&(e=!1),this._playing){this._playing=!1,this._totalTasks=0,this._totalTimes=0;var i=this._onComplete;this._onComplete=null;var n,r=this._items.length,s=NaN;if(this._reversed)for(s=r-1;s>=0;s--)n=this._items[s],null!=n.target&&this.stopItem(n,t);else for(s=0;r>s;s++)n=this._items[s],null!=n.target&&this.stopItem(n,t);e&&null!=i&&i.run()}},o.stopItem=function(t,e){if(0!=t.displayLockToken&&(t.target.releaseDisplayLock(t.displayLockToken),t.displayLockToken=0),12==t.type&&t.filterCreated&&(t.target.filters=null),!t.completed)if(null!=t.tweener&&(t.tweener.clear(),t.tweener=null),10==t.type){var n=t.target.getTransition(t.value.s);null!=n&&n.stop(e,!1)}else 11==t.type?(i.timer.clear(t,t.__shake),t.target._gearLocked=!0,t.target.setXY(t.target.x-t.startValue.f1,t.target.y-t.startValue.f2),t.target._gearLocked=!1):e&&(t.tween?t.yoyo&&t.repeat%2!=0?this.applyValue(t,this._reversed?t.endValue:t.startValue):this.applyValue(t,this._reversed?t.startValue:t.endValue):9!=t.type&&this.applyValue(t,t.value))},o.dispose=function(){if(this._playing){this._playing=!1;for(var t=this._items.length,e=0;t>e;e++){var n=this._items[e];if(null!=n.target&&!n.completed)if(null!=n.tweener&&(n.tweener.clear(),n.tweener=null),10==n.type){var r=n.target.getTransition(n.value.s);null!=r&&r.dispose()}else 11==n.type&&i.timer.clear(n,n.__shake)}}},o.setValue=function(t,e){for(var i=[],n=1,r=arguments.length;r>n;n++)i.push(arguments[n]);for(var s,a=this._items.length,n=0;a>n;n++){var o=this._items[n];if(null!=o.label||null!=o.label2){if(o.label==t)s=o.tween?o.startValue:o.value;else{if(o.label2!=t)continue;s=o.endValue}switch(o.type){case 0:case 1:case 3:case 2:case 13:s.b1=!0,s.b2=!0,s.f1=parseFloat(i[0]),s.f2=parseFloat(i[1]);break;case 4:s.f1=parseFloat(i[0]);break;case 5:s.i=parseInt(i[0]);break;case 6:s.s=i[0];break;case 7:s.i=parseInt(i[0]),i.length>1&&(s.b=i[1]);break;case 8:s.b=i[0];break;case 9:s.s=i[0],i.length>1&&(s.f1=parseFloat(i[1]));break;case 10:s.s=i[0],i.length>1&&(s.i=parseInt(i[1]));break;case 11:s.f1=parseFloat(i[0]),i.length>1&&(s.f2=parseFloat(i[1]));break;case 12:s.f1=parseFloat(i[0]),s.f2=parseFloat(i[1]),s.f3=parseFloat(i[2]),s.f4=parseFloat(i[3])}}}},o.setHook=function(t,e){for(var i=this._items.length,n=0;i>n;n++){var r=this._items[n];if(r.label==t){r.hook=e;break}if(r.label2==t){r.hook2=e;break}}},o.clearHooks=function(){for(var t=this._items.length,e=0;t>e;e++){var i=this._items[e];i.hook=null,i.hook2=null}},o.setTarget=function(t,e){for(var i=this._items.length,n=0;i>n;n++){var r=this._items[n];r.label==t&&(r.targetId=e.id)}},o.setDuration=function(t,e){for(var i=this._items.length,n=0;i>n;n++){var r=this._items[n];r.tween&&r.label==t&&(r.duration=e)}},o.updateFromRelations=function(t,e,i){var n=this._items.length;if(0!=n)for(var r=0;n>r;r++){var s=this._items[r];0==s.type&&s.targetId==t&&(s.tween?(s.startValue.f1+=e,s.startValue.f2+=i,s.endValue.f1+=e,s.endValue.f2+=i):(s.value.f1+=e,s.value.f2+=i))}},o.OnOwnerRemovedFromStage=function(){0==(this._options&this.OPTION_AUTO_STOP_DISABLED)&&this.stop(0!=(this._options&this.OPTION_AUTO_STOP_AT_END)?!0:!1,!1)},o.internalPlay=function(t){void 0===t&&(t=0),this._ownerBaseX=this._owner.x,this._ownerBaseY=this._owner.y,this._totalTasks=0;for(var e,i=this._items.length,n=NaN,r=0;i>r;r++)e=this._items[r],e.targetId?e.target=this._owner.getChildById(e.targetId):e.target=this._owner,null!=e.target&&(e.tween?(n=this._reversed?t+this._maxTime-e.time-e.duration:t+e.time,n>0?(this._totalTasks++,e.completed=!1,e.tweener=T.to(e.value,{},1e3*n,null,f.create(this,this.__delayCall,[e])),e.tweener.update=null):this.startTween(e)):(n=this._reversed?t+this._maxTime-e.time:t+e.time,0==n?this.applyValue(e,e.value):(e.completed=!1,this._totalTasks++,e.tweener=T.to(e.value,{},1e3*n,null,f.create(this,this.__delayCall2,[e])),e.tweener.update=null)))},o.prepareValue=function(t,e,i){void 0===i&&(i=!1);var n,r;switch(i?(n=t.endValue,r=t.startValue):(n=t.startValue,r=t.endValue),t.type){case 0:case 1:0==t.type?t.target==this._owner?(n.b1||(n.f1=0),n.b2||(n.f2=0)):(n.b1||(n.f1=t.target.x),n.b2||(n.f2=t.target.y)):(n.b1||(n.f1=t.target.width),n.b2||(n.f2=t.target.height)),t.value.f1=n.f1,t.value.f2=n.f2,r.b1||(r.f1=t.value.f1),r.b2||(r.f2=t.value.f2),t.value.b1=n.b1||r.b1,t.value.b2=n.b2||r.b2,e.f1=r.f1,e.f2=r.f2;break;case 2:case 13:t.value.f1=n.f1,t.value.f2=n.f2,e.f1=r.f1,e.f2=r.f2;break;case 4:t.value.f1=n.f1,e.f1=r.f1;break;case 5:t.value.i=n.i,e.i=r.i;break;case 12:t.value.f1=n.f1,t.value.f2=n.f2,t.value.f3=n.f3,t.value.f4=n.f4,e.f1=r.f1,e.f2=r.f2,e.f3=r.f3,e.f4=r.f4}e.dummy=0},o.startTween=function(t){var e={};this.prepareValue(t,e,this._reversed),this.applyValue(t,t.value);var i;0!=t.repeat?(t.tweenTimes=0,i=f.create(this,this.__tweenRepeatComplete,[t])):i=f.create(this,this.__tweenComplete,[t]),this._totalTasks++,t.completed=!1,t.tweener=T.to(t.value,e,1e3*t.duration,t.easeType,i),t.tweener.update=f.create(this,this.__tweenUpdate,[t],!1),null!=t.hook&&t.hook.run()},o.__delayCall=function(t){t.tweener=null,this._totalTasks--,this.startTween(t)},o.__delayCall2=function(t){t.tweener=null,this._totalTasks--,t.completed=!0,this.applyValue(t,t.value),null!=t.hook&&t.hook.run(),this.checkAllComplete()},o.__tweenUpdate=function(t){this.applyValue(t,t.value)},o.__tweenComplete=function(t){t.tweener=null,this._totalTasks--,t.completed=!0,null!=t.hook2&&t.hook2.run(),this.checkAllComplete()},o.__tweenRepeatComplete=function(t){if(t.tweenTimes++,-1==t.repeat||t.tweenTimes<t.repeat+1){var e={},i=!1;i=t.yoyo?this._reversed?t.tweenTimes%2==0:t.tweenTimes%2==1:this._reversed,this.prepareValue(t,e,i),t.tweener=T.to(t.value,e,1e3*t.duration,t.easeType,f.create(this,this.__tweenRepeatComplete,[t])),t.tweener.update=f.create(this,this.__tweenUpdate,[t],!1)}else this.__tweenComplete(t)},o.__playTransComplete=function(t){this._totalTasks--,t.completed=!0,this.checkAllComplete()},o.checkAllComplete=function(){if(this._playing&&0==this._totalTasks)if(this._totalTimes<0)i.timer.callLater(this,this.internalPlay);else if(this._totalTimes--,this._totalTimes>0)i.timer.callLater(this,this.internalPlay);else{this._playing=!1;for(var t=this._items.length,e=0;t>e;e++){var n=this._items[e];null!=n.target&&(0!=n.displayLockToken&&(n.target.releaseDisplayLock(n.displayLockToken),n.displayLockToken=0),n.filterCreated&&(n.filterCreated=!1,n.target.filters=null))}if(null!=this._onComplete){var r=this._onComplete;this._onComplete=null,r.run()}}},o.applyValue=function(t,e){switch(t.target._gearLocked=!0,t.type){case 0:if(t.target==this._owner){var n=0,r=0;n=e.b1?e.f1+this._ownerBaseX:t.target.x,r=e.b2?e.f2+this._ownerBaseY:t.target.y,t.target.setXY(n,r)}else e.b1||(e.f1=t.target.x),e.b2||(e.f2=t.target.y),t.target.setXY(e.f1,e.f2);break;case 1:e.b1||(e.f1=t.target.width),e.b2||(e.f2=t.target.height),t.target.setSize(e.f1,e.f2);break;case 3:t.target.setPivot(e.f1,e.f2);break;case 4:t.target.alpha=e.f1;break;case 5:t.target.rotation=e.i;break;case 2:t.target.setScale(e.f1,e.f2);break;case 13:t.target.setSkew(e.f1,e.f2);break;case 6:t.target.color=e.s;break;case 7:e.b1||(e.i=t.target.frame),t.target.frame=e.i,t.target.playing=e.b;break;case 8:t.target.visible=e.b;break;case 10:var s=t.target.getTransition(e.s);null!=s&&(0==e.i?s.stop(!1,!0):s.playing?s._totalTimes=e.i:(t.completed=!1,this._totalTasks++,this._reversed?s.playReverse(f.create(this,this.__playTransComplete,[t]),t.value.i):s.play(f.create(this,this.__playTransComplete,[t]),t.value.i)));break;case 9:var a=ot.getItemByURL(e.s);a?Bt.inst.playOneShotSound(a.owner.getItemAssetURL(a)):Bt.inst.playOneShotSound(e.s);break;case 11:t.startValue.f1=0,t.startValue.f2=0,t.startValue.f3=t.value.f2,t.startValue.i=i.timer.currTimer,i.timer.frameLoop(1,t,t.__shake,[this]),this._totalTasks++,t.completed=!1;break;case 12:var o=t.target.filters;o&&o[0]instanceof laya.filters.ColorFilter||(t.filterCreated=!0);var h=new ct;h.adjustBrightness(e.f1),h.adjustContrast(e.f2),h.adjustSaturation(e.f3),h.adjustHue(e.f4),o=[new l(h)],t.target.filters=o}t.target._gearLocked=!1},o.__shakeItem=function(t){var e=Math.ceil(t.value.f1*t.startValue.f3/t.value.f2),n=(2*Math.random()-1)*e,r=(2*Math.random()-1)*e;n=n>0?Math.ceil(n):Math.floor(n),r=r>0?Math.ceil(r):Math.floor(r),t.target._gearLocked=!0,t.target.setXY(t.target.x-t.startValue.f1+n,t.target.y-t.startValue.f2+r),t.target._gearLocked=!1,t.startValue.f1=n,t.startValue.f2=r;var s=i.timer.currTimer;t.startValue.f3-=(s-t.startValue.i)/1e3,t.startValue.i=s,t.startValue.f3<=0&&(t.target._gearLocked=!0,t.target.setXY(t.target.x-t.startValue.f1,t.target.y-t.startValue.f2),t.target._gearLocked=!1,t.completed=!0,this._totalTasks--,i.timer.clear(t,t.__shake),this.checkAllComplete())},o.setup=function(t){this.name=t.getAttribute("name");var e=t.getAttribute("options");e&&(this._options=parseInt(e)),e=t.getAttribute("autoPlay"),e&&(this._autoPlay="true"==e),this._autoPlay&&(e=t.getAttribute("autoPlayRepeat"),e&&(this.autoPlayRepeat=parseInt(e)),e=t.getAttribute("autoPlayDelay"),e&&(this.autoPlayDelay=parseFloat(e)));for(var i=t.childNodes,r=i.length,s=0;r>s;s++){var a=i[s];if("item"==a.nodeName){var o=new n;switch(this._items.push(o),o.time=parseInt(a.getAttribute("time"))/this.FRAME_RATE,o.targetId=a.getAttribute("target"),e=a.getAttribute("type")){case"XY":o.type=0;break;case"Size":o.type=1;break;case"Scale":o.type=2;break;case"Pivot":o.type=3;break;case"Alpha":o.type=4;break;case"Rotation":o.type=5;break;case"Color":o.type=6;break;case"Animation":o.type=7;break;case"Visible":o.type=8;break;case"Sound":o.type=9;break;case"Transition":o.type=10;break;case"Shake":o.type=11;break;case"ColorFilter":o.type=12;break;case"Skew":o.type=13;break;default:o.type=14}if(o.tween="true"==a.getAttribute("tween"),o.label=a.getAttribute("label"),o.tween){o.duration=parseInt(a.getAttribute("duration"))/this.FRAME_RATE,o.time+o.duration>this._maxTime&&(this._maxTime=o.time+o.duration),e=a.getAttribute("ease"),e&&(o.easeType=lt.parseEaseType(e)),e=a.getAttribute("repeat"),e&&(o.repeat=parseInt(e)),o.yoyo="true"==a.getAttribute("yoyo"),o.label2=a.getAttribute("label2");var h=a.getAttribute("endValue");h?(this.decodeValue(o.type,a.getAttribute("startValue"),o.startValue),this.decodeValue(o.type,h,o.endValue)):(o.tween=!1,this.decodeValue(o.type,a.getAttribute("startValue"),o.value))}else o.time>this._maxTime&&(this._maxTime=o.time),this.decodeValue(o.type,a.getAttribute("value"),o.value)}}},o.decodeValue=function(t,e,i){var n;switch(t){case 0:case 1:case 3:case 13:n=e.split(","),"-"==n[0]?i.b1=!1:(i.f1=parseFloat(n[0]),i.b1=!0),"-"==n[1]?i.b2=!1:(i.f2=parseFloat(n[1]),i.b2=!0);break;case 4:i.f1=parseFloat(e);break;case 5:i.i=parseInt(e);break;case 2:n=e.split(","),i.f1=parseFloat(n[0]),i.f2=parseFloat(n[1]);break;case 6:i.s=e;break;case 7:n=e.split(","),"-"==n[0]?i.b1=!1:(i.i=parseInt(n[0]),i.b1=!0),i.b="p"==n[1];break;case 8:i.b="true"==e;break;case 9:if(n=e.split(","),i.s=n[0],n.length>1){var r=parseInt(n[1]);0==r||100==r?i.f1=1:i.f1=r/100}else i.f1=1;break;case 10:n=e.split(","),i.s=n[0],n.length>1?i.i=parseInt(n[1]):i.i=1;break;case 11:n=e.split(","),i.f1=parseFloat(n[0]),i.f2=parseFloat(n[1]);break;case 12:n=e.split(","),i.f1=parseFloat(n[0]),i.f2=parseFloat(n[1]),i.f3=parseFloat(n[2]),
i.f4=parseFloat(n[3])}},s(0,o,"autoPlay",function(){return this._autoPlay},function(t){this._autoPlay!=t&&(this._autoPlay=t,this._autoPlay?this._owner.onStage&&this.play(null,this.autoPlayRepeat,this.autoPlayDelay):this._owner.onStage||this.stop(!1,!0))}),s(0,o,"playing",function(){return this._playing}),t.__init$=function(){e=function(){function t(){}return r(t,""),t.XY=0,t.Size=1,t.Scale=2,t.Pivot=3,t.Alpha=4,t.Rotation=5,t.Color=6,t.Animation=7,t.Visible=8,t.Sound=9,t.Transition=10,t.Shake=11,t.ColorFilter=12,t.Skew=13,t.Unknown=14,t}(),n=function(){function t(){this.time=0,this.targetId=null,this.type=0,this.duration=0,this.value=null,this.startValue=null,this.endValue=null,this.easeType=null,this.repeat=0,this.yoyo=!1,this.tween=!1,this.label=null,this.label2=null,this.hook=null,this.hook2=null,this.tweenTimes=0,this.tweener=null,this.completed=!1,this.target=null,this.filterCreated=!1,this.displayLockToken=0,this.easeType=u.quadOut,this.value=new a,this.startValue=new a,this.endValue=new a}r(t,"");var e=t.prototype;return e.__shake=function(t){t.__shakeItem(this)},t}(),a=function(){function t(){this.f1=0,this.f2=0,this.f3=0,this.f4=NaN,this.i=0,this.b=!1,this.s=null,this.b1=!0,this.b2=!0}return r(t,""),t}()},t}(),rt=function(){function t(t){this._data=null,this._parent=null,this._children=null,this._expanded=!1,this._tree=null,this._cell=null,this._level=0,t&&(this._children=[])}r(t,"fairygui.tree.TreeNode");var e=t.prototype;return e.setCell=function(t){this._cell=t},e.setLevel=function(t){this._level=t},e.addChild=function(t){return this.addChildAt(t,this._children.length),t},e.addChildAt=function(t,e){if(!t)throw new Error("child is null");var i=this._children.length;if(e>=0&&i>=e){if(t._parent==this)this.setChildIndex(t,e);else{t._parent&&t._parent.removeChild(t);var n=this._children.length;e==n?this._children.push(t):this._children.splice(e,0,t),t._parent=this,t._level=this._level+1,t.setTree(this._tree),null!=this._cell&&null!=this._cell.parent&&this._expanded&&this._tree.afterInserted(t)}return t}throw new Error("Invalid child index")},e.removeChild=function(t){var e=this._children.indexOf(t);return-1!=e&&this.removeChildAt(e),t},e.removeChildAt=function(t){if(t>=0&&t<this.numChildren){var e=this._children[t];return this._children.splice(t,1),e._parent=null,null!=this._tree&&(e.setTree(null),this._tree.afterRemoved(e)),e}throw new Error("Invalid child index")},e.removeChildren=function(t,e){void 0===t&&(t=0),void 0===e&&(e=-1),(0>e||e>=this.numChildren)&&(e=this.numChildren-1);for(var i=t;e>=i;++i)this.removeChildAt(t)},e.getChildAt=function(t){if(t>=0&&t<this.numChildren)return this._children[t];throw new Error("Invalid child index")},e.getChildIndex=function(t){return this._children.indexOf(t)},e.getPrevSibling=function(){if(null==this._parent)return null;var t=this._parent._children.indexOf(this);return 0>=t?null:this._parent._children[t-1]},e.getNextSibling=function(){if(null==this._parent)return null;var t=this._parent._children.indexOf(this);return 0>t||t>=this._parent._children.length-1?null:this._parent._children[t+1]},e.setChildIndex=function(t,e){var i=this._children.indexOf(t);if(-1==i)throw new Error("Not a child of this container");var n=this._children.length;0>e?e=0:e>n&&(e=n),i!=e&&(this._children.splice(i,1),this._children.splice(e,0,t),null!=this._cell&&null!=this._cell.parent&&this._expanded&&this._tree.afterMoved(t))},e.swapChildren=function(t,e){var i=this._children.indexOf(t),n=this._children.indexOf(e);if(-1==i||-1==n)throw new Error("Not a child of this container");this.swapChildrenAt(i,n)},e.swapChildrenAt=function(t,e){var i=this._children[t],n=this._children[e];this.setChildIndex(i,e),this.setChildIndex(n,t)},e.setTree=function(t){if(this._tree=t,null!=this._tree&&this._tree.treeNodeWillExpand&&this._expanded&&this._tree.treeNodeWillExpand.runWith(this),null!=this._children)for(var e=this._children.length,i=0;e>i;i++){var n=this._children[i];n._level=this._level+1,n.setTree(t)}},s(0,e,"expanded",function(){return this._expanded},function(t){null!=this._children&&this._expanded!=t&&(this._expanded=t,null!=this._tree&&(this._expanded?this._tree.afterExpanded(this):this._tree.afterCollapsed(this)))}),s(0,e,"tree",function(){return this._tree}),s(0,e,"level",function(){return this._level}),s(0,e,"cell",function(){return this._cell}),s(0,e,"data",function(){return this._data},function(t){this._data=t}),s(0,e,"parent",function(){return this._parent}),s(0,e,"isFolder",function(){return null!=this._children}),s(0,e,"text",function(){return null!=this._cell?this._cell.text:null}),s(0,e,"numChildren",function(){return this._children.length}),t}(),st=(function(){function t(t){this._list=null,this._root=null,this._indent=0,this.treeNodeCreateCell=null,this.treeNodeRender=null,this.treeNodeWillExpand=null,this.treeNodeClick=null,this._list=t,this._list.removeChildrenToPool(),this._list.on("fui_click_item",this,this.__clickItem),this._root=new rt(!0),this._root.setTree(this),this._root.setCell(this._list),this._root.expanded=!0,this._indent=15}r(t,"fairygui.tree.TreeView");var e=t.prototype;return e.getSelectedNode=function(){return-1!=this._list.selectedIndex?this._list.getChildAt(this._list.selectedIndex).data:null},e.getSelection=function(){for(var t=this._list.getSelection(),e=t.length,i=[],n=0;e>n;n++){var r=this._list.getChildAt(t[n]).data;i.push(r)}return i},e.addSelection=function(t,e){void 0===e&&(e=!1);for(var i=t.parent;null!=i&&i!=this._root;)i.expanded=!0,i=i.parent;t.cell&&this._list.addSelection(this._list.getChildIndex(t.cell),e)},e.removeSelection=function(t){t.cell&&this._list.removeSelection(this._list.getChildIndex(t.cell))},e.clearSelection=function(){this._list.clearSelection()},e.getNodeIndex=function(t){return this._list.getChildIndex(t.cell)},e.updateNode=function(t){null!=t.cell&&this.treeNodeRender&&this.treeNodeRender.runWith(t)},e.updateNodes=function(t){for(var e=t.length,i=0;e>i;i++){var n=t[i];if(null==n.cell)return;this.treeNodeRender&&this.treeNodeRender.runWith(n)}},e.expandAll=function(t){t.expanded=!0;for(var e=t.numChildren,i=0;e>i;i++){var n=t.getChildAt(i);n.isFolder&&this.expandAll(n)}},e.collapseAll=function(t){t!=this._root&&(t.expanded=!1);for(var e=t.numChildren,i=0;e>i;i++){var n=t.getChildAt(i);n.isFolder&&this.collapseAll(n)}},e.createCell=function(t){this.treeNodeCreateCell?t.setCell(this.treeNodeCreateCell.runWith(t)):t.setCell(this._list.itemPool.getObject(this._list.defaultItem)),t.cell.data=t;var e=t.cell.getChild("indent");null!=e&&(e.width=(t.level-1)*this._indent);var i=t.cell.getChild("expandButton");i&&(t.isFolder?(i.visible=!0,i.onClick(this,this.__clickExpandButton),i.data=t,i.selected=t.expanded):i.visible=!1),this.treeNodeRender&&this.treeNodeRender.runWith(t)},e.afterInserted=function(t){this.createCell(t);var e=this.getInsertIndexForNode(t);this._list.addChildAt(t.cell,e),this.treeNodeRender&&this.treeNodeRender.runWith(t),t.isFolder&&t.expanded&&this.checkChildren(t,e)},e.getInsertIndexForNode=function(t){var e=t.getPrevSibling();null==e&&(e=t.parent);for(var i=this._list.getChildIndex(e.cell)+1,n=t.level,r=this._list.numChildren,s=i;r>s;s++){var a=this._list.getChildAt(s).data;if(a.level<=n)break;i++}return i},e.afterRemoved=function(t){this.removeNode(t)},e.afterExpanded=function(t){if(t!=this._root&&this.treeNodeWillExpand&&this.treeNodeWillExpand(t),null!=t.cell){if(t!=this._root){this.treeNodeRender&&this.treeNodeRender.runWith(t);var e=t.cell.getChild("expandButton");e&&(e.selected=!0)}null!=t.cell.parent&&this.checkChildren(t,this._list.getChildIndex(t.cell))}},e.afterCollapsed=function(t){if(t!=this._root&&this.treeNodeWillExpand&&this.treeNodeWillExpand(t),null!=t.cell){if(t!=this._root){this.treeNodeRender&&this.treeNodeRender.runWith(t);var e=t.cell.getChild("expandButton");e&&(e.selected=!1)}null!=t.cell.parent&&this.hideFolderNode(t)}},e.afterMoved=function(t){t.isFolder?this.hideFolderNode(t):this._list.removeChild(t.cell);var e=this.getInsertIndexForNode(t);this._list.addChildAt(t.cell,e),t.isFolder&&t.expanded&&this.checkChildren(t,e)},e.checkChildren=function(t,e){for(var i=t.numChildren,n=0;i>n;n++){e++;var r=t.getChildAt(n);null==r.cell&&this.createCell(r),r.cell.parent||this._list.addChildAt(r.cell,e),r.isFolder&&r.expanded&&(e=this.checkChildren(r,e))}return e},e.hideFolderNode=function(t){for(var e=t.numChildren,i=0;e>i;i++){var n=t.getChildAt(i);n.cell&&null!=n.cell.parent&&this._list.removeChild(n.cell),n.isFolder&&n.expanded&&this.hideFolderNode(n)}},e.removeNode=function(t){if(null!=t.cell&&(null!=t.cell.parent&&this._list.removeChild(t.cell),this._list.returnToPool(t.cell),t.cell.data=null,t.setCell(null)),t.isFolder)for(var e=t.numChildren,i=0;e>i;i++){var n=t.getChildAt(i);this.removeNode(n)}},e.__clickExpandButton=function(t){t.stopPropagation();var e=k.cast(t.currentTarget),i=e.parent.data;if(null!=this._list.scrollPane){var n=this._list.scrollPane.posY;e.selected?i.expanded=!0:i.expanded=!1,this._list.scrollPane.posY=n,this._list.scrollPane.scrollToView(i.cell)}else e.selected?i.expanded=!0:i.expanded=!1},e.__clickItem=function(t,e){if(null!=this._list.scrollPane)var i=this._list.scrollPane.posY;var n=t.data;this.treeNodeClick&&this.treeNodeClick.runWith([n,e]),null!=this._list.scrollPane&&(this._list.scrollPane.posY=i,n.cell&&this._list.scrollPane.scrollToView(n.cell))},s(0,e,"list",function(){return this._list}),s(0,e,"root",function(){return this._root}),s(0,e,"indent",function(){return this._indent},function(t){this._indent=t}),t}(),function(){function t(){}return r(t,"fairygui.UIConfig",null,"UIConfig1"),t.defaultFont="宋体",t.windowModalWaiting=null,t.globalModalWaiting=null,t.modalLayerColor="rgba(33,33,33,0.2)",t.buttonSound=null,t.buttonSoundVolumeScale=1,t.horizontalScrollBar=null,t.verticalScrollBar=null,t.defaultScrollSpeed=25,t.defaultTouchScrollSpeedRatio=1,t.defaultScrollTouchEffect=!0,t.defaultScrollBounceEffect=!0,t.popupMenu=null,t.popupMenu_seperator=null,t.loaderErrorSign=null,t.tooltipsWin=null,t.defaultComboBoxVisibleItemCount=10,t.touchScrollSensitivity=20,t.touchDragSensitivity=10,t.clickDragSensitivity=2,t.bringWindowToFrontOnClick=!0,t.frameTimeForAsyncUIConstruction=2,n(t,["defaultScrollBarDisplay",function(){return this.defaultScrollBarDisplay=1}]),t}()),at=function(){function t(){}return r(t,"fairygui.UIObjectFactory"),t.setPackageItemExtension=function(e,i){if(null==e)throw new Error("Invaild url: "+e);var n=ot.getItemByURL(e);null!=n&&(n.extensionType=i),t.packageItemExtensions[e]=i},t.setLoaderExtension=function(t){fairygui.UIObjectFactory.loaderType=t},t.resolvePackageItemExtension=function(e){e.extensionType=t.packageItemExtensions["ui://"+e.owner.id+e.id],e.extensionType||(e.extensionType=t.packageItemExtensions["ui://"+e.owner.name+"/"+e.name])},t.newObject=function(t){switch(t.type){case 0:return new Et;case 2:return new Dt;case 4:var e=t.extensionType;if(e)return new e;var i=t.owner.getItemAsset(t),n=i.getAttribute("extention");if(null==n)return new gt;switch(n){case"Button":return new Pt;case"Label":return new Ot;case"ProgressBar":return new Vt;case"Slider":return new Ht;case"ScrollBar":return new Ut;case"ComboBox":return new Lt;default:return new gt}}return null},t.newObject2=function(t){switch(t){case"image":return new Et;case"movieclip":return new Dt;case"component":return new gt;case"text":return new Rt;case"richtext":return new Ft;case"inputtext":return new kt;case"group":return new Ct;case"list":return new Nt;case"graph":return new St;case"loader":return null!=fairygui.UIObjectFactory.loaderType?new fairygui.UIObjectFactory.loaderType:new At}return null},t.packageItemExtensions={},t.loaderType=null,t}(),ot=function(){function t(){this._id=null,this._name=null,this._basePath=null,this._items=null,this._itemsById=null,this._itemsByName=null,this._resKey=null,this._resData=null,this._customId=null,this._sprites=null,this._hitTestDatas=null,this._items=[],this._sprites={},this._hitTestDatas={}}var e;r(t,"fairygui.UIPackage");var i=t.prototype;return i.create=function(t){this._resKey=t,this.loadPackage()},i.loadPackage=function(){var t,i;this.decompressPackage(I.inst.getRes(this._resKey+".fui")),t=this.getDesc("sprites.bytes"),i=t.split("\n");for(var n=i.length,r=1;n>r;r++)if(t=i[r]){var s=t.split(" "),a=new e,o=s[0],h=parseInt(s[1]);if(h>=0)a.atlas="atlas"+h;else{var l=o.indexOf("_");-1==l?a.atlas="atlas_"+o:a.atlas="atlas_"+o.substr(0,l)}a.rect.x=parseInt(s[2]),a.rect.y=parseInt(s[3]),a.rect.width=parseInt(s[4]),a.rect.height=parseInt(s[5]),a.rotated="1"==s[6],this._sprites[o]=a}if(t=this.getDesc("hittest.bytes"),null!=t){var u=lt.base64Decode(t);for(u.endian="bigEndian";u.bytesAvailable;){var c=new ht;this._hitTestDatas[u.readUTFString()]=c,c.load(u)}}t=this.getDesc("package.xml");var _=E.parseXMLFromString(t),d=_.firstChild;this._id=d.getAttribute("id"),this._name=d.getAttribute("name");var f=lt.findChildNode(d,"resources").childNodes;this._itemsById={},this._itemsByName={};for(var p,m,g=f.length,y=0;g>y;y++)if(m=f[y],1==m.nodeType){switch(p=new q,p.owner=this,p.type=$.parse(m.nodeName),p.id=m.getAttribute("id"),p.name=m.getAttribute("name"),p.file=m.getAttribute("file"),t=m.getAttribute("size"),t&&(i=t.split(","),p.width=parseInt(i[0]),p.height=parseInt(i[1])),p.type){case 0:t=m.getAttribute("scale"),"9grid"==t?(p.scale9Grid=new laya.maths.Rectangle,t=m.getAttribute("scale9grid"),t&&(i=t.split(","),p.scale9Grid.x=parseInt(i[0]),p.scale9Grid.y=parseInt(i[1]),p.scale9Grid.width=parseInt(i[2]),p.scale9Grid.height=parseInt(i[3]),t=m.getAttribute("gridTile"),t&&(p.tileGridIndice=parseInt(t)))):"tile"==t&&(p.scaleByTile=!0),t=m.getAttribute("smoothing"),p.smoothing="false"!=t;break;case 4:at.resolvePackageItemExtension(p)}this._items.push(p),this._itemsById[p.id]=p,null!=p.name&&(this._itemsByName[p.name]=p)}for(n=this._items.length,r=0;n>r;r++)p=this._items[r],6==p.type&&(this.loadFont(p),fairygui.UIPackage._bitmapFonts[p.bitmapFont.id]=p.bitmapFont)},i.decompressPackage=function(t){this._resData={};var e,i=new Zlib.RawInflate(t);e=i.decompress();for(var n,r=new h(e).readUTFBytes(),s=0,a=NaN;;){var o=r.indexOf("|",s);if(-1==o)break;n=r.substring(s,o),s=o+1,o=r.indexOf("|",s),a=parseInt(r.substring(s,o)),s=o+1,this._resData[n]=r.substr(s,a),s+=a}},i.dispose=function(){for(var t=this._items.length,e=0;t>e;e++){var i=this._items[e];null!=i.bitmapFont&&delete fairygui.UIPackage._bitmapFonts[i.bitmapFont.id]}},i.createObject=function(t,e){var i=this._itemsByName[t];return i?this.internalCreateObject(i,e):null},i.internalCreateObject=function(t,e){var i;return i=4==t.type&&null!=e?new e:at.newObject(t),null==i?null:(fairygui.UIPackage._constructing++,i.packageItem=t,i.constructFromResource(),fairygui.UIPackage._constructing--,i)},i.getItemById=function(t){return this._itemsById[t]},i.getItemByName=function(t){return this._itemsByName[t]},i.getItemAssetByName=function(t){var e=this._itemsByName[t];if(null==e)throw"Resource not found -"+t;return this.getItemAsset(e)},i.getItemAssetURL=function(t){return this._resKey+"@"+t.file},i.getItemAsset=function(t){switch(t.type){case 0:if(!t.decoded){t.decoded=!0;var e=this._sprites[t.id];null!=e&&(t.texture=this.createSpriteTexture(e))}return t.texture;case 7:if(!t.decoded){t.decoded=!0;var i=null!=t.file&&t.file.length>0?t.file:t.id+".png";t.texture=I.inst.getRes(this._resKey+"@"+i)}return t.texture;case 3:return t.decoded||(t.decoded=!0,t.sound=I.inst.getRes(this._resKey+"@"+t.file)),t.sound;case 6:return t.decoded||(t.decoded=!0,this.loadFont(t)),t.bitmapFont;case 2:return t.decoded||(t.decoded=!0,this.loadMovieClip(t)),t.frames;case 4:if(!t.decoded){t.decoded=!0;var n=this.getDesc(t.id+".xml"),r=E.parseXMLFromString(n);t.componentData=r.firstChild,this.loadComponentChildren(t),this.translateComponent(t)}return t.componentData;default:return I.inst.getRes(this._resKey+"@"+t.id)}},i.getDesc=function(t){return this._resData[t]},i.getPixelHitTestData=function(t){return this._hitTestDatas[t]},i.loadComponentChildren=function(t){var e=lt.findChildNode(t.componentData,"displayList");if(null!=e){var i=e.childNodes,n=i.length;t.displayList=a(n);for(var r,s=0;n>s;s++){var o=i[s],h=o.nodeName,l=o.getAttribute("src");if(l){var u,c=o.getAttribute("pkg");u=c&&c!=t.owner.id?fairygui.UIPackage.getById(c):t.owner;var _=null!=u?u.getItemById(l):null;r=null!=_?new F(_,null):new F(null,h)}else r="text"==h&&"true"==o.getAttribute("input")?new F(null,"inputtext"):new F(null,h);r.desc=o,t.displayList[s]=r}}else t.displayList=a(0,null)},i.translateComponent=function(t){if(null!=fairygui.UIPackage._stringsSource){var e=fairygui.UIPackage._stringsSource[this.id+t.id];if(null!=e){var i,n,r,s,a,o,h,l,u=t.displayList.length,c=NaN,_=NaN,d=NaN,f=NaN;for(_=0;u>_;_++)if(n=t.displayList[_].desc,a=n.nodeName,o=n.getAttribute("id"),l=n.getAttribute("tooltips"),l&&(i=e[o+"-tips"],void 0!=i&&n.setAttribute("tooltips",i)),r=lt.findChildNode(n,"gearText"),r&&(i=e[o+"-texts"],void 0!=i&&r.setAttribute("values",i),i=e[o+"-texts_def"],void 0!=i&&r.setAttribute("default",i)),"text"==a||"richtext"==a)i=e[o],void 0!=i&&n.setAttribute("text",i),i=e[o+"-prompt"],void 0!=i&&n.setAttribute("prompt",i);else if("list"==a)for(h=n.childNodes,c=h.length,f=0,d=0;c>d;d++)s=h[d],"item"==s.nodeName&&(i=e[o+"-"+f],void 0!=i&&s.setAttribute("title",i),f++);else if("component"==a){if(r=lt.findChildNode(n,"Button")){i=e[o],void 0!=i&&r.setAttribute("title",i),i=e[o+"-0"],void 0!=i&&r.setAttribute("selectedTitle",i);continue}if(r=lt.findChildNode(n,"Label")){i=e[o],void 0!=i&&r.setAttribute("title",i),i=e[o+"-prompt"],void 0!=i&&r.setAttribute("prompt",i);continue}if(r=lt.findChildNode(n,"ComboBox")){for(i=e[o],void 0!=i&&r.setAttribute("title",i),h=r.childNodes,c=h.length,f=0,d=0;c>d;d++)s=h[d],"item"==s.nodeName&&(i=e[o+"-"+f],void 0!=i&&s.setAttribute("title",i),f++);continue}}}}},i.createSpriteTexture=function(t){var e=this._itemsById[t.atlas];if(null!=e){var i=this.getItemAsset(e);return null==i?null:this.createSubTexture(i,t.rect)}return null},i.createSubTexture=function(t,e){var i=C.createFromTexture(t,e.x,e.y,e.width,e.height);return i},i.loadMovieClip=function(t){var e,i,n=E.parseXMLFromString(this.getDesc(t.id+".xml")).firstChild;e=n.getAttribute("interval"),e&&(t.interval=parseInt(e)),e=n.getAttribute("swing"),e&&(t.swing="true"==e),e=n.getAttribute("repeatDelay"),e&&(t.repeatDelay=parseInt(e));parseInt(n.getAttribute("frameCount"));t.frames=[];for(var r=lt.findChildNode(n,"frames").childNodes,s=0,a=r.length,o=0;a>o;o++){var h=r[o];if("frame"==h.nodeName){var l=new O;if(e=h.getAttribute("rect"),i=e.split(","),l.rect=new v(parseInt(i[0]),parseInt(i[1]),parseInt(i[2]),parseInt(i[3])),e=h.getAttribute("addDelay"),e&&(l.addDelay=parseInt(e)),t.frames[s]=l,0!=l.rect.width){e=h.getAttribute("sprite"),e=e?t.id+"_"+e:t.id+"_"+s;var u=this._sprites[e];null!=u&&(l.texture=this.createSpriteTexture(u)),s++}}}},i.loadFont=function(t){var e=new P;e.id="ui://"+this.id+t.id;var i,n,r=this.getDesc(t.id+".fnt"),s=r.split("\n"),a=s.length,o=0,h={},l=!1,u=0,c=0,_=!1,d=0,f=0,p=0;for(o=0;a>o;o++)if(r=s[o],0!=r.length){r=lt.trim(r);for(var m=r.split(" "),g=1;g<m.length;g++){var y=m[g].split("=");h[y[0]]=y[1]}if(r=m[0],"char"==r){var x=new L;x.x=isNaN(h.x)?0:parseInt(h.x),x.y=isNaN(h.y)?0:parseInt(h.y),x.offsetX=isNaN(h.xoffset)?0:parseInt(h.xoffset),x.offsetY=isNaN(h.yoffset)?0:parseInt(h.yoffset),x.width=isNaN(h.width)?0:parseInt(h.width),x.height=isNaN(h.height)?0:parseInt(h.height),x.advance=isNaN(h.xadvance)?0:parseInt(h.xadvance),void 0!=h.chnl&&(x.channel=parseInt(h.chnl),15==x.channel?x.channel=4:1==x.channel?x.channel=3:2==x.channel?x.channel=2:x.channel=1),l?null!=n&&(x.texture=this.createSubTexture(n,new v(x.x+d,x.y+f,x.width,x.height))):h.img&&(i=this._itemsById[h.img],null!=i&&(i.load(),x.width=i.width,x.height=i.height,x.texture=i.texture)),l?x.lineHeight=p:(0==x.advance&&(0==c?x.advance=x.offsetX+x.width:x.advance=c),x.lineHeight=x.offsetY<0?x.height:x.offsetY+x.height,u>0&&x.lineHeight<u&&(x.lineHeight=u)),e.glyphs[String.fromCharCode(h.id)]=x}else if("info"==r){if(l=null!=h.face,isNaN(h.size)||(u=parseInt(h.size)),_="true"==h.resizable,l){var b=this._sprites[t.id];if(null!=b){d=b.rect.x,f=b.rect.y;var w=this._itemsById[b.atlas];null!=w&&(n=this.getItemAsset(w))}}}else"common"==r&&(isNaN(h.lineHeight)||(p=parseInt(h.lineHeight)),0==u?u=p:0==p&&(p=u),isNaN(h.xadvance)||(c=parseInt(h.xadvance)))}0==u&&x&&(u=x.height),e.ttf=l,e.size=u,e.resizable=_,t.bitmapFont=e},s(0,i,"id",function(){return this._id}),s(0,i,"name",function(){return this._name}),s(0,i,"customId",function(){return this._customId},function(t){null!=this._customId&&delete fairygui.UIPackage._packageInstById[this._customId],this._customId=t,null!=this._customId&&(fairygui.UIPackage._packageInstById[this._customId]=this)}),t.getById=function(t){return fairygui.UIPackage._packageInstById[t]},t.getByName=function(t){return fairygui.UIPackage._packageInstByName[t]},t.addPackage=function(e){var i=new t;return i.create(e),fairygui.UIPackage._packageInstById[i.id]=i,fairygui.UIPackage._packageInstByName[i.name]=i,i.customId=e,i},t.removePackage=function(t){var e=fairygui.UIPackage._packageInstById[t];e.dispose(),delete fairygui.UIPackage._packageInstById[e.id],null!=e._customId&&delete fairygui.UIPackage._packageInstById[e._customId],delete fairygui.UIPackage._packageInstByName[e.name]},t.createObject=function(t,e,i){var n=fairygui.UIPackage.getByName(t);return n?n.createObject(e,i):null},t.createObjectFromURL=function(t,e){var i=fairygui.UIPackage.getItemByURL(t);return i?i.owner.internalCreateObject(i,e):null},t.getItemURL=function(t,e){var i=fairygui.UIPackage.getByName(t);if(!i)return null;var n=i._itemsByName[e];return n?"ui://"+i.id+n.id:null},t.getItemByURL=function(e){var i=e.indexOf("//");if(-1==i)return null;var n=e.indexOf("/",i+2);if(-1==n){if(e.length>13){var r=e.substr(5,8),s=t.getById(r);if(null!=s){var a=e.substr(13);return s.getItemById(a)}}}else{var o=e.substr(i+2,n-i-2);if(s=t.getByName(o),null!=s){var h=e.substr(n+1);return s.getItemByName(h)}}return null},t.normalizeURL=function(e){if(null==e)return null;var i=e.indexOf("//");if(-1==i)return null;var n=e.indexOf("/",i+2);if(-1==n)return e;var r=e.substr(i+2,n-i-2),s=e.substr(n+1);return t.getItemURL(r,s)},t.getBitmapFontByURL=function(t){return fairygui.UIPackage._bitmapFonts[t]},t.setStringsSource=function(t){fairygui.UIPackage._stringsSource={};for(var e=E.parseXMLFromString(t),i=lt.findChildNode(e,"resources"),n=i.childNodes,r=n.length,s=0;r>s;s++){var a=n[s];if("string"==a.nodeName){var o=a.getAttribute("name"),h=a.textContent,l=o.indexOf("-");if(-1==l)continue;var u=o.substr(0,l),c=o.substr(l+1),_=fairygui.UIPackage._stringsSource[u];_||(_={},fairygui.UIPackage._stringsSource[u]=_),_[c]=h}}},t._constructing=0,t._packageInstById={},t._packageInstByName={},t._bitmapFonts={},t._stringsSource=null,t.sep0=",",t.sep1="\n",t.sep2=" ",t.sep3="=",t.__init$=function(){e=function(){function t(){this.atlas=null,this.rect=null,this.rotated=!1,this.rect=new v}return r(t,""),t}()},t}(),ht=function(){function t(){this.pixelWidth=0,this.scale=NaN,this.pixels=null}r(t,"fairygui.utils.PixelHitTestData");var e=t.prototype;return e.load=function(t){t.getInt32(),this.pixelWidth=t.getInt32(),this.scale=1/t.readByte();var e=t.getInt32();this.pixels=a(e);for(var i=0;e>i;i++){var n=t.readByte();0>n&&(n+=256),this.pixels[i]=n}},t}(),lt=function(){function t(){}return r(t,"fairygui.utils.ToolSet"),t.getFileName=function(t){var e=t.lastIndexOf("/");return-1!=e&&(t=t.substr(e+1)),e=t.lastIndexOf("\\"),-1!=e&&(t=t.substr(e+1)),e=t.lastIndexOf("."),-1!=e?t.substring(0,e):t},t.startsWith=function(t,e,i){return void 0===i&&(i=!1),t?t.length<e.length?!1:(t=t.substring(0,e.length),i?t.toLowerCase()==e.toLowerCase():t==e):!1},t.endsWith=function(t,e,i){return void 0===i&&(i=!1),t?t.length<e.length?!1:(t=t.substring(t.length-e.length),i?t.toLowerCase()==e.toLowerCase():t==e):!1},t.trim=function(t){return fairygui.utils.ToolSet.trimLeft(fairygui.utils.ToolSet.trimRight(t))},t.trimLeft=function(t){for(var e="",i=0;i<t.length&&(e=t.charAt(i)," "==e||"\n"==e||"\r"==e);i++);return t.substr(i)},t.trimRight=function(t){for(var e="",i=t.length-1;i>=0&&(e=t.charAt(i)," "==e||"\n"==e||"\r"==e);i--);return t.substring(0,i+1)},t.convertToHtmlColor=function(t,e){void 0===e&&(e=!1);var i;i=e?(t>>24&255).toString(16):"";var n=(t>>16&255).toString(16),r=(t>>8&255).toString(16),s=(255&t).toString(16);return 1==i.length&&(i="0"+i),1==n.length&&(n="0"+n),1==r.length&&(r="0"+r),1==s.length&&(s="0"+s),"#"+i+n+r+s},t.convertFromHtmlColor=function(t,e){return void 0===e&&(e=!1),t.length<1?0:("#"==t.charAt(0)&&(t=t.substr(1)),8==t.length?(parseInt(t.substr(0,2),16)<<24)+parseInt(t.substr(2),16):e?4278190080+parseInt(t,16):parseInt(t,16))},t.displayObjectToGObject=function(t){for(;null!=t&&!(t instanceof laya.display.Stage);){if(t.$owner)return t.$owner;t=t.parent}return null},t.findChildNode=function(t,e){var i=t.childNodes,n=i.length;if(n>0)for(var r=0;n>r;r++){var s=i[r];if(s.nodeName==e)return s}return null},t.encodeHTML=function(t){return t?t.replace("&","&amp;").replace("<","&lt;").replace(">","&gt;").replace("'","&apos;"):""},t.parseUBB=function(t){return fairygui.utils.ToolSet.defaultUBBParser.parse(t)},t.removeUBB=function(t){return fairygui.utils.ToolSet.defaultUBBParser.parse(t,!0)},t.parseEaseType=function(e){var i=t.EaseMap[e];return i||(i=u.quartOut),i},t.clamp=function(t,e,i){return e>t?t=e:t>i&&(t=i),t},t.clamp01=function(t){return t>1?t=1:0>t&&(t=0),t},t.base64Decode=function(e){for(var i=new h,n=0,r=e.length,s=0;r>s;s+=4)n=(63&t.BASE64_CHARS.indexOf(e.charAt(s)))<<18,n+=(63&t.BASE64_CHARS.indexOf(e.charAt(s+1)))<<12,n+=(63&t.BASE64_CHARS.indexOf(e.charAt(s+2)))<<6,n+=63&t.BASE64_CHARS.indexOf(e.charAt(s+3)),i.writeByte(n>>16&255),i.writeByte(n>>8&255),i.writeByte(255&n);return 0==(63&n)&&(i.length-=1),0==(n>>8&63)&&(i.length-=1),i.pos=0,i},t.BASE64_CHARS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n(t,["defaultUBBParser",function(){return this.defaultUBBParser=new ut},"EaseMap",function(){return this.EaseMap={Linear:u.linearNone,"Elastic.In":u.elasticIn,"Elastic.Out":u.elasticOut,"Elastic.InOut":u.elasticInOut,"Quad.In":u.quadIn,"Quad.Out":u.quadOut,"Quad.InOut":u.quadInOut,"Cube.In":u.cubicIn,"Cube.Out":u.cubicOut,"Cube.InOut":u.cubicInOut,"Quart.In":u.quartIn,"Quart.Out":u.quartOut,"Quart.InOut":u.quartInOut,"Quint.In":u.quintIn,"Quint.Out":u.quintOut,"Quint.InOut":u.quintInOut,"Sine.In":u.sineIn,"Sine.Out":u.sineOut,"Sine.InOut":u.sineInOut,"Bounce.In":u.bounceIn,"Bounce.Out":u.bounceOut,"Bounce.InOut":u.bounceInOut,"Circ.In":u.circIn,"Circ.Out":u.circOut,"Circ.InOut":u.circInOut,"Expo.In":u.quartIn,"Expo.Out":u.quartOut,"Expo.InOut":u.quartInOut,"Back.In":u.backIn,"Back.Out":u.backOut,"Back.InOut":u.backInOut}}]),t}(),ut=function(){function t(){this._text=null,this._readPos=0,this._handlers=null,this.smallFontSize=12,this.normalFontSize=14,this.largeFontSize=16,this.defaultImgWidth=0,this.defaultImgHeight=0,this._handlers={},this._handlers.url=this.onTag_URL,this._handlers.img=this.onTag_IMG,this._handlers.b=this.onTag_Simple,this._handlers.i=this.onTag_Simple,this._handlers.u=this.onTag_Simple,this._handlers.sup=this.onTag_Simple,this._handlers.sub=this.onTag_Simple,this._handlers.color=this.onTag_COLOR,this._handlers.font=this.onTag_FONT,this._handlers.size=this.onTag_SIZE}r(t,"fairygui.utils.UBBParser");var e=t.prototype;return e.onTag_URL=function(t,e,i){if(e)return"</a>";if(null!=i)return'<a href="'+i+'" target="_blank">';var n=this.getTagText();return'<a href="'+n+'" target="_blank">'},e.onTag_IMG=function(t,e,i){if(e)return null;var n=this.getTagText(!0);return n?this.defaultImgWidth?'<img src="'+n+'" width="'+this.defaultImgWidth+'" height="'+this.defaultImgHeight+'"/>':'<img src="'+n+'"/>':null},e.onTag_Simple=function(t,e,i){return e?"</"+t+">":"<"+t+">"},e.onTag_COLOR=function(t,e,i){return e?"</font>":'<font color="'+i+'">'},e.onTag_FONT=function(t,e,i){return e?"</font>":'<font face="'+i+'">'},e.onTag_SIZE=function(t,e,i){return e?"</font>":("normal"==i?i=""+this.normalFontSize:"small"==i?i=""+this.smallFontSize:"large"==i?i=""+this.largeFontSize:i.length&&"+"==i.charAt(0)?i=""+(this.smallFontSize+parseInt(i.substr(1))):i.length&&"-"==i.charAt(0)&&(i=""+(this.smallFontSize-parseInt(i.substr(1)))),'<font size="'+i+'">')},e.getTagText=function(t){void 0===t&&(t=!1);var e=this._text.indexOf("[",this._readPos);if(-1==e)return null;var i=this._text.substring(this._readPos,e);return t&&(this._readPos=e),i},e.parse=function(t,e){void 0===e&&(e=!1),this._text=t;for(var i,n,r,s,a=0,o=NaN,h=0,l=!1;-1!=(o=this._text.indexOf("[",a))&&(a=o,o=this._text.indexOf("]",a),-1!=o);)l="/"==this._text.charAt(a+1),i=this._text.substring(l?a+2:a+1,o),o++,this._readPos=o,n=null,r=null,h=i.indexOf("="),-1!=h&&(n=i.substring(h+1),i=i.substring(0,h)),i=i.toLowerCase(),s=this._handlers[i],null!=s?(e?r="":(r=s.call(this,i,l,n),null==r&&(r="")),this._text=this._text.substring(0,a)+r+this._text.substring(this._readPos)):a=o;return this._text},n(t,["inst",function(){return this.inst=new t}]),t}(),ct=function(t){function e(){e.__super.call(this),this.reset()}r(e,"fairygui.utils.ColorMatrix",Array);var i=e.prototype;return i.reset=function(){for(var t=0;t<e.LENGTH;t++)this[t]=e.IDENTITY_MATRIX[t]},i.invert=function(){this.multiplyMatrix([-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0])},i.adjustColor=function(t,e,i,n){this.adjustHue(n),this.adjustContrast(e),this.adjustBrightness(t),this.adjustSaturation(i)},i.adjustBrightness=function(t){t=255*this.cleanValue(t,1),this.multiplyMatrix([1,0,0,0,t,0,1,0,0,t,0,0,1,0,t,0,0,0,1,0])},i.adjustContrast=function(t){t=this.cleanValue(t,1);var e=t+1,i=128*(1-e);this.multiplyMatrix([e,0,0,0,i,0,e,0,0,i,0,0,e,0,i,0,0,0,1,0])},i.adjustSaturation=function(t){t=this.cleanValue(t,1),t+=1;var e=1-t,i=.299*e,n=.587*e,r=.114*e;this.multiplyMatrix([i+t,n,r,0,0,i,n+t,r,0,0,i,n,r+t,0,0,0,0,0,1,0])},i.adjustHue=function(t){t=this.cleanValue(t,1),t*=Math.PI;var e=Math.cos(t),i=Math.sin(t);this.multiplyMatrix([.299+e*(1-.299)+i*-.299,.587+e*-.587+i*-.587,.114+e*-.114+.886*i,0,0,.299+e*-.299+.143*i,.587+e*(1-.587)+.14*i,.114+e*-.114+i*-.283,0,0,.299+e*-.299+i*-(1-.299),.587+e*-.587+.587*i,.114+.886*e+.114*i,0,0,0,0,0,1,0])},i.concat=function(t){t.length==e.LENGTH&&this.multiplyMatrix(t)},i.clone=function(){var t=new e;return t.copyMatrix(this),t},i.copyMatrix=function(t){for(var i=e.LENGTH,n=0;i>n;n++)this[n]=t[n]},i.multiplyMatrix=function(t){for(var e=[],i=0,n=0;4>n;++n){for(var r=0;5>r;++r)e[i+r]=t[i]*this[r]+t[i+1]*this[r+5]+t[i+2]*this[r+10]+t[i+3]*this[r+15]+(4==r?t[i+4]:0);i+=5}this.copyMatrix(e)},i.cleanValue=function(t,e){return Math.min(e,Math.max(-e,t))},e.create=function(t,i,n,r){var s=new e;return s.adjustColor(t,i,n,r),s},e.LUMA_R=.299,e.LUMA_G=.587,e.LUMA_B=.114,n(e,["IDENTITY_MATRIX",function(){return this.IDENTITY_MATRIX=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]},"LENGTH",function(){return this.LENGTH=e.IDENTITY_MATRIX.length}]),e}(Array),_t=function(t){function e(){this._name=null,this._selectedIndex=0,this._previousIndex=0,this._pageIds=null,this._pageNames=null,this._actions=null,this._parent=null,this._autoRadioGroupDepth=!1,this.changing=!1,e.__super.call(this),this._pageIds=[],this._pageNames=[],this._selectedIndex=-1,this._previousIndex=-1}r(e,"fairygui.Controller",t);var i=e.prototype;return i.setSelectedIndex=function(t){if(void 0===t&&(t=0),this._selectedIndex!=t){if(t>this._pageIds.length-1)throw"index out of bounds: "+t;this.changing=!0,this._previousIndex=this._selectedIndex,this._selectedIndex=t,this._parent.applyController(this),this.changing=!1}},i.setSelectedPage=function(t){var e=this._pageNames.indexOf(t);-1==e&&(e=0),this.setSelectedIndex(e)},i.getPageName=function(t){return void 0===t&&(t=0),this._pageNames[t]},i.addPage=function(t){void 0===t&&(t=""),this.addPageAt(t,this._pageIds.length)},
i.addPageAt=function(t,e){void 0===e&&(e=0);var i=""+fairygui.Controller._nextPageId++;e==this._pageIds.length?(this._pageIds.push(i),this._pageNames.push(t)):(this._pageIds.splice(e,0,i),this._pageNames.splice(e,0,t))},i.removePage=function(t){var e=this._pageNames.indexOf(t);-1!=e&&(this._pageIds.splice(e,1),this._pageNames.splice(e,1),this._selectedIndex>=this._pageIds.length?this.selectedIndex=this._selectedIndex-1:this._parent.applyController(this))},i.removePageAt=function(t){void 0===t&&(t=0),this._pageIds.splice(t,1),this._pageNames.splice(t,1),this._selectedIndex>=this._pageIds.length?this.selectedIndex=this._selectedIndex-1:this._parent.applyController(this)},i.clearPages=function(){this._pageIds.length=0,this._pageNames.length=0,-1!=this._selectedIndex?this.selectedIndex=-1:this._parent.applyController(this)},i.hasPage=function(t){return-1!=this._pageNames.indexOf(t)},i.getPageIndexById=function(t){return this._pageIds.indexOf(t)},i.getPageIdByName=function(t){var e=this._pageNames.indexOf(t);return-1!=e?this._pageIds[e]:null},i.getPageNameById=function(t){var e=this._pageIds.indexOf(t);return-1!=e?this._pageNames[e]:null},i.getPageId=function(t){return void 0===t&&(t=0),this._pageIds[t]},i.runActions=function(){if(this._actions)for(var t=this._actions.length,e=0;t>e;e++)this._actions[e].run(this,this.previousPageId,this.selectedPageId)},i.setup=function(t){this._name=t.getAttribute("name"),this._autoRadioGroupDepth="true"==t.getAttribute("autoRadioGroupDepth");var e=0,i=0,n=t.getAttribute("pages");if(n){var r=n.split(","),s=r.length;for(e=0;s>e;e+=2)this._pageIds.push(r[e]),this._pageNames.push(r[e+1])}var a=t.childNodes,o=a.length;if(o>0){this._actions||(this._actions=[]);for(var h=0;o>h;h++){var l=a[h],u=M.createAction(l.getAttribute("type"));u.setup(l),this._actions.push(u)}}if(n=t.getAttribute("transitions")){this._actions||(this._actions=[]),r=n.split(","),s=r.length;var c=0;for(e=0;s>e;e++)if(n=r[e]){var _=new pt;i=n.indexOf("="),_.transitionName=n.substr(i+1),n=n.substring(0,i),i=n.indexOf("-"),c=parseInt(n.substring(i+1)),c<this._pageIds.length&&(_.toPage=[this._pageIds[c]]),n=n.substring(0,i),"*"!=n&&(c=parseInt(n),c<this._pageIds.length&&(_.fromPage=[this._pageIds[c]])),_.stopOnExit=!0,this._actions.push(_)}}this._parent&&this._pageIds.length>0?this._selectedIndex=0:this._selectedIndex=-1},s(0,i,"oppositePageId",null,function(t){var e=this._pageIds.indexOf(t);e>0?this.selectedIndex=0:this._pageIds.length>1&&(this.selectedIndex=1)}),s(0,i,"name",function(){return this._name},function(t){this._name=t}),s(0,i,"pageCount",function(){return this._pageIds.length}),s(0,i,"parent",function(){return this._parent}),s(0,i,"selectedIndex",function(){return this._selectedIndex},function(t){if(this._selectedIndex!=t){if(t>this._pageIds.length-1)throw"index out of bounds: "+t;this.changing=!0,this._previousIndex=this._selectedIndex,this._selectedIndex=t,this._parent.applyController(this),this.event("fui_state_changed"),this.changing=!1}}),s(0,i,"selectedPage",function(){return-1==this._selectedIndex?null:this._pageNames[this._selectedIndex]},function(t){var e=this._pageNames.indexOf(t);-1==e&&(e=0),this.selectedIndex=e}),s(0,i,"previsousIndex",function(){return this._previousIndex}),s(0,i,"previousPage",function(){return-1==this._previousIndex?null:this._pageNames[this._previousIndex]}),s(0,i,"selectedPageId",function(){return-1==this._selectedIndex?null:this._pageIds[this._selectedIndex]},function(t){var e=this._pageIds.indexOf(t);this.selectedIndex=e}),s(0,i,"previousPageId",function(){return-1==this._previousIndex?null:this._pageIds[this._previousIndex]}),e._nextPageId=0,e}(_),dt=function(t){function e(t,i,n){this._data=null,this.offsetX=0,this.offsetY=0,this.scaleX=NaN,this.scaleY=NaN,e.__super.call(this),void 0===i&&(i=0),void 0===n&&(n=0),this._data=t,this.offsetX=i,this.offsetY=n,this.scaleX=1,this.scaleY=1}r(e,"fairygui.utils.PixelHitTest",t);var i=e.prototype;return i.isHit=function(t,e){if(t=Math.floor((t/this.scaleX-this.offsetX)*this._data.scale),e=Math.floor((e/this.scaleY-this.offsetY)*this._data.scale),0>t||0>e||t>=this._data.pixelWidth)return!1;var i=e*this._data.pixelWidth+t,n=Math.floor(i/8),r=i%8;return n>=0&&n<this._data.pixels.length?1==(this._data.pixels[n]>>r&1):!1},e}(p),ft=function(t){function e(){this.objectId=null,this.controllerName=null,this.targetPage=null,e.__super.call(this)}r(e,"fairygui.action.ChangePageAction",t);var i=e.prototype;return i.enter=function(t){if(this.controllerName){var e;if(e=this.objectId?t.parent.getChildById(this.objectId):t.parent){var i=e.getController(this.controllerName);i&&i!=t&&!i.changing&&(i.selectedPageId=this.targetPage)}}},i.setup=function(e){t.prototype.setup.call(this,e),this.objectId=e.getAttribute("objectId"),this.controllerName=e.getAttribute("controller"),this.targetPage=e.getAttribute("targetPage")},e}(M),pt=function(t){function e(){this.transitionName=null,this.repeat=1,this.delay=0,this.stopOnExit=!1,this._currentTransition=null,e.__super.call(this)}r(e,"fairygui.action.PlayTransitionAction",t);var i=e.prototype;return i.enter=function(t){var e=t.parent.getTransition(this.transitionName);e&&(this._currentTransition&&this._currentTransition.playing?e.changeRepeat(this.repeat):e.play(null,this.repeat,this.delay),this._currentTransition=e)},i.leave=function(t){this.stopOnExit&&this._currentTransition&&(this._currentTransition.stop(),this._currentTransition=null)},i.setup=function(e){t.prototype.setup.call(this,e),this.transitionName=e.getAttribute("transition");var i;i=e.getAttribute("repeat"),i&&(this.repeat=parseInt(i)),i=e.getAttribute("delay"),i&&(this.delay=parseFloat(i)),this.stopOnExit="true"==e.getAttribute("stopOnExit")},e}(M),mt=function(t){function e(){this._gearColor=null,e.__super.call(this),this._gearColor=new vt(this)}r(e,"fairygui.GTextField",t);var n=e.prototype;return i.imps(n,{"fairygui.IColorGear":!0}),n.handleControllerChanged=function(e){t.prototype.handleControllerChanged.call(this,e),this._gearColor.controller==e&&this._gearColor.apply()},n.setup_beforeAdd=function(e){t.prototype.setup_beforeAdd.call(this,e);var i;i=e.getAttribute("font"),i&&(this.font=i),i=e.getAttribute("fontSize"),i&&(this.fontSize=parseInt(i)),i=e.getAttribute("color"),i&&(this.color=i),i=e.getAttribute("align"),i&&(this.align=i),i=e.getAttribute("vAlign"),i&&(this.valign=i),i=e.getAttribute("leading"),i?this.leading=parseInt(i):this.leading=3,i=e.getAttribute("letterSpacing"),i&&(this.letterSpacing=parseInt(i)),this.ubbEnabled="true"==e.getAttribute("ubb"),this.italic="true"==e.getAttribute("italic"),this.bold="true"==e.getAttribute("bold"),this.underline="true"==e.getAttribute("underline"),this.singleLine="true"==e.getAttribute("singleLine"),i=e.getAttribute("strokeColor"),i&&(this.strokeColor=i,i=e.getAttribute("strokeSize"),i?this.stroke=parseInt(i)+1:this.stroke=2)},n.setup_afterAdd=function(e){t.prototype.setup_afterAdd.call(this,e);var i=e.getAttribute("text");null!=i&&i.length>0&&(this.text=i)},s(0,n,"color",function(){return null},function(t){}),s(0,n,"font",function(){return null},function(t){}),s(0,n,"leading",function(){return 0},function(t){}),s(0,n,"fontSize",function(){return 0},function(t){}),s(0,n,"bold",function(){return!1},function(t){}),s(0,n,"letterSpacing",function(){return 0},function(t){}),s(0,n,"align",function(){return null},function(t){}),s(0,n,"valign",function(){return null},function(t){}),s(0,n,"italic",function(){return!1},function(t){}),s(0,n,"underline",function(){return!1},function(t){}),s(0,n,"singleLine",function(){return!1},function(t){}),s(0,n,"stroke",function(){return 0},function(t){}),s(0,n,"strokeColor",function(){return null},function(t){}),s(0,n,"ubbEnabled",function(){return!1},function(t){}),s(0,n,"textWidth",function(){return 0}),s(0,n,"gearColor",function(){return this._gearColor}),e}(k),gt=function(t){function e(){this._sortingChildCount=0,this._opaque=!1,this._applyingController=null,this._margin=null,this._trackBounds=!1,this._boundsChanged=!1,this._childrenRenderOrder=0,this._apexIndex=0,this._buildingDisplayList=!1,this._children=null,this._controllers=null,this._transitions=null,this._container=null,this._scrollPane=null,this._alignOffset=null,e.__super.call(this),this._children=[],this._controllers=[],this._transitions=[],this._margin=new Y,this._alignOffset=new y}r(e,"fairygui.GComponent",t);var n=e.prototype;return n.createDisplayObject=function(){t.prototype.createDisplayObject.call(this),this._displayObject.mouseEnabled=!0,this._displayObject.mouseThrough=!0,this._container=this._displayObject},n.dispose=function(){var e=0,i=this._transitions.length;for(e=0;i>e;++e){var n=this._transitions[e];n.dispose()}var r=this._children.length;for(e=r-1;e>=0;--e){var s=this._children[e];s.parent=null,s.dispose()}this._boundsChanged=!1,t.prototype.dispose.call(this)},n.addChild=function(t){return this.addChildAt(t,this._children.length),t},n.addChildAt=function(t,e){if(void 0===e&&(e=0),!t)throw"child is null";var i=this._children.length;if(e>=0&&i>=e){if(t.parent==this)this.setChildIndex(t,e);else{t.removeFromParent(),t.parent=this;var n=this._children.length;0!=t.sortingOrder?(this._sortingChildCount++,e=this.getInsertPosForSortingChild(t)):this._sortingChildCount>0&&e>n-this._sortingChildCount&&(e=n-this._sortingChildCount),e==n?this._children.push(t):this._children.splice(e,0,t),this.childStateChanged(t),this.setBoundsChangedFlag()}return t}throw"Invalid child index"},n.getInsertPosForSortingChild=function(t){var e=this._children.length,i=0;for(i=0;e>i;i++){var n=this._children[i];if(n!=t&&t.sortingOrder<n.sortingOrder)break}return i},n.removeChild=function(t,e){void 0===e&&(e=!1);var i=this._children.indexOf(t);return-1!=i&&this.removeChildAt(i,e),t},n.removeChildAt=function(t,e){if(void 0===e&&(e=!1),t>=0&&t<this.numChildren){var n=this._children[t];return n.parent=null,0!=n.sortingOrder&&this._sortingChildCount--,this._children.splice(t,1),n.group=null,n.inContainer&&(this._container.removeChild(n.displayObject),2==this._childrenRenderOrder&&i.timer.callLater(this,this.buildNativeDisplayList)),e&&n.dispose(),this.setBoundsChangedFlag(),n}throw"Invalid child index"},n.removeChildren=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=-1),void 0===i&&(i=!1),(0>e||e>=this.numChildren)&&(e=this.numChildren-1);for(var n=t;e>=n;++n)this.removeChildAt(t,i)},n.getChildAt=function(t){if(void 0===t&&(t=0),t>=0&&t<this.numChildren)return this._children[t];throw"Invalid child index"},n.getChild=function(t){for(var e=this._children.length,i=0;e>i;++i)if(this._children[i].name==t)return this._children[i];return null},n.getVisibleChild=function(t){for(var e=this._children.length,i=0;e>i;++i){var n=this._children[i];if(n.finalVisible&&n.name==t)return n}return null},n.getChildInGroup=function(t,e){for(var i=this._children.length,n=0;i>n;++n){var r=this._children[n];if(r.group==e&&r.name==t)return r}return null},n.getChildById=function(t){for(var e=this._children.length,i=0;e>i;++i)if(this._children[i]._id==t)return this._children[i];return null},n.getChildIndex=function(t){return this._children.indexOf(t)},n.setChildIndex=function(t,e){void 0===e&&(e=0);var i=this._children.indexOf(t);if(-1==i)throw"Not a child of this container";if(0==t.sortingOrder){var n=this._children.length;this._sortingChildCount>0&&e>n-this._sortingChildCount-1&&(e=n-this._sortingChildCount-1),this._setChildIndex(t,i,e)}},n.setChildIndexBefore=function(t,e){var i=this._children.indexOf(t);if(-1==i)throw"Not a child of this container";if(0!=t.sortingOrder)return i;var n=this._children.length;return this._sortingChildCount>0&&e>n-this._sortingChildCount-1&&(e=n-this._sortingChildCount-1),e>i?this._setChildIndex(t,i,e-1):this._setChildIndex(t,i,e)},n._setChildIndex=function(t,e,n){var r=this._children.length;if(n>r&&(n=r),e==n)return e;if(this._children.splice(e,1),this._children.splice(n,0,t),t.inContainer){var s,a=0,o=0;if(0==this._childrenRenderOrder){for(o=0;n>o;o++)s=this._children[o],s.inContainer&&a++;a==this._container.numChildren&&a--,this._container.setChildIndex(t.displayObject,a)}else if(1==this._childrenRenderOrder){for(o=r-1;o>n;o--)s=this._children[o],s.inContainer&&a++;a==this._container.numChildren&&a--,this._container.setChildIndex(t.displayObject,a)}else i.timer.callLater(this,this.buildNativeDisplayList);this.setBoundsChangedFlag()}return n},n.swapChildren=function(t,e){var i=this._children.indexOf(t),n=this._children.indexOf(e);if(-1==i||-1==n)throw"Not a child of this container";this.swapChildrenAt(i,n)},n.swapChildrenAt=function(t,e){void 0===e&&(e=0);var i=this._children[t],n=this._children[e];this.setChildIndex(i,e),this.setChildIndex(n,t)},n.isAncestorOf=function(t){if(null==t)return!1;for(var e=t.parent;e;){if(e==this)return!0;e=e.parent}return!1},n.addController=function(t){this._controllers.push(t),t._parent=this,this.applyController(t)},n.getControllerAt=function(t){return this._controllers[t]},n.getController=function(t){for(var e=this._controllers.length,i=0;e>i;++i){var n=this._controllers[i];if(n.name==t)return n}return null},n.removeController=function(t){var e=this._controllers.indexOf(t);if(-1==e)throw new Error("controller not exists");t._parent=null,this._controllers.splice(e,1);for(var i=this._children.length,n=0;i>n;n++){var r=this._children[n];r.handleControllerChanged(t)}},n.childStateChanged=function(t){if(!this._buildingDisplayList){var e=this._children.length;if(t instanceof fairygui.GGroup)for(var n=0;e>n;n++){var r=this._children[n];r.group==t&&this.childStateChanged(r)}else if(t.displayObject)if(t.finalVisible&&t.displayObject!=this._displayObject.mask){if(!t.displayObject.parent){var s=0;if(0==this._childrenRenderOrder){for(n=0;e>n&&(r=this._children[n],r!=t);n++)null!=r.displayObject&&null!=r.displayObject.parent&&s++;this._container.addChildAt(t.displayObject,s)}else if(1==this._childrenRenderOrder){for(n=e-1;n>=0&&(r=this._children[n],r!=t);n--)null!=r.displayObject&&null!=r.displayObject.parent&&s++;this._container.addChildAt(t.displayObject,s)}else this._container.addChild(t.displayObject),i.timer.callLater(this,this.buildNativeDisplayList)}}else t.displayObject.parent&&(this._container.removeChild(t.displayObject),2==this._childrenRenderOrder&&i.timer.callLater(this,this.buildNativeDisplayList))}},n.buildNativeDisplayList=function(){var t=this._children.length;if(0!=t){var e,i=0;switch(this._childrenRenderOrder){case 0:for(i=0;t>i;i++)e=this._children[i],null!=e.displayObject&&e.finalVisible&&this._container.addChild(e.displayObject);break;case 1:for(i=t-1;i>=0;i--)e=this._children[i],null!=e.displayObject&&e.finalVisible&&this._container.addChild(e.displayObject);break;case 2:for(i=0;i<this._apexIndex;i++)e=this._children[i],null!=e.displayObject&&e.finalVisible&&this._container.addChild(e.displayObject);for(i=t-1;i>=this._apexIndex;i--)e=this._children[i],null!=e.displayObject&&e.finalVisible&&this._container.addChild(e.displayObject)}}},n.applyController=function(t){this._applyingController=t;for(var e,i=this._children.length,n=0;i>n;n++)e=this._children[n],e.handleControllerChanged(t);this._applyingController=null,t.runActions()},n.applyAllControllers=function(){for(var t=this._controllers.length,e=0;t>e;++e)this.applyController(this._controllers[e])},n.adjustRadioGroupDepth=function(t,e){var i,n=this._children.length,r=NaN,s=-1,a=-1;for(r=0;n>r;r++)i=this._children[r],i==t?s=r:i instanceof fairygui.GButton&&i.relatedController==e&&r>a&&(a=r);a>s&&(null!=this._applyingController&&this._children[a].handleControllerChanged(this._applyingController),this.swapChildrenAt(s,a))},n.getTransitionAt=function(t){return this._transitions[t]},n.getTransition=function(t){for(var e=this._transitions.length,i=0;e>i;++i){var n=this._transitions[i];if(n.name==t)return n}return null},n.isChildInView=function(t){return null!=this._displayObject.scrollRect?t.x+t.width>=0&&t.x<=this.width&&t.y+t.height>=0&&t.y<=this.height:null!=this._scrollPane?this._scrollPane.isChildInView(t):!0},n.getFirstChildInView=function(){for(var t=this._children.length,e=0;t>e;++e){var i=this._children[e];if(this.isChildInView(i))return e}return-1},n.updateHitArea=function(){if(this._displayObject.hitArea instanceof fairygui.utils.PixelHitTest){var t=this._displayObject.hitArea;0!=this.sourceWidth&&(t.scaleX=this.width/this.sourceWidth),0!=this.sourceHeight&&(t.scaleY=this.height/this.sourceHeight)}else null==this._displayObject.hitArea&&(this._displayObject.hitArea=new v),this._displayObject.hitArea.setTo(0,0,this.width,this.height)},n.updateMask=function(){var t=this._displayObject.scrollRect;null==t&&(t=new v),t.x=this._margin.left,t.y=this._margin.top,t.width=this.width-this._margin.right,t.height=this.height-this._margin.bottom,this._displayObject.scrollRect=t},n.setupScroll=function(t,e,i,n,r,s){this._displayObject==this._container&&(this._container=new w,this._displayObject.addChild(this._container)),this._scrollPane=new et(this,e,t,i,n,r,s)},n.setupOverflow=function(t){1==t?(this._displayObject==this._container&&(this._container=new w,this._displayObject.addChild(this._container)),this.updateMask(),this._container.pos(this._margin.left,this._margin.top)):(0!=this._margin.left||0!=this._margin.top)&&(this._displayObject==this._container&&(this._container=new w,this._displayObject.addChild(this._container)),this._container.pos(this._margin.left,this._margin.top))},n.handleSizeChanged=function(){t.prototype.handleSizeChanged.call(this),this._scrollPane?this._scrollPane.onOwnerSizeChanged():null!=this._displayObject.scrollRect&&this.updateMask(),null!=this._displayObject.hitArea&&this.updateHitArea()},n.handleGrayedChanged=function(){var t=this.getController("grayed");if(null!=t)return void(t.selectedIndex=this.grayed?1:0);for(var e=this.grayed,i=this._children.length,n=0;i>n;++n)this._children[n].grayed=e},n.handleControllerChanged=function(e){t.prototype.handleControllerChanged.call(this,e),null!=this._scrollPane&&this._scrollPane.handleControllerChanged(e)},n.setBoundsChangedFlag=function(){(this._scrollPane||this._trackBounds)&&(this._boundsChanged||(this._boundsChanged=!0,i.timer.callLater(this,this.__render)))},n.__render=function(){if(this._boundsChanged){var t,e=0,i=this._children.length;for(e=0;i>e;e++)t=this._children[e],t.ensureSizeCorrect();this.updateBounds()}},n.ensureBoundsCorrect=function(){var t,e=0,i=this._children.length;for(e=0;i>e;e++)t=this._children[e],t.ensureSizeCorrect();this._boundsChanged&&this.updateBounds()},n.updateBounds=function(){var t=0,e=0,i=0,n=0,r=this._children.length;if(r>0){t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY;var s=Number.NEGATIVE_INFINITY,a=Number.NEGATIVE_INFINITY,o=0,h=0;for(h=0;r>h;h++){var l=this._children[h];o=l.x,t>o&&(t=o),o=l.y,e>o&&(e=o),o=l.x+l.actualWidth,o>s&&(s=o),o=l.y+l.actualHeight,o>a&&(a=o)}i=s-t,n=a-e}this.setBounds(t,e,i,n)},n.setBounds=function(t,e,i,n){this._boundsChanged=!1,this._scrollPane&&this._scrollPane.setContentSize(Math.round(t+i),Math.round(e+n))},n.getSnappingPosition=function(t,e,i){i||(i=new y);var n=this._children.length;if(0==n)return i.x=0,i.y=0,i;this.ensureBoundsCorrect();var r=null,s=null,a=0;if(0!=e){for(;n>a;a++)if(r=this._children[a],e<r.y){if(0==a){e=0;break}s=this._children[a-1],e=e<s.y+s.actualHeight/2?s.y:r.y;break}a==n&&(e=r.y)}if(0!=t){for(a>0&&a--;n>a;a++)if(r=this._children[a],t<r.x){if(0==a){t=0;break}s=this._children[a-1],t=t<s.x+s.actualWidth/2?s.x:r.x;break}a==n&&(t=r.x)}return i.x=t,i.y=e,i},n.childSortingOrderChanged=function(t,e,i){if(void 0===i&&(i=0),0==i)this._sortingChildCount--,this.setChildIndex(t,this._children.length);else{0==e&&this._sortingChildCount++;var n=this._children.indexOf(t),r=this.getInsertPosForSortingChild(t);r>n?this._setChildIndex(t,n,r-1):this._setChildIndex(t,n,r)}},n.constructFromResource=function(){this.constructFromResource2(null,0)},n.constructFromResource2=function(t,e){var i=this.packageItem.owner.getItemAsset(this.packageItem);this._underConstruct=!0;var n,r;if(n=i.getAttribute("size"),r=n.split(","),this.sourceWidth=parseInt(r[0]),this.sourceHeight=parseInt(r[1]),this.initWidth=this.sourceWidth,this.initHeight=this.sourceHeight,this.setSize(this.sourceWidth,this.sourceHeight),n=i.getAttribute("restrictSize"),n&&(r=n.split(","),this.minWidth=parseInt(r[0]),this.maxWidth=parseInt(r[1]),this.minHeight=parseInt(r[2]),this.maxHeight=parseInt(r[3])),n=i.getAttribute("pivot"),n&&(r=n.split(","),n=i.getAttribute("anchor"),this.internalSetPivot(parseFloat(r[0]),parseFloat(r[1]),"true"==n)),n=i.getAttribute("opaque"),this.opaque="false"!=n,n=i.getAttribute("hitTest")){r=n.split(",");var s=this.packageItem.owner.getPixelHitTestData(r[0]);null!=s&&(this._displayObject.hitArea=new dt(s,parseInt(r[1]),parseInt(r[2])),this._displayObject.mouseThrough=!1,this._displayObject.hitTestPrior=!0)}var a=0;if(n=i.getAttribute("overflow"),a=n?X.parse(n):0,n=i.getAttribute("margin"),n&&this._margin.parse(n),2==a){var o=0;n=i.getAttribute("scroll"),o=n?it.parse(n):1;var h=0;n=i.getAttribute("scrollBar"),h=n?tt.parse(n):0;var l=NaN;n=i.getAttribute("scrollBarFlags"),l=n?parseInt(n):0;var u=new Y;n=i.getAttribute("scrollBarMargin"),n&&u.parse(n);var c,_;n=i.getAttribute("scrollBarRes"),n&&(r=n.split(","),c=r[0],_=r[1]),this.setupScroll(u,o,h,l,c,_)}else this.setupOverflow(a);this._buildingDisplayList=!0;var d=i.childNodes,f=0;d&&(f=d.length);var p,m=0;for(m=0;f>m;m++){var g=d[m];"controller"==g.nodeName&&(p=new _t,this._controllers.push(p),p._parent=this,p.setup(g))}var y,v=this.packageItem.displayList,x=v.length;for(m=0;x>m;m++){var b=v[m];null!=t?y=t[e+m]:b.packageItem?(y=at.newObject(b.packageItem),y.packageItem=b.packageItem,y.constructFromResource()):y=at.newObject2(b.type),y._underConstruct=!0,y.setup_beforeAdd(b.desc),y.parent=this,this._children.push(y)}for(this.relations.setup(i),m=0;x>m;m++)this._children[m].relations.setup(v[m].desc);for(m=0;x>m;m++)y=this._children[m],y.setup_afterAdd(v[m].desc),y._underConstruct=!1;n=i.getAttribute("mask"),n&&(this.mask=this.getChildById(n).displayObject);var w;for(m=0;f>m;m++)g=d[m],"transition"==g.nodeName&&(w=new nt(this),this._transitions.push(w),w.setup(g));this._transitions.length>0&&(this.displayObject.on("display",this,this.___added),this.displayObject.on("undisplay",this,this.___removed)),this.applyAllControllers(),this._buildingDisplayList=!1,this._underConstruct=!1,this.buildNativeDisplayList(),this.setBoundsChangedFlag(),this.constructFromXML(i)},n.constructFromXML=function(t){},n.setup_afterAdd=function(e){t.prototype.setup_afterAdd.call(this,e);var i;if(this.scrollPane&&(i=e.getAttribute("pageController"),i&&(this.scrollPane.pageController=this.parent.getController(i))),i=e.getAttribute("controller"))for(var n=i.split(","),r=0;r<n.length;r+=2){var s=this.getController(n[r]);s&&(s.selectedPageId=n[r+1])}},n.___added=function(){for(var t=this._transitions.length,e=0;t>e;++e){var i=this._transitions[e];i.autoPlay&&i.play(null,i.autoPlayRepeat,i.autoPlayDelay)}},n.___removed=function(){for(var t=this._transitions.length,e=0;t>e;++e)this._transitions[e].OnOwnerRemovedFromStage()},s(0,n,"numChildren",function(){return this._children.length}),s(0,n,"displayListContainer",function(){return this._container}),s(0,n,"childrenRenderOrder",function(){return this._childrenRenderOrder},function(t){this._childrenRenderOrder!=t&&(this._childrenRenderOrder=t,this.buildNativeDisplayList())}),s(0,n,"opaque",function(){return null!=this._displayObject.hitArea},function(t){t?(this.updateHitArea(),this._displayObject.mouseThrough=!1):(this._displayObject.hitArea=null,this._displayObject.mouseThrough=!0)}),s(0,n,"controllers",function(){return this._controllers}),s(0,n,"scrollPane",function(){return this._scrollPane}),s(0,n,"margin",function(){return this._margin},function(t){this._margin.copy(t),null!=this._displayObject.scrollRect&&this._container.pos(this._margin.left+this._alignOffset.x,this._margin.top+this._alignOffset.y),this.handleSizeChanged()}),s(0,n,"apexIndex",function(){return this._apexIndex},function(t){this._apexIndex!=t&&(this._apexIndex=t,2==this._childrenRenderOrder&&this.buildNativeDisplayList())}),s(0,n,"mask",function(){return this._displayObject.mask},function(t){this._displayObject.mask=t}),s(0,n,"viewWidth",function(){return null!=this._scrollPane?this._scrollPane.viewWidth:this.width-this._margin.left-this._margin.right},function(t){null!=this._scrollPane?this._scrollPane.viewWidth=t:this.width=t+this._margin.left+this._margin.right}),s(0,n,"viewHeight",function(){return null!=this._scrollPane?this._scrollPane.viewHeight:this.height-this._margin.top-this._margin.bottom},function(t){null!=this._scrollPane?this._scrollPane.viewHeight=t:this.height=t+this._margin.top+this._margin.bottom}),e}(k),yt=function(t){function e(t){this._storage=null,this._default=null,e.__super.call(this,t)}var i;r(e,"fairygui.GearAnimation",t);var n=e.prototype;return n.init=function(){this._default=new i(this._owner.playing,this._owner.frame),this._storage={}},n.addStatus=function(t,e){if("-"!=e){var n;null==t?n=this._default:(n=new i,this._storage[t]=n);var r=e.split(",");n.frame=parseInt(r[0]),n.playing="p"==r[1]}},n.apply=function(){this._owner._gearLocked=!0;var t=this._storage[this._controller.selectedPageId];t||(t=this._default),this._owner.frame=t.frame,this._owner.playing=t.playing,this._owner._gearLocked=!1},n.updateState=function(){var t=this._owner,e=this._storage[this._controller.selectedPageId];e||(e=new i,this._storage[this._controller.selectedPageId]=e),e.frame=t.frame,e.playing=t.playing},e.__init$=function(){i=function(){function t(t,e){this.playing=!1,this.frame=NaN,void 0===t&&(t=!0),void 0===e&&(e=0),this.playing=t,this.frame=e}return r(t,""),t}()},e}(U),vt=function(t){function e(t){this._storage=null,this._default=null,e.__super.call(this,t)}var i;r(e,"fairygui.GearColor",t);var n=e.prototype;return n.init=function(){void 0!=this._owner.strokeColor?this._default=new i(this._owner.color,this._owner.strokeColor):this._default=new i(this._owner.color,null),this._storage={}},n.addStatus=function(t,e){if("-"!=e){var n,r,s=e.indexOf(",");-1==s?(n=e,r=null):(n=e.substr(0,s),r=e.substr(s+1)),null==t?(this._default.color=n,this._default.strokeColor=r):this._storage[t]=new i(n,r)}},n.apply=function(){this._owner._gearLocked=!0;var t=this._storage[this._controller.selectedPageId];t||(t=this._default),this._owner.color=t.color,void 0!=this._owner.strokeColor&&null!=t.strokeColor&&(this._owner.strokeColor=t.strokeColor),this._owner._gearLocked=!1},n.updateState=function(){var t=this._storage[this._controller.selectedPageId];t||(t=new i(null,null),this._storage[this._controller.selectedPageId]=t),t.color=this._owner.color,void 0!=this._owner.strokeColor&&(t.strokeColor=this._owner.strokeColor)},e.__init$=function(){i=function(){function t(t,e){this.color=null,this.strokeColor=null,this.color=t,this.strokeColor=e}return r(t,""),t}()},e}(U),xt=function(t){function e(t){this.pages=null,this._visible=0,e.__super.call(this,t),this._displayLockToken=1}r(e,"fairygui.GearDisplay",t);var i=e.prototype;return i.init=function(){this.pages=null},i.addLock=function(){return this._visible++,this._displayLockToken},i.releaseLock=function(t){t==this._displayLockToken&&this._visible--},i.apply=function(){this._displayLockToken++,this._displayLockToken<=0&&(this._displayLockToken=1),null==this.pages||0==this.pages.length||-1!=this.pages.indexOf(this._controller.selectedPageId)?this._visible=1:this._visible=0},s(0,i,"connected",function(){return null==this._controller||this._visible>0}),e}(U),bt=function(t){function e(t){this._storage=null,this._default=null,e.__super.call(this,t)}r(e,"fairygui.GearIcon",t);var i=e.prototype;return i.init=function(){this._default=this._owner.icon,this._storage={}},i.addStatus=function(t,e){null==t?this._default=e:this._storage[t]=e},i.apply=function(){this._owner._gearLocked=!0;var t=this._storage[this._controller.selectedPageId];void 0!=t?this._owner.icon=String(t):this._owner.icon=this._default,this._owner._gearLocked=!1},i.updateState=function(){this._storage[this._controller.selectedPageId]=this._owner.icon},e}(U),wt=function(t){function e(t){this.tweener=null,this._storage=null,this._default=null,this._tweenValue=null,this._tweenTarget=null,e.__super.call(this,t)}var i;r(e,"fairygui.GearLook",t);var n=e.prototype;return n.init=function(){this._default=new i(this._owner.alpha,this._owner.rotation,this._owner.grayed,this._owner.touchable),this._storage={}},n.addStatus=function(t,e){if("-"!=e){var n,r=e.split(",");null==t?n=this._default:(n=new i,this._storage[t]=n),n.alpha=parseFloat(r[0]),n.rotation=parseInt(r[1]),n.grayed="1"==r[2]?!0:!1,r.length<4?n.touchable=this._owner.touchable:n.touchable="1"==r[3]?!0:!1}},n.apply=function(){var t=this._storage[this._controller.selectedPageId];if(t||(t=this._default),!this._tween||ot._constructing||U.disableAllTweenEffect)this._owner._gearLocked=!0,this._owner.grayed=t.grayed,this._owner.alpha=t.alpha,this._owner.rotation=t.rotation,this._owner.touchable=t.touchable,this._owner._gearLocked=!1;else{if(this._owner._gearLocked=!0,this._owner.grayed=t.grayed,this._owner.touchable=t.touchable,this._owner._gearLocked=!1,null!=this.tweener){if(this._tweenTarget.alpha==t.alpha&&this._tweenTarget.rotation==t.rotation)return;this.tweener.complete(),this.tweener=null}var e=t.alpha!=this._owner.alpha,i=t.rotation!=this._owner.rotation;(e||i)&&(this._owner.checkGearController(0,this._controller)&&(this._displayLockToken=this._owner.addDisplayLock()),this._tweenTarget=t,null==this._tweenValue&&(this._tweenValue=new y),this._tweenValue.x=this._owner.alpha,this._tweenValue.y=this._owner.rotation,this.tweener=T.to(this._tweenValue,{x:t.alpha,y:t.rotation},1e3*this._tweenTime,this._easeType,f.create(this,this.__tweenComplete),1e3*this._delay),this.tweener.update=f.create(this,this.__tweenUpdate,[e,i],!1))}},n.__tweenUpdate=function(t,e){this._owner._gearLocked=!0,t&&(this._owner.alpha=this._tweenValue.x),e&&(this._owner.rotation=this._tweenValue.y),this._owner._gearLocked=!1},n.__tweenComplete=function(){0!=this._displayLockToken&&(this._owner.releaseDisplayLock(this._displayLockToken),this._displayLockToken=0),this.tweener=null,this._owner.displayObject.event("fui_gear_stop")},n.updateState=function(){var t=this._storage[this._controller.selectedPageId];t||(t=new i,this._storage[this._controller.selectedPageId]=t),t.alpha=this._owner.alpha,t.rotation=this._owner.rotation,t.grayed=this._owner.grayed,t.touchable=this._owner.touchable},e.__init$=function(){i=function(){function t(t,e,i,n){this.alpha=NaN,this.rotation=NaN,this.grayed=!1,this.touchable=!1,void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=!1),void 0===n&&(n=!0),this.alpha=t,this.rotation=e,this.grayed=i,this.touchable=n}return r(t,""),t}()},e}(U),St=function(t){function e(){this._type=NaN,this._lineSize=NaN,this._lineColor=null,this._fillColor=null,e.__super.call(this),this._type=0,this._lineSize=1,this._lineColor="#000000",this._fillColor="#FFFFFF"}r(e,"fairygui.GGraph",t);var n=e.prototype;return i.imps(n,{"fairygui.IColorGear":!0}),n.drawRect=function(t,e,i){this._type=1,this._lineSize=t,this._lineColor=e,this._fillColor=i,this.drawCommon()},n.drawEllipse=function(t,e,i){this._type=2,this._lineSize=t,this._lineColor=e,this._fillColor=i,this.drawCommon()},n.drawCommon=function(){this._displayObject.mouseEnabled=this.touchable;var t=this._displayObject.graphics;t.clear();var e=this.width,i=this.height;if(0!=e&&0!=i){var n=this._fillColor,r=this._lineColor;if(x.isWebGL&&lt.startsWith(n,"rgba")){var s=n.substring(5,n.lastIndexOf(")")).split(","),a=parseFloat(s[3]);0==a?n=null:(n=E.toHexColor((parseInt(s[0])<<16)+(parseInt(s[1])<<8)+parseInt(s[2])),this.alpha=a)}1==this._type?t.drawRect(0,0,e,i,n,this._lineSize>0?r:null,this._lineSize):t.drawCircle(e/2,i/2,e/2,n,this._lineSize>0?r:null,this._lineSize),this._displayObject.repaint()}},n.replaceMe=function(t){if(!this._parent)throw"parent not set";t.name=this.name,t.alpha=this.alpha,
t.rotation=this.rotation,t.visible=this.visible,t.touchable=this.touchable,t.grayed=this.grayed,t.setXY(this.x,this.y),t.setSize(this.width,this.height);var e=this._parent.getChildIndex(this);this._parent.addChildAt(t,e),t.relations.copyFrom(this.relations),this._parent.removeChild(this,!0)},n.addBeforeMe=function(t){if(null==this._parent)throw"parent not set";var e=this._parent.getChildIndex(this);this._parent.addChildAt(t,e)},n.addAfterMe=function(t){if(null==this._parent)throw"parent not set";var e=this._parent.getChildIndex(this);e++,this._parent.addChildAt(t,e)},n.setNativeObject=function(t){this._type=0,this._displayObject.mouseEnabled=this.touchable,this._displayObject.graphics.clear(),this._displayObject.addChild(t)},n.createDisplayObject=function(){t.prototype.createDisplayObject.call(this),this._displayObject.mouseEnabled=!1},n.handleSizeChanged=function(){t.prototype.handleSizeChanged.call(this),0!=this._type&&this.drawCommon()},n.setup_beforeAdd=function(e){t.prototype.setup_beforeAdd.call(this,e);var i=e.getAttribute("type");if(i&&"empty"!=i){var n;if(n=e.getAttribute("lineSize"),n&&(this._lineSize=parseInt(n)),n=e.getAttribute("lineColor")){var r=lt.convertFromHtmlColor(n,!0),s=(r>>24&255)/255;1!=s?this._lineColor="rgba("+(r>>16&255)+","+(r>>8&255)+","+(255&r)+","+s+")":this._lineColor=E.toHexColor(16777215&r)}n=e.getAttribute("fillColor"),n&&(r=lt.convertFromHtmlColor(n,!0),s=(r>>24&255)/255,1!=s?this._fillColor="rgba("+(r>>16&255)+","+(r>>8&255)+","+(255&r)+","+s+")":this._fillColor=E.toHexColor(16777215&r)),"rect"==i?this._type=1:this._type=2,this.drawCommon()}},s(0,n,"color",function(){return this._fillColor},function(t){this._fillColor=t,0!=this._type&&this.drawCommon()}),e}(k),Ct=function(t){function e(){this._layout=0,this._lineGap=0,this._columnGap=0,this._percentReady=!1,this._boundsChanged=!1,this._updating=0,e.__super.call(this)}r(e,"fairygui.GGroup",t);var n=e.prototype;return n.setBoundsChangedFlag=function(t){void 0===t&&(t=!1),0==this._updating&&null!=this.parent&&(t&&(this._percentReady=!1),this._boundsChanged||(this._boundsChanged=!0,0!=this._layout&&i.timer.callLater(this,this.ensureBoundsCorrect)))},n.ensureBoundsCorrect=function(){this._boundsChanged&&this.updateBounds()},n.updateBounds=function(){if(i.timer.clear(this,this.ensureBoundsCorrect),this._boundsChanged=!1,null!=this.parent){this.handleLayout();var t,e=this._parent.numChildren,n=0,r=Number.MAX_VALUE,s=Number.MAX_VALUE,a=Number.MIN_VALUE,o=Number.MIN_VALUE,h=0,l=!0;for(n=0;e>n;n++)t=this._parent.getChildAt(n),t.group==this&&(h=t.x,r>h&&(r=h),h=t.y,s>h&&(s=h),h=t.x+t.width,h>a&&(a=h),h=t.y+t.height,h>o&&(o=h),l=!1);l?(this._updating=2,this.setSize(0,0)):(this._updating=1,this.setXY(r,s),this._updating=2,this.setSize(a-r,o-s)),this._updating=0}},n.handleLayout=function(){this._updating|=1;var t,e=0,i=0;if(1==this._layout){var n=NaN;for(i=this.parent.numChildren,e=0;i>e;e++)t=this.parent.getChildAt(e),t.group==this&&(isNaN(n)?n=Math.floor(t.x):t.x=n,0!=t.width&&(n+=Math.floor(t.width+this._columnGap)));this._percentReady||this.updatePercent()}else if(2==this._layout){var r=NaN;for(i=this.parent.numChildren,e=0;i>e;e++)t=this.parent.getChildAt(e),t.group==this&&(isNaN(r)?r=Math.floor(t.y):t.y=r,0!=t.height&&(r+=Math.floor(t.height+this._lineGap)));this._percentReady||this.updatePercent()}this._updating&=2},n.updatePercent=function(){this._percentReady=!0;var t,e=this.parent.numChildren,i=0,n=0;if(1==this._layout){for(i=0;e>i;i++)t=this.parent.getChildAt(i),t.group==this&&(n+=t.width);for(i=0;e>i;i++)t=this.parent.getChildAt(i),t.group==this&&(n>0?t._sizePercentInGroup=t.width/n:t._sizePercentInGroup=0)}else{for(i=0;e>i;i++)t=this.parent.getChildAt(i),t.group==this&&(n+=t.height);for(i=0;e>i;i++)t=this.parent.getChildAt(i),t.group==this&&(n>0?t._sizePercentInGroup=t.height/n:t._sizePercentInGroup=0)}},n.moveChildren=function(t,e){if(0==(1&this._updating)&&null!=this.parent){this._updating|=1;var i,n=this.parent.numChildren,r=0;for(r=0;n>r;r++)i=this.parent.getChildAt(r),i.group==this&&i.setXY(i.x+t,i.y+e);this._updating&=2}},n.resizeChildren=function(t,e){if(0!=this._layout&&0==(2&this._updating)&&null!=this.parent){this._updating|=2,this._percentReady||this.updatePercent();var i,n=this.parent.numChildren,r=0,s=0,a=-1,o=0,h=0,l=0,u=!1;for(r=0;n>r;r++)i=this.parent.getChildAt(r),i.group==this&&(a=r,o++);if(1==this._layout){l=h=this.width-(o-1)*this._columnGap;var c=NaN,_=NaN;for(r=0;n>r;r++)if(i=this.parent.getChildAt(r),i.group==this)if(isNaN(c)?c=Math.floor(i.x):i.x=c,_=a==r?l:Math.round(i._sizePercentInGroup*h),i.setSize(_,i._rawHeight+e,!0),l-=i.width,a==r){if(l>=1)for(s=0;r>=s;s++)i=this.parent.getChildAt(s),i.group==this&&(u?i.x+=l:(_=i.width+l,(0==i.maxWidth||_<i.maxWidth)&&(0==i.minWidth||_>i.minWidth)&&(i.setSize(_,i.height,!0),u=!0)))}else c+=i.width+this._columnGap}else if(2==this._layout){l=h=this.height-(o-1)*this._lineGap;var d=NaN,f=NaN;for(r=0;n>r;r++)if(i=this.parent.getChildAt(r),i.group==this)if(isNaN(d)?d=Math.floor(i.y):i.y=d,f=a==r?l:Math.round(i._sizePercentInGroup*h),i.setSize(i._rawWidth+t,f,!0),l-=i.height,a==r){if(l>=1)for(s=0;r>=s;s++)i=this.parent.getChildAt(s),i.group==this&&(u?i.y+=l:(f=i.height+l,(0==i.maxHeight||f<i.maxHeight)&&(0==i.minHeight||f>i.minHeight)&&(i.setSize(i.width,f,!0),u=!0)))}else d+=i.height+this._lineGap}this._updating&=1}},n.updateAlpha=function(){if(t.prototype.updateAlpha.call(this),!this._underConstruct)for(var e=this._parent.numChildren,i=0;e>i;i++){var n=this._parent.getChildAt(i);n.group==this&&(n.alpha=this.alpha)}},n.setup_beforeAdd=function(e){t.prototype.setup_beforeAdd.call(this,e);var i;i=e.getAttribute("layout"),null!=i&&(this._layout=z.parse(i),i=e.getAttribute("lineGap"),i&&(this._lineGap=parseInt(i)),i=e.getAttribute("colGap"),i&&(this._columnGap=parseInt(i)))},s(0,n,"layout",function(){return this._layout},function(t){this._layout!=t&&(this._layout=t,this.setBoundsChangedFlag(!0))}),s(0,n,"columnGap",function(){return this._columnGap},function(t){this._columnGap!=t&&(this._columnGap=t,this.setBoundsChangedFlag())}),s(0,n,"lineGap",function(){return this._lineGap},function(t){this._lineGap!=t&&(this._lineGap=t,this.setBoundsChangedFlag())}),e}(k),Tt=function(t){function e(t){this.tweener=null,this._storage=null,this._default=null,this._tweenValue=null,this._tweenTarget=null,e.__super.call(this,t)}var i;r(e,"fairygui.GearSize",t);var n=e.prototype;return n.init=function(){this._default=new i(this._owner.width,this._owner.height,this._owner.scaleX,this._owner.scaleY),this._storage={}},n.addStatus=function(t,e){if("-"!=e){var n,r=e.split(",");null==t?n=this._default:(n=new i,this._storage[t]=n),n.width=parseInt(r[0]),n.height=parseInt(r[1]),r.length>2&&(n.scaleX=parseFloat(r[2]),n.scaleY=parseFloat(r[3]))}},n.apply=function(){var t=this._storage[this._controller.selectedPageId];if(t||(t=this._default),!this._tween||ot._constructing||U.disableAllTweenEffect)this._owner._gearLocked=!0,this._owner.setSize(t.width,t.height,this._owner.checkGearController(1,this._controller)),this._owner.setScale(t.scaleX,t.scaleY),this._owner._gearLocked=!1;else{if(null!=this.tweener){if(this._tweenTarget.width==t.width&&this._tweenTarget.height==t.height&&this._tweenTarget.scaleX==t.scaleX&&this._tweenTarget.scaleY==t.scaleY)return;this.tweener.complete(),this.tweener=null}var e=t.width!=this._owner.width||t.height!=this._owner.height,n=t.scaleX!=this._owner.scaleX||t.scaleY!=this._owner.scaleY;(e||n)&&(this._owner.checkGearController(0,this._controller)&&(this._displayLockToken=this._owner.addDisplayLock()),this._tweenTarget=t,null==this._tweenValue&&(this._tweenValue=new i),this._tweenValue.width=this._owner.width,this._tweenValue.height=this._owner.height,this._tweenValue.scaleX=this._owner.scaleX,this._tweenValue.scaleY=this._owner.scaleY,this.tweener=T.to(this._tweenValue,{width:t.width,height:t.height,scaleX:t.scaleX,scaleY:t.scaleY},1e3*this._tweenTime,this._easeType,f.create(this,this.__tweenComplete),1e3*this._delay),this.tweener.update=f.create(this,this.__tweenUpdate,[e,n],!1))}},n.__tweenUpdate=function(t,e){this._owner._gearLocked=!0,t&&this._owner.setSize(this._tweenValue.width,this._tweenValue.height,this._owner.checkGearController(1,this._controller)),e&&this._owner.setScale(this._tweenValue.scaleX,this._tweenValue.scaleY),this._owner._gearLocked=!1},n.__tweenComplete=function(){0!=this._displayLockToken&&(this._owner.releaseDisplayLock(this._displayLockToken),this._displayLockToken=0),this.tweener=null,this._owner.displayObject.event("fui_gear_stop")},n.updateState=function(){var t=this._storage[this._controller.selectedPageId];t||(t=new i,this._storage[this._controller.selectedPageId]=t),t.width=this._owner.width,t.height=this._owner.height,t.scaleX=this._owner.scaleX,t.scaleY=this._owner.scaleY},n.updateFromRelations=function(t,e){if(null!=this._controller&&null!=this._storage){for(var i in this._storage){var n=this._storage[i];n.width+=t,n.height+=e}this._default.width+=t,this._default.height+=e,this.updateState()}},e.__init$=function(){i=function(){function t(t,e,i,n){this.width=NaN,this.height=NaN,this.scaleX=NaN,this.scaleY=NaN,void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.width=t,this.height=e,this.scaleX=i,this.scaleY=n}return r(t,""),t}()},e}(U),Et=function(t){function e(){this.image=null,this._color=null,this._flip=0,e.__super.call(this),this._color="#FFFFFF"}r(e,"fairygui.GImage",t);var n=e.prototype;return i.imps(n,{"fairygui.IColorGear":!0}),n.applyColor=function(){},n.createDisplayObject=function(){this._displayObject=this.image=new zt,this.image.mouseEnabled=!1,this._displayObject.$owner=this},n.constructFromResource=function(){this.packageItem.load(),this.sourceWidth=this.packageItem.width,this.sourceHeight=this.packageItem.height,this.initWidth=this.sourceWidth,this.initHeight=this.sourceHeight,this.image.scale9Grid=this.packageItem.scale9Grid,this.image.scaleByTile=this.packageItem.scaleByTile,this.image.tileGridIndice=this.packageItem.tileGridIndice,this.image.tex=this.packageItem.texture,this.setSize(this.sourceWidth,this.sourceHeight)},n.handleXYChanged=function(){t.prototype.handleXYChanged.call(this),0!=this._flip&&(-1==this.scaleX&&(this.image.x+=this.width),-1==this.scaleY&&(this.image.y+=this.height))},n.handleSizeChanged=function(){null!=this.image.tex&&this.image.scaleTexture(this.width/this.sourceWidth,this.height/this.sourceHeight)},n.setup_beforeAdd=function(e){t.prototype.setup_beforeAdd.call(this,e);var i;i=e.getAttribute("color"),i&&(this.color=i),i=e.getAttribute("flip"),i&&(this.flip=B.parse(i))},s(0,n,"color",function(){return this._color},function(t){this._color!=t&&(this._color=t,this.updateGear(4),this.applyColor())}),s(0,n,"flip",function(){return this._flip},function(t){if(this._flip!=t){this._flip=t;var e=1,i=1;(1==this._flip||3==this._flip)&&(e=-1),(2==this._flip||3==this._flip)&&(i=-1),this.setScale(e,i),this.handleXYChanged()}}),e}(k),Mt=function(t){function e(t){this._storage=null,this._default=null,e.__super.call(this,t)}r(e,"fairygui.GearText",t);var i=e.prototype;return i.init=function(){this._default=this._owner.text,this._storage={}},i.addStatus=function(t,e){null==t?this._default=e:this._storage[t]=e},i.apply=function(){this._owner._gearLocked=!0;var t=this._storage[this._controller.selectedPageId];void 0!=t?this._owner.text=String(t):this._owner.text=this._default,this._owner._gearLocked=!1},i.updateState=function(){this._storage[this._controller.selectedPageId]=this._owner.text},e}(U),It=function(t){function e(t){this.tweener=null,this._storage=null,this._default=null,this._tweenValue=null,this._tweenTarget=null,e.__super.call(this,t)}r(e,"fairygui.GearXY",t);var i=e.prototype;return i.init=function(){this._default=new y(this._owner.x,this._owner.y),this._storage={}},i.addStatus=function(t,e){if("-"!=e){var i,n=e.split(",");null==t?i=this._default:(i=new y,this._storage[t]=i),i.x=parseInt(n[0]),i.y=parseInt(n[1])}},i.apply=function(){var t=this._storage[this._controller.selectedPageId];if(t||(t=this._default),!this._tween||ot._constructing||U.disableAllTweenEffect)this._owner._gearLocked=!0,this._owner.setXY(t.x,t.y),this._owner._gearLocked=!1;else{if(this.tweener){if(this._tweenTarget.x==t.x&&this._tweenTarget.y==t.y)return;this.tweener.complete(),this.tweener=null}(this._owner.x!=t.x||this._owner.y!=t.y)&&(this._owner.checkGearController(0,this._controller)&&(this._displayLockToken=this._owner.addDisplayLock()),this._tweenTarget=t,null==this._tweenValue&&(this._tweenValue=new y),this._tweenValue.x=this._owner.x,this._tweenValue.y=this._owner.y,this.tweener=T.to(this._tweenValue,{x:t.x,y:t.y},1e3*this._tweenTime,this._easeType,f.create(this,this.__tweenComplete),1e3*this._delay),this.tweener.update=f.create(this,this.__tweenUpdate,null,!1))}},i.__tweenUpdate=function(){this._owner._gearLocked=!0,this._owner.setXY(this._tweenValue.x,this._tweenValue.y),this._owner._gearLocked=!1},i.__tweenComplete=function(){0!=this._displayLockToken&&(this._owner.releaseDisplayLock(this._displayLockToken),this._displayLockToken=0),this.tweener=null,this._owner.displayObject.event("fui_gear_stop")},i.updateState=function(){var t=this._storage[this._controller.selectedPageId];t||(t=new y,this._storage[this._controller.selectedPageId]=t),t.x=this._owner.x,t.y=this._owner.y},i.updateFromRelations=function(t,e){if(null!=this._controller&&null!=this._storage){for(var i in this._storage){var n=this._storage[i];n.x+=t,n.y+=e}this._default.x+=t,this._default.y+=e,this.updateState()}},e}(U),At=function(t){function e(){this._url=null,this._align=null,this._valign=null,this._autoSize=!1,this._fill=0,this._showErrorSign=!1,this._playing=!1,this._frame=0,this._color=null,this._contentItem=null,this._contentSourceWidth=0,this._contentSourceHeight=0,this._contentWidth=0,this._contentHeight=0,this._content=null,this._errorSign=null,this._updatingLayout=!1,e.__super.call(this),this._playing=!0,this._url="",this._fill=0,this._align="left",this._valign="top",this._showErrorSign=!0,this._color="#FFFFFF"}r(e,"fairygui.GLoader",t);var a=e.prototype;return i.imps(a,{"fairygui.IAnimationGear":!0,"fairygui.IColorGear":!0}),a.createDisplayObject=function(){t.prototype.createDisplayObject.call(this),this._displayObject.mouseEnabled=!0},a.dispose=function(){if(null==this._contentItem&&this._content instanceof fairygui.display.Image){var e=this._content.tex;null!=e&&this.freeExternal(e)}t.prototype.dispose.call(this)},a.applyColor=function(){},a.loadContent=function(){this.clearContent(),this._url&&(lt.startsWith(this._url,"ui://")?this.loadFromPackage(this._url):this.loadExternal())},a.loadFromPackage=function(t){this._contentItem=ot.getItemByURL(t),null!=this._contentItem?(this._contentItem.load(),this._autoSize&&this.setSize(this._contentItem.width,this._contentItem.height),0==this._contentItem.type?null==this._contentItem.texture?this.setErrorState():(this._content instanceof fairygui.display.Image?this._displayObject.addChild(this._content):(this._content=new zt,this._displayObject.addChild(this._content)),this._content.tex=this._contentItem.texture,this._content.scale9Grid=this._contentItem.scale9Grid,this._content.scaleByTile=this._contentItem.scaleByTile,this._content.tileGridIndice=this._contentItem.tileGridIndice,this._contentSourceWidth=this._contentItem.width,this._contentSourceHeight=this._contentItem.height,this.updateLayout()):2==this._contentItem.type?(this._content instanceof fairygui.display.MovieClip?this._displayObject.addChild(this._content):(this._content=new Gt,this._displayObject.addChild(this._content)),this._contentSourceWidth=this._contentItem.width,this._contentSourceHeight=this._contentItem.height,this._content.interval=this._contentItem.interval,this._content.swing=this._contentItem.swing,this._content.repeatDelay=this._contentItem.repeatDelay,this._content.frames=this._contentItem.frames,this._content.boundsRect=new v(0,0,this._contentSourceWidth,this._contentSourceHeight),this.updateLayout()):this.setErrorState()):this.setErrorState()},a.loadExternal=function(){I.inst.load(this._url,f.create(this,this.__getResCompleted))},a.freeExternal=function(t){},a.onExternalLoadSuccess=function(t){this._content instanceof fairygui.display.Image?this._displayObject.addChild(this._content):(this._content=new zt,this._displayObject.addChild(this._content)),this._content.tex=t,this._content.scale9Grid=null,this._content.scaleByTile=!1,this._contentSourceWidth=t.width,this._contentSourceHeight=t.height,this.updateLayout()},a.onExternalLoadFailed=function(){this.setErrorState()},a.__getResCompleted=function(t){null!=t?this.onExternalLoadSuccess(t):this.onExternalLoadFailed()},a.setErrorState=function(){this._showErrorSign&&(null==this._errorSign&&null!=st.loaderErrorSign&&(this._errorSign=fairygui.GLoader._errorSignPool.getObject(st.loaderErrorSign)),null!=this._errorSign&&(this._errorSign.setSize(this.width,this.height),this._displayObject.addChild(this._errorSign.displayObject)))},a.clearErrorState=function(){null!=this._errorSign&&(this._displayObject.removeChild(this._errorSign.displayObject),fairygui.GLoader._errorSignPool.returnObject(this._errorSign),this._errorSign=null)},a.updateLayout=function(){if(null==this._content)return void(this._autoSize&&(this._updatingLayout=!0,this.setSize(50,30),this._updatingLayout=!1));if(this._content.x=0,this._content.y=0,this._content.scaleX=1,this._content.scaleY=1,this._contentWidth=this._contentSourceWidth,this._contentHeight=this._contentSourceHeight,!this._autoSize||(this._updatingLayout=!0,0==this._contentWidth&&(this._contentWidth=50),0==this._contentHeight&&(this._contentHeight=30),this.setSize(this._contentWidth,this._contentHeight),this._updatingLayout=!1,this._contentWidth!=this._width||this._contentHeight!=this._height)){var t=1,e=1;0!=this._fill&&(t=this.width/this._contentSourceWidth,e=this.height/this._contentSourceHeight,(1!=t||1!=e)&&(2==this._fill?t=e:3==this._fill?e=t:1==this._fill&&(t>e?t=e:e=t),this._contentWidth=this._contentSourceWidth*t,this._contentHeight=this._contentSourceHeight*e)),this._content instanceof fairygui.display.Image?this._content.scaleTexture(t,e):this._content.scale(t,e),"center"==this._align?this._content.x=Math.floor((this.width-this._contentWidth)/2):"right"==this._align&&(this._content.x=this.width-this._contentWidth),"middle"==this._valign?this._content.y=Math.floor((this.height-this._contentHeight)/2):"bottom"==this._valign&&(this._content.y=this.height-this._contentHeight)}},a.clearContent=function(){if(this.clearErrorState(),null!=this._content&&null!=this._content.parent&&this._displayObject.removeChild(this._content),null==this._contentItem&&this._content instanceof fairygui.display.Image){var t=this._content.tex;null!=t&&this.freeExternal(t)}this._contentItem=null},a.handleSizeChanged=function(){t.prototype.handleSizeChanged.call(this),this._updatingLayout||this.updateLayout()},a.setup_beforeAdd=function(e){t.prototype.setup_beforeAdd.call(this,e);var i;i=e.getAttribute("url"),i&&(this._url=i),i=e.getAttribute("align"),i&&(this._align=i),i=e.getAttribute("vAlign"),i&&(this._valign=i),i=e.getAttribute("fill"),i&&(this._fill=j.parse(i)),this._autoSize="true"==e.getAttribute("autoSize"),i=e.getAttribute("errorSign"),i&&(this._showErrorSign="true"==i),this._playing="false"!=e.getAttribute("playing"),i=e.getAttribute("color"),i&&(this.color=i),this._url&&this.loadContent()},s(0,a,"frame",function(){return this._frame},function(t){this._frame!=t&&(this._frame=t,this._content instanceof fairygui.display.MovieClip&&(this._content.currentFrame=t),this.updateGear(5))}),s(0,a,"url",function(){return this._url},function(t){this._url!=t&&(this._url=t,this.loadContent(),this.updateGear(7))}),s(0,a,"align",function(){return this._align},function(t){this._align!=t&&(this._align=t,this.updateLayout())}),s(0,a,"color",function(){return this._color},function(t){this._color!=t&&(this._color=t,this.updateGear(4),this.applyColor())}),s(0,a,"fill",function(){return this._fill},function(t){this._fill!=t&&(this._fill=t,this.updateLayout())}),s(0,a,"verticalAlign",function(){return this._valign},function(t){this._valign!=t&&(this._valign=t,this.updateLayout())}),s(0,a,"icon",function(){return this._url},function(t){this.url=t}),s(0,a,"showErrorSign",function(){return this._showErrorSign},function(t){this._showErrorSign=t}),s(0,a,"autoSize",function(){return this._autoSize},function(t){this._autoSize!=t&&(this._autoSize=t,this.updateLayout())}),s(0,a,"playing",function(){return this._playing},function(t){this._playing!=t&&(this._playing=t,this._content instanceof fairygui.display.MovieClip&&(this._content.playing=t),this.updateGear(5))}),s(0,a,"content",function(){return this._content}),n(e,["_errorSignPool",function(){return this._errorSignPool=new H}]),e}(k),Dt=function(t){function e(){this.movieClip=null,e.__super.call(this),this._sizeImplType=1}r(e,"fairygui.GMovieClip",t);var n=e.prototype;return i.imps(n,{"fairygui.IAnimationGear":!0,"fairygui.IColorGear":!0}),n.createDisplayObject=function(){this._displayObject=this.movieClip=new Gt,this.movieClip.mouseEnabled=!1,this._displayObject.$owner=this},n.setPlaySettings=function(t,e,i,n,r){void 0===t&&(t=0),void 0===e&&(e=-1),void 0===i&&(i=0),void 0===n&&(n=-1),this.movieClip.setPlaySettings(t,e,i,n,r)},n.constructFromResource=function(){this.sourceWidth=this.packageItem.width,this.sourceHeight=this.packageItem.height,this.initWidth=this.sourceWidth,this.initHeight=this.sourceHeight,this.setSize(this.sourceWidth,this.sourceHeight),this.packageItem.load(),this.movieClip.interval=this.packageItem.interval,this.movieClip.swing=this.packageItem.swing,this.movieClip.repeatDelay=this.packageItem.repeatDelay,this.movieClip.frames=this.packageItem.frames,this.movieClip.boundsRect=new v(0,0,this.sourceWidth,this.sourceHeight)},n.setup_beforeAdd=function(e){t.prototype.setup_beforeAdd.call(this,e);var i;i=e.getAttribute("frame"),i&&(this.movieClip.currentFrame=parseInt(i)),i=e.getAttribute("playing"),this.movieClip.playing="false"!=i,i=e.getAttribute("color"),i&&(this.color=i)},s(0,n,"color",function(){return"#FFFFFF"},function(t){}),s(0,n,"playing",function(){return this.movieClip.playing},function(t){this.movieClip.playing!=t&&(this.movieClip.playing=t,this.updateGear(5))}),s(0,n,"frame",function(){return this.movieClip.currentFrame},function(t){this.movieClip.currentFrame!=t&&(this.movieClip.currentFrame=t,this.updateGear(5))}),e}(k),Rt=function(t){function e(){this.textField=null,this._font=null,this._color=null,this._text=null,this._ubbEnabled=!1,this._singleLine=!1,this._letterSpacing=0,this._autoSize=0,this._widthAutoSize=!1,this._heightAutoSize=!1,this._updatingSize=!1,this._textWidth=0,this._textHeight=0,this._bitmapFont=null,this._lines=null,e.__super.call(this),this._text="",this._color="#000000",this.textField.align="left",this.textField.font=st.defaultFont,this._autoSize=1,this._widthAutoSize=this._heightAutoSize=!0,this.textField._sizeDirty=!1}var n,a;r(e,"fairygui.GBasicTextField",t);var o=e.prototype;return o.createDisplayObject=function(){this._displayObject=this.textField=new a(this),this._displayObject.$owner=this,this._displayObject.mouseEnabled=!1},o.setAutoSize=function(t){this._autoSize=t,this._widthAutoSize=1==t,this._heightAutoSize=1==t||2==t,this.textField.wordWrap=!this._widthAutoSize,this._underConstruct||(this._heightAutoSize?this._widthAutoSize||(this.textField.width=this.width):this.textField.size(this.width,this.height))},o.ensureSizeCorrect=function(){!this._underConstruct&&this.textField._isChanged&&this.textField.typeset()},o.typeset=function(){null!=this._bitmapFont?this.renderWithBitmapFont():(this._widthAutoSize||this._heightAutoSize)&&this.updateSize()},o.updateSize=function(){this._textWidth=Math.ceil(this.textField.textWidth),this._textHeight=Math.ceil(this.textField.textHeight);var t=NaN,e=0;this._widthAutoSize?(t=this._textWidth,this.textField.width!=t&&(this.textField.width=t,"left"!=this.textField.align&&this.textField.baseTypeset())):t=this.width,this._heightAutoSize?(e=this._textHeight,this._widthAutoSize||this.textField.height!=this._textHeight&&(this.textField.height=this._textHeight)):(e=this.height,this._textHeight>e&&(this._textHeight=e),this.textField.height!=this._textHeight&&(this.textField.height=this._textHeight)),this._updatingSize=!0,this.setSize(t,e),this._updatingSize=!1},o.renderWithBitmapFont=function(){var t=this._displayObject.graphics;t.clear(),this._lines?n.returnList(this._lines):this._lines=[];var e,i=this.letterSpacing,r=this.leading-1,s=this.width-4,a=0,o=0,h=0,l=0,u=0,c=0,_=0,d=0,f=0,p="",m=2,g=!this._widthAutoSize&&!this._singleLine,y=this.fontSize,v=this._bitmapFont.resizable?y/this._bitmapFont.size:1;this._textWidth=0,this._textHeight=0;for(var x=this._text.length,b=0;x>b;++b){var w=this._text.charAt(b),S=w.charCodeAt(0);if(10!=S){if(S>=65&&90>=S||S>=97&&122>=S?(0==c&&(_=a),c++):(c>0&&(d=a),c=0),32==S)l=Math.ceil(y/2),u=y;else{var C=this._bitmapFont.glyphs[w];C?(l=Math.ceil(C.advance*v),u=Math.ceil(C.lineHeight*v)):(l=0,u=0)}if(u>h&&(h=u),u>o&&(o=u),0!=a&&(a+=i),a+=l,!g||s>=a)p+=w;else{if(e=n.borrow(),e.height=o,e.textHeight=h,0==p.length)e.text=w;else if(c>0&&d>0){p+=w;var T=p.length-c;e.text=lt.trimRight(p.substr(0,T)),e.width=d,p=p.substr(T),a-=_}else e.text=p,e.width=a-(l+i),p=w,a=l,o=u,h=u;e.y=m,m+=e.height+r,e.width>this._textWidth&&(this._textWidth=e.width),c=0,_=0,d=0,this._lines.push(e)}}else p+=w,e=n.borrow(),e.width=a,0==h&&(0==f&&(f=y),0==o&&(o=f),h=o),e.height=o,f=o,e.textHeight=h,e.text=p,e.y=m,m+=e.height+r,e.width>this._textWidth&&(this._textWidth=e.width),this._lines.push(e),p="",a=0,o=0,h=0,c=0,_=0,d=0}p.length>0&&(e=n.borrow(),e.width=a,0==o&&(o=f),0==h&&(h=o),e.height=o,e.textHeight=h,e.text=p,e.y=m,e.width>this._textWidth&&(this._textWidth=e.width),this._lines.push(e)),this._textWidth>0&&(this._textWidth+=4);var E=this._lines.length;0==E?this._textHeight=0:(e=this._lines[this._lines.length-1],this._textHeight=e.y+e.height+2);var M=NaN,I=0;if(M=this._widthAutoSize?0==this._textWidth?0:this._textWidth:this.width,I=this._heightAutoSize?0==this._textHeight?0:this._textHeight:this.height,this._updatingSize=!0,this.setSize(M,I),this._updatingSize=!1,this.doAlign(),0!=M&&0!=I){var A=2,D=0,R=0;s=this.width-4;for(var P=this._lines.length,L=0;P>L;L++){e=this._lines[L],A=2,D="center"==this.align?(s-e.width)/2:"right"==this.align?s-e.width:0,x=e.text.length;for(var O=0;x>O;O++)w=e.text.charAt(O),S=w.charCodeAt(0),10!=S&&(32!=S?(C=this._bitmapFont.glyphs[w],null!=C?(R=(e.height+e.textHeight)/2-Math.ceil(C.lineHeight*v),t.drawTexture(C.texture,A+D+Math.ceil(C.offsetX*v),e.y+R+Math.ceil(C.offsetY*v),C.texture.width*v,C.texture.height*v),A+=i+Math.ceil(C.advance*v)):A+=i):A+=this._letterSpacing+Math.ceil(y/2))}}},o.handleSizeChanged=function(){this._updatingSize||(this._underConstruct?this.textField.size(this.width,this.height):null!=this._bitmapFont?this._widthAutoSize?this.doAlign():this.textField.setChanged():this._widthAutoSize||(this._heightAutoSize?this.textField.width=this.width:this.textField.size(this.width,this.height)))},o.handleGrayedChanged=function(){fairygui.GObject.prototype.handleGrayedChanged.call(this),this.grayed?this.textField.color="#AAAAAA":this.textField.color=this._color},o.doAlign=function(){if("top"==this.valign||0==this._textHeight)this._yOffset=2;else{var t=this.height-this._textHeight;0>t&&(t=0),"middle"==this.valign?this._yOffset=Math.floor(t/2):this._yOffset=Math.floor(t)}this.handleXYChanged()},o.setup_beforeAdd=function(e){t.prototype.setup_beforeAdd.call(this,e);var i;i=e.getAttribute("autoSize"),i&&this.setAutoSize(A.parse(i))},s(0,o,"bold",function(){return this.textField.bold},function(t){this.textField.bold=t}),s(0,o,"letterSpacing",function(){return this._letterSpacing},function(t){this._letterSpacing=t}),s(0,o,"align",function(){return this.textField.align},function(t){this.textField.align=t}),s(0,o,"text",function(){return this._text},function(t){this._text=t,null==this._text&&(this._text=""),null==this._bitmapFont?(this._widthAutoSize&&(this.textField.width=1e4),this._ubbEnabled?this.textField.text=lt.removeUBB(lt.encodeHTML(this._text)):this.textField.text=this._text):(this.textField.text="",this.textField.setChanged()),this.parent&&this.parent._underConstruct&&this.textField.typeset()}),s(0,o,"color",function(){return this._color},function(t){this._color!=t&&(this._color=t,this._gearColor.controller&&this._gearColor.updateState(),this.grayed?this.textField.color="#AAAAAA":this.textField.color=this._color)}),s(0,o,"font",function(){return this.textField.font},function(t){this._font=t,lt.startsWith(this._font,"ui://")?(this._bitmapFont=ot.getBitmapFontByURL(this._font),this.textField.setChanged()):(this._bitmapFont=null,this._font?this.textField.font=this._font:this.textField.font=st.defaultFont)}),s(0,o,"leading",function(){return this.textField.leading},function(t){this.textField.leading=t}),s(0,o,"fontSize",function(){return this.textField.fontSize},function(t){this.textField.fontSize=t}),s(0,o,"valign",function(){return this.textField.valign},function(t){this.textField.valign=t}),s(0,o,"italic",function(){return this.textField.italic},function(t){this.textField.italic=t}),s(0,o,"underline",function(){return this.textField.underline},function(t){this.textField.underline=t}),s(0,o,"singleLine",function(){return this._singleLine},function(t){this._singleLine=t}),s(0,o,"stroke",function(){return this.textField.stroke},function(t){this.textField.stroke=t}),s(0,o,"strokeColor",function(){return this.textField.strokeColor},function(t){this.textField.strokeColor=t,this.updateGear(4)}),s(0,o,"ubbEnabled",function(){return this._ubbEnabled},function(t){this._ubbEnabled=t}),s(0,o,"autoSize",function(){return this._autoSize},function(t){this._autoSize!=t&&this.setAutoSize(t)}),s(0,o,"textWidth",function(){return this.textField._isChanged&&this.textField.typeset(),this._textWidth}),e.GUTTER_X=2,e.GUTTER_Y=2,e.__init$=function(){n=function(){function t(){this.width=0,this.height=0,this.textHeight=0,this.text=null,this.y=0}return r(t,""),t.borrow=function(){if(t.pool.length){var e=t.pool.pop();return e.width=0,e.height=0,e.textHeight=0,e.text=null,e.y=0,e}return new t},t.returns=function(e){t.pool.push(e)},t.returnList=function(e){for(var i=e.length,n=0;i>n;n++){var r=e[n];t.pool.push(r)}e.length=0},t.pool=[],t}(),a=function(t){function e(t){this._owner=null,this._lock=!1,this._sizeDirty=!1,e.__super.call(this),this._owner=t}r(e,"",t);var n=e.prototype;return n.baseTypeset=function(){this._lock=!0,this.typeset(),this._lock=!1},n.typeset=function(){this._sizeDirty=!0,t.prototype.typeset.call(this),this._lock||this._owner.typeset(),this._isChanged&&(i.timer.clear(this,this.typeset),this._isChanged=!1),this._sizeDirty=!1},n.setChanged=function(){this.isChanged=!0},s(0,n,"isChanged",null,function(e){e&&!this._sizeDirty&&0!=this._owner.autoSize&&this._owner.parent&&(this._sizeDirty=!0,this.event("fui_size_delay_change")),t.prototype._$set_isChanged.call(this,e)}),e}(S)},e}(mt),Pt=function(t){function e(){this._titleObject=null,this._iconObject=null,this._relatedController=null,this._mode=0,this._selected=!1,this._title=null,this._selectedTitle=null,this._icon=null,this._selectedIcon=null,this._sound=null,this._soundVolumeScale=0,this._pageOption=null,this._buttonController=null,this._changeStateOnClick=!1,this._linkedPopup=null,this._downEffect=0,this._downEffectValue=0,this._downScaled=!1,this._down=!1,this._over=!1,e.__super.call(this),this._mode=0,this._title="",this._icon="",this._sound=st.buttonSound,this._soundVolumeScale=st.buttonSoundVolumeScale,this._pageOption=new K,this._changeStateOnClick=!0,this._downEffectValue=.8}r(e,"fairygui.GButton",t);var n=e.prototype;return n.fireClick=function(t){void 0===t&&(t=!0),t&&0==this._mode&&(this.setState("over"),i.timer.once(100,this,this.setState,["down"]),i.timer.once(200,this,this.setState,["up"])),this.__click(V.createEvent("click",this.displayObject));
},n.setState=function(t){if(this._buttonController&&(this._buttonController.selectedPage=t),1==this._downEffect){var e=this.numChildren;if("down"==t||"selectedOver"==t||"selectedDisabled"==t)for(var i=255*this._downEffectValue,n=E.toHexColor((i<<16)+(i<<8)+i),r=0;e>r;r++){var s=this.getChildAt(r);(s instanceof fairygui.GImage||s instanceof fairygui.GLoader||s instanceof fairygui.GMovieClip)&&(s.color=n)}else for(r=0;e>r;r++)s=this.getChildAt(r),(s instanceof fairygui.GImage||s instanceof fairygui.GLoader||s instanceof fairygui.GMovieClip)&&(s.color="#FFFFFF")}else 2==this._downEffect&&("down"==t||"selectedOver"==t||"selectedDisabled"==t?this._downScaled||(this.setScale(this.scaleX*this._downEffectValue,this.scaleY*this._downEffectValue),this._downScaled=!0):this._downScaled&&(this.setScale(this.scaleX/this._downEffectValue,this.scaleY/this._downEffectValue),this._downScaled=!1))},n.handleControllerChanged=function(e){t.prototype.handleControllerChanged.call(this,e),this._relatedController==e&&(this.selected=this._pageOption.id==e.selectedPageId)},n.handleGrayedChanged=function(){this._buttonController&&this._buttonController.hasPage("disabled")?this.grayed?this._selected&&this._buttonController.hasPage("selectedDisabled")?this.setState("selectedDisabled"):this.setState("disabled"):this._selected?this.setState("down"):this.setState("up"):t.prototype.handleGrayedChanged.call(this)},n.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),e=lt.findChildNode(e,"Button");var i;i=e.getAttribute("mode"),i&&(this._mode=D.parse(i)),i=e.getAttribute("sound"),i&&(this._sound=i),i=e.getAttribute("volume"),i&&(this._soundVolumeScale=parseInt(i)/100),i=e.getAttribute("downEffect"),i&&(this._downEffect="dark"==i?1:"scale"==i?2:0,i=e.getAttribute("downEffectValue"),this._downEffectValue=parseFloat(i),2==this._downEffect&&this.setPivot(.5,.5)),this._buttonController=this.getController("button"),this._titleObject=this.getChild("title"),this._iconObject=this.getChild("icon"),null!=this._titleObject&&(this._title=this._titleObject.text),null!=this._iconObject&&(this._icon=this._iconObject.icon),0==this._mode&&this.setState("up"),this.on("mouseover",this,this.__rollover),this.on("mouseout",this,this.__rollout),this.on("mousedown",this,this.__mousedown),this.on("click",this,this.__click)},n.setup_afterAdd=function(e){if(t.prototype.setup_afterAdd.call(this,e),e=lt.findChildNode(e,"Button")){var i;i=e.getAttribute("title"),i&&(this.title=i),i=e.getAttribute("icon"),i&&(this.icon=i),i=e.getAttribute("selectedTitle"),i&&(this.selectedTitle=i),i=e.getAttribute("selectedIcon"),i&&(this.selectedIcon=i),i=e.getAttribute("titleColor"),i&&(this.titleColor=i),i=e.getAttribute("titleFontSize"),i&&(this.titleFontSize=parseInt(i)),i=e.getAttribute("sound"),null!=i&&(this._sound=i),i=e.getAttribute("volume"),i&&(this._soundVolumeScale=parseInt(i)/100),i=e.getAttribute("controller"),i?this._relatedController=this._parent.getController(i):this._relatedController=null,this._pageOption.id=e.getAttribute("page"),this.selected="true"==e.getAttribute("checked")}},n.__rollover=function(){this._buttonController&&this._buttonController.hasPage("over")&&(this._over=!0,this._down||this.grayed&&this._buttonController.hasPage("disabled")||this.setState(this._selected?"selectedOver":"over"))},n.__rollout=function(){this._buttonController&&this._buttonController.hasPage("over")&&(this._over=!1,this._down||this.grayed&&this._buttonController.hasPage("disabled")||this.setState(this._selected?"down":"up"))},n.__mousedown=function(t){this._down=!0,Bt.inst.checkPopups(t.target),i.stage.on("mouseup",this,this.__mouseup),0==this._mode&&(this.grayed&&this._buttonController&&this._buttonController.hasPage("disabled")?this.setState("selectedDisabled"):this.setState("down")),null!=this._linkedPopup&&(this._linkedPopup instanceof fairygui.Window?this._linkedPopup.toggleStatus():this.root.togglePopup(this._linkedPopup,this))},n.__mouseup=function(){this._down&&(i.stage.off("mouseup",this,this.__mouseup),this._down=!1,0==this._mode&&(this.grayed&&this._buttonController&&this._buttonController.hasPage("disabled")?this.setState("disabled"):this._over?this.setState("over"):this.setState("up")))},n.__click=function(t){if(this._sound){var e=ot.getItemByURL(this._sound);e?Bt.inst.playOneShotSound(e.owner.getItemAssetURL(e)):Bt.inst.playOneShotSound(this._sound)}1==this._mode?this._changeStateOnClick&&(this.selected=!this._selected,V.dispatch("fui_state_changed",this.displayObject,t)):2==this._mode?this._changeStateOnClick&&!this._selected&&(this.selected=!0,V.dispatch("fui_state_changed",this.displayObject,t)):this._relatedController&&(this._relatedController.selectedPageId=this._pageOption.id)},s(0,n,"relatedController",function(){return this._relatedController},function(t){t!=this._relatedController&&(this._relatedController=t,this._pageOption.controller=t,this._pageOption.clear())}),s(0,n,"icon",function(){return this._icon},function(t){this._icon=t,t=this._selected&&this._selectedIcon?this._selectedIcon:this._icon,null!=this._iconObject&&(this._iconObject.icon=t),this.updateGear(7)}),s(0,n,"titleFontSize",function(){return this._titleObject instanceof fairygui.GTextField?this._titleObject.fontSize:this._titleObject instanceof fairygui.GLabel?this._titleObject.titleFontSize:this._titleObject instanceof fairygui.GButton?this._titleObject.titleFontSize:0},function(t){this._titleObject instanceof fairygui.GTextField?this._titleObject.fontSize=t:this._titleObject instanceof fairygui.GLabel?this._titleObject.titleFontSize=t:this._titleObject instanceof fairygui.GButton&&(this._titleObject.titleFontSize=t)}),s(0,n,"selectedIcon",function(){return this._selectedIcon},function(t){this._selectedIcon=t,t=this._selected&&this._selectedIcon?this._selectedIcon:this._icon,null!=this._iconObject&&(this._iconObject.icon=t)}),s(0,n,"title",function(){return this._title},function(t){this._title=t,this._titleObject&&(this._titleObject.text=this._selected&&this._selectedTitle?this._selectedTitle:this._title),this.updateGear(6)}),s(0,n,"text",function(){return this.title},function(t){this.title=t}),s(0,n,"selectedTitle",function(){return this._selectedTitle},function(t){this._selectedTitle=t,this._titleObject&&(this._titleObject.text=this._selected&&this._selectedTitle?this._selectedTitle:this._title)}),s(0,n,"soundVolumeScale",function(){return this._soundVolumeScale},function(t){this._soundVolumeScale=t}),s(0,n,"sound",function(){return this._sound},function(t){this._sound=t}),s(0,n,"titleColor",function(){return this._titleObject instanceof fairygui.GTextField?this._titleObject.color:this._titleObject instanceof fairygui.GLabel?this._titleObject.titleColor:this._titleObject instanceof fairygui.GButton?this._titleObject.titleColor:"#000000"},function(t){this._titleObject instanceof fairygui.GTextField?this._titleObject.color=t:this._titleObject instanceof fairygui.GLabel?this._titleObject.titleColor=t:this._titleObject instanceof fairygui.GButton&&(this._titleObject.titleColor=t)}),s(0,n,"selected",function(){return this._selected},function(t){if(0!=this._mode&&this._selected!=t){if(this._selected=t,this.grayed&&this._buttonController&&this._buttonController.hasPage("disabled")?this._selected?this.setState("selectedDisabled"):this.setState("disabled"):this._selected?this.setState(this._over?"selectedOver":"down"):this.setState(this._over?"over":"up"),this._selectedTitle&&this._titleObject&&(this._titleObject.text=this._selected?this._selectedTitle:this._title),this._selectedIcon){var e=this._selected?this._selectedIcon:this._icon;null!=this._iconObject&&(this._iconObject.icon=e)}this._relatedController&&this._parent&&!this._parent._buildingDisplayList&&(this._selected?(this._relatedController.selectedPageId=this._pageOption.id,this._relatedController._autoRadioGroupDepth&&this._parent.adjustRadioGroupDepth(this,this._relatedController)):1==this._mode&&this._relatedController.selectedPageId==this._pageOption.id&&(this._relatedController.oppositePageId=this._pageOption.id))}}),s(0,n,"mode",function(){return this._mode},function(t){this._mode!=t&&(0==t&&(this.selected=!1),this._mode=t)}),s(0,n,"pageOption",function(){return this._pageOption}),s(0,n,"changeStateOnClick",function(){return this._changeStateOnClick},function(t){this._changeStateOnClick=t}),s(0,n,"linkedPopup",function(){return this._linkedPopup},function(t){this._linkedPopup=t}),e.UP="up",e.DOWN="down",e.OVER="over",e.SELECTED_OVER="selectedOver",e.DISABLED="disabled",e.SELECTED_DISABLED="selectedDisabled",e}(gt),Lt=function(t){function e(){this.dropdown=null,this._titleObject=null,this._iconObject=null,this._list=null,this._items=null,this._icons=null,this._values=null,this._popupDownward=null,this._visibleItemCount=0,this._itemsUpdated=!1,this._selectedIndex=0,this._buttonController=null,this._selectionController=null,this._down=!1,this._over=!1,e.__super.call(this),this._visibleItemCount=st.defaultComboBoxVisibleItemCount,this._itemsUpdated=!0,this._selectedIndex=-1,this._items=[],this._values=[]}r(e,"fairygui.GComboBox",t);var n=e.prototype;return n.setState=function(t){this._buttonController&&(this._buttonController.selectedPage=t)},n.handleControllerChanged=function(e){t.prototype.handleControllerChanged.call(this,e),this._selectionController==e&&(this.selectedIndex=e.selectedIndex)},n.updateSelectionController=function(){if(null!=this._selectionController&&!this._selectionController.changing&&this._selectedIndex<this._selectionController.pageCount){var t=this._selectionController;this._selectionController=null,t.selectedIndex=this._selectedIndex,this._selectionController=t}},n.dispose=function(){this.dropdown&&(this.dropdown.dispose(),this.dropdown=null),this._selectionController=null,t.prototype.dispose.call(this)},n.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),e=lt.findChildNode(e,"ComboBox");var i;if(this._buttonController=this.getController("button"),this._titleObject=this.getChild("title"),this._iconObject=this.getChild("icon"),i=e.getAttribute("dropdown")){if(this.dropdown=ot.createObjectFromURL(i),!this.dropdown)return void g.print("下拉框必须为元件");if(this.dropdown.name="this._dropdownObject",this._list=this.dropdown.getChild("list").asList,null==this._list)return void g.print(this.resourceURL+": 下拉框的弹出元件里必须包含名为list的列表");this._list.on("fui_click_item",this,this.__clickItem),this._list.addRelation(this.dropdown,14),this._list.removeRelation(this.dropdown,15),this.dropdown.addRelation(this._list,15),this.dropdown.removeRelation(this._list,14),this.dropdown.displayObject.on("undisplay",this,this.__popupWinClosed)}this.on("mouseover",this,this.__rollover),this.on("mouseout",this,this.__rollout),this.on("mousedown",this,this.__mousedown)},n.setup_afterAdd=function(e){if(t.prototype.setup_afterAdd.call(this,e),e=lt.findChildNode(e,"ComboBox")){var i;i=e.getAttribute("titleColor"),i&&(this.titleColor=i),i=e.getAttribute("visibleItemCount"),i&&(this._visibleItemCount=parseInt(i));for(var n=e.childNodes,r=n.length,s=0;r>s;s++){var a=n[s];"item"==a.nodeName&&(this._items.push(a.getAttribute("title")),this._values.push(a.getAttribute("value")),i=a.getAttribute("icon"),i&&(this._icons||(this._icons=new Array(r)),this._icons[s]=i))}i=e.getAttribute("title"),i?(this.text=i,this._selectedIndex=this._items.indexOf(i)):this._items.length>0?(this._selectedIndex=0,this.text=this._items[0]):this._selectedIndex=-1,i=e.getAttribute("icon"),i&&(this.icon=i),i=e.getAttribute("direction"),i&&("up"==i?this._popupDownward=!1:"auto"==i&&(this._popupDownward=null)),i=e.getAttribute("selectionController"),i&&(this._selectionController=this.parent.getController(i))}},n.showDropdown=function(){if(this._itemsUpdated){this._itemsUpdated=!1,this._list.removeChildrenToPool();for(var t=this._items.length,e=0;t>e;e++){var i=this._list.addItemFromPool();i.name=e<this._values.length?this._values[e]:"",i.text=this._items[e],i.icon=null!=this._icons&&e<this._icons.length?this._icons[e]:null}this._list.resizeToFit(this._visibleItemCount)}this._list.selectedIndex=-1,this.dropdown.width=this.width,this.root.togglePopup(this.dropdown,this,this._popupDownward),this.dropdown.parent&&this.setState("down")},n.__popupWinClosed=function(){this._over?this.setState("over"):this.setState("up")},n.__clickItem=function(t,e){i.timer.callLater(this,this.__clickItem2,[this._list.getChildIndex(t),e])},n.__clickItem2=function(t,e){this.dropdown.parent instanceof fairygui.GRoot&&this.dropdown.parent.hidePopup(),this._selectedIndex=-1,this.selectedIndex=t,V.dispatch("fui_state_changed",this.displayObject,e)},n.__rollover=function(){this._over=!0,this._down||this.dropdown&&this.dropdown.parent||this.setState("over")},n.__rollout=function(){this._over=!1,this._down||this.dropdown&&this.dropdown.parent||this.setState("up")},n.__mousedown=function(t){t.target instanceof laya.display.Input||(this._down=!0,Bt.inst.checkPopups(t.target),i.stage.on("mouseup",this,this.__mouseup),this.dropdown&&this.showDropdown())},n.__mouseup=function(){this._down&&(this._down=!1,i.stage.off("mouseup",this,this.__mouseup),this.dropdown&&!this.dropdown.parent&&(this._over?this.setState("over"):this.setState("up")))},s(0,n,"text",function(){return this._titleObject?this._titleObject.text:null},function(t){this._titleObject&&(this._titleObject.text=t),this.updateGear(6)}),s(0,n,"titleColor",function(){return this._titleObject instanceof fairygui.GTextField?this._titleObject.color:this._titleObject instanceof fairygui.GLabel?this._titleObject.titleColor:this._titleObject instanceof fairygui.GButton?this._titleObject.titleColor:"#000000"},function(t){this._titleObject instanceof fairygui.GTextField?this._titleObject.color=t:this._titleObject instanceof fairygui.GLabel?this._titleObject.titleColor=t:this._titleObject instanceof fairygui.GButton&&(this._titleObject.titleColor=t)}),s(0,n,"selectedIndex",function(){return this._selectedIndex},function(t){this._selectedIndex!=t&&(this._selectedIndex=t,this._selectedIndex>=0&&this._selectedIndex<this._items.length?(this.text=this._items[this._selectedIndex],null!=this._icons&&this._selectedIndex<this._icons.length&&(this.icon=this._icons[this._selectedIndex])):(this.text="",null!=this._icons&&(this.icon=null)),this.updateSelectionController())}),s(0,n,"icon",function(){return this._iconObject?this._iconObject.icon:null},function(t){this._iconObject&&(this._iconObject.icon=t),this.updateGear(7)}),s(0,n,"icons",function(){return this._icons},function(t){this._icons=t,null!=this._icons&&-1!=this._selectedIndex&&this._selectedIndex<this._icons.length&&(this.icon=this._icons[this._selectedIndex])}),s(0,n,"selectionController",function(){return this._selectionController},function(t){this._selectionController=t}),s(0,n,"visibleItemCount",function(){return this._visibleItemCount},function(t){this._visibleItemCount=t}),s(0,n,"popupDownward",function(){return this._popupDownward},function(t){this._popupDownward=t}),s(0,n,"values",function(){return this._values},function(t){t?this._values=t.concat():this._values.length=0}),s(0,n,"items",function(){return this._items},function(t){t?this._items=t.concat():this._items.length=0,this._items.length>0?(this._selectedIndex>=this._items.length?this._selectedIndex=this._items.length-1:-1==this._selectedIndex&&(this._selectedIndex=0),this.text=this._items[this._selectedIndex],null!=this._icons&&this._selectedIndex<this._icons.length&&(this.icon=this._icons[this._selectedIndex])):(this.text="",null!=this._icons&&(this.icon=null),this._selectedIndex=-1),this._itemsUpdated=!0}),s(0,n,"value",function(){return this._values[this._selectedIndex]},function(t){this.selectedIndex=this._values.indexOf(t)}),e}(gt),Ot=function(t){function e(){this._titleObject=null,this._iconObject=null,e.__super.call(this)}r(e,"fairygui.GLabel",t);var n=e.prototype;return i.imps(n,{"fairygui.IColorGear":!0}),n.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),this._titleObject=this.getChild("title"),this._iconObject=this.getChild("icon")},n.setup_afterAdd=function(e){if(t.prototype.setup_afterAdd.call(this,e),e=lt.findChildNode(e,"Label")){var i;i=e.getAttribute("title"),i&&(this.text=i),i=e.getAttribute("icon"),i&&(this.icon=i),i=e.getAttribute("titleColor"),i&&(this.titleColor=i),i=e.getAttribute("titleFontSize"),i&&(this.titleFontSize=parseInt(i)),this._titleObject instanceof fairygui.GTextInput&&(i=e.getAttribute("prompt"),i&&(this._titleObject.promptText=i),i=e.getAttribute("maxLength"),i&&(this._titleObject.maxLength=parseInt(i)),i=e.getAttribute("restrict"),i&&(this._titleObject.restrict=i),i=e.getAttribute("password"),i&&(this._titleObject.password="true"==i),i=e.getAttribute("keyboardType"),"4"==i?this._titleObject.keyboardType="number":"3"==i&&(this._titleObject.keyboardType="url"))}},s(0,n,"color",function(){return this.titleColor},function(t){this.titleColor=t}),s(0,n,"icon",function(){return null!=this._iconObject?this._iconObject.icon:null},function(t){null!=this._iconObject&&(this._iconObject.icon=t),this.updateGear(7)}),s(0,n,"editable",function(){return this._titleObject&&this._titleObject instanceof fairygui.GTextInput?this._titleObject.asTextInput.editable:!1},function(t){this._titleObject&&(this._titleObject.asTextInput.editable=t)}),s(0,n,"title",function(){return this._titleObject?this._titleObject.text:null},function(t){this._titleObject&&(this._titleObject.text=t),this.updateGear(6)}),s(0,n,"text",function(){return this.title},function(t){this.title=t}),s(0,n,"titleColor",function(){return this._titleObject instanceof fairygui.GTextField?this._titleObject.color:this._titleObject instanceof fairygui.GLabel?this._titleObject.titleColor:this._titleObject instanceof fairygui.GButton?this._titleObject.titleColor:"#000000"},function(t){this._titleObject instanceof fairygui.GTextField?this._titleObject.color=t:this._titleObject instanceof fairygui.GLabel?this._titleObject.titleColor=t:this._titleObject instanceof fairygui.GButton&&(this._titleObject.titleColor=t),this.updateGear(4)}),s(0,n,"titleFontSize",function(){return this._titleObject instanceof fairygui.GTextField?this._titleObject.fontSize:this._titleObject instanceof fairygui.GLabel?this._titleObject.titleFontSize:this._titleObject instanceof fairygui.GButton?this._titleObject.titleFontSize:0},function(t){this._titleObject instanceof fairygui.GTextField?this._titleObject.fontSize=t:this._titleObject instanceof fairygui.GLabel?this._titleObject.titleFontSize=t:this._titleObject instanceof fairygui.GButton&&(this._titleObject.titleFontSize=t)}),e}(gt),Nt=function(t){function e(){this.itemRenderer=null,this.itemProvider=null,this.scrollItemToViewOnClick=!1,this.foldInvisibleItems=!1,this._layout=0,this._lineCount=0,this._columnCount=0,this._lineGap=0,this._columnGap=0,this._defaultItem=null,this._autoResizeItem=!1,this._selectionMode=0,this._align=null,this._verticalAlign=null,this._selectionController=null,this._lastSelectedIndex=0,this._pool=null,this._virtual=!1,this._loop=!1,this._numItems=0,this._realNumItems=0,this._firstIndex=0,this._curLineItemCount=0,this._curLineItemCount2=0,this._itemSize=null,this._virtualListChanged=0,this._virtualItems=null,this._eventLocked=!1,e.__super.call(this),this._trackBounds=!0,this._pool=new H,this._layout=0,this._autoResizeItem=!0,this._lastSelectedIndex=-1,this._selectionMode=0,this.opaque=!0,this.scrollItemToViewOnClick=!0,this._align="left",this._verticalAlign="top",this._container=new w,this._displayObject.addChild(this._container)}var n;r(e,"fairygui.GList",t);var a=e.prototype;return a.dispose=function(){this._pool.clear(),t.prototype.dispose.call(this)},a.getFromPool=function(t){t||(t=this._defaultItem);var e=this._pool.getObject(t);return null!=e&&(e.visible=!0),e},a.returnToPool=function(t){t.displayObject.cacheAsBitmap=!1,this._pool.returnObject(t)},a.addChildAt=function(e,i){if(void 0===i&&(i=0),t.prototype.addChildAt.call(this,e,i),e instanceof fairygui.GButton){var n=e;n.selected=!1,n.changeStateOnClick=!1}return e.on("click",this,this.__clickItem),e},a.addItem=function(t){return t||(t=this._defaultItem),this.addChild(ot.createObjectFromURL(t))},a.addItemFromPool=function(t){return this.addChild(this.getFromPool(t))},a.removeChildAt=function(e,i){void 0===i&&(i=!1);var n=t.prototype.removeChildAt.call(this,e,i);return n.off("click",this,this.__clickItem),n},a.removeChildToPoolAt=function(e){void 0===e&&(e=0);var i=t.prototype.removeChildAt.call(this,e);this.returnToPool(i)},a.removeChildToPool=function(t){this.removeChild(t),this.returnToPool(t)},a.removeChildrenToPool=function(t,e){void 0===t&&(t=0),void 0===e&&(e=-1),(0>e||e>=this._children.length)&&(e=this._children.length-1);for(var i=t;e>=i;++i)this.removeChildToPoolAt(t)},a.getSelection=function(){for(var t=[],e=this._children.length,i=0;e>i;i++){var n=this._children[i];n instanceof fairygui.GButton&&n.selected&&t.push(this.childIndexToItemIndex(i))}return t},a.addSelection=function(t,e){if(void 0===e&&(e=!1),3!=this._selectionMode&&(this.checkVirtualList(),0==this._selectionMode&&this.clearSelection(),e&&this.scrollToView(t),t=this.itemIndexToChildIndex(t),!(0>t||t>=this._children.length))){var i=this.getChildAt(t);i instanceof fairygui.GButton&&!i.selected&&(i.selected=!0,this.updateSelectionController(t))}},a.removeSelection=function(t){if(void 0===t&&(t=0),3!=this._selectionMode&&(t=this.itemIndexToChildIndex(t),!(t>=this._children.length))){var e=this.getChildAt(t);e instanceof fairygui.GButton&&e.selected&&(e.selected=!1)}},a.clearSelection=function(){for(var t=this._children.length,e=0;t>e;e++){var i=this._children[e];i instanceof fairygui.GButton&&(i.selected=!1)}},a.selectAll=function(){this.checkVirtualList();for(var t=this._children.length,e=-1,i=0;t>i;i++){var n=this._children[i];n instanceof fairygui.GButton&&(n.selected=!0,e=i)}-1!=e&&this.updateSelectionController(e)},a.selectNone=function(){this.checkVirtualList();for(var t=this._children.length,e=0;t>e;e++){var i=this._children[e];i instanceof fairygui.GButton&&(i.selected=!1)}},a.selectReverse=function(){for(var t=this._children.length,e=-1,i=0;t>i;i++){var n=this._children[i];n instanceof fairygui.GButton&&(n.selected=!n.selected,n.selected&&(e=i))}-1!=e&&this.updateSelectionController(e)},a.handleArrowKey=function(t){void 0===t&&(t=0);var e=this.selectedIndex;if(-1!=e)switch(t){case 1:if(0==this._layout||3==this._layout)e--,e>=0&&(this.clearSelection(),this.addSelection(e,!0));else if(2==this._layout||4==this._layout){for(var i=this._children[e],n=0,r=e-1;r>=0;r--){var s=this._children[r];if(s.y!=i.y){i=s;break}n++}for(;r>=0;r--)if(s=this._children[r],s.y!=i.y){this.clearSelection(),this.addSelection(r+n+1,!0);break}}break;case 3:if(1==this._layout||2==this._layout||4==this._layout)e++,e<this._children.length&&(this.clearSelection(),this.addSelection(e,!0));else if(3==this._layout){i=this._children[e],n=0;var a=this._children.length;for(r=e+1;a>r;r++){if(s=this._children[r],s.x!=i.x){i=s;break}n++}for(;a>r;r++)if(s=this._children[r],s.x!=i.x){this.clearSelection(),this.addSelection(r-n-1,!0);break}}break;case 5:if(0==this._layout||3==this._layout)e++,e<this._children.length&&(this.clearSelection(),this.addSelection(e,!0));else if(2==this._layout||4==this._layout){for(i=this._children[e],n=0,a=this._children.length,r=e+1;a>r;r++){if(s=this._children[r],s.y!=i.y){i=s;break}n++}for(;a>r;r++)if(s=this._children[r],s.y!=i.y){this.clearSelection(),this.addSelection(r-n-1,!0);break}}break;case 7:if(1==this._layout||2==this._layout||4==this._layout)e--,e>=0&&(this.clearSelection(),this.addSelection(e,!0));else if(3==this._layout){for(i=this._children[e],n=0,r=e-1;r>=0;r--){if(s=this._children[r],s.x!=i.x){i=s;break}n++}for(;r>=0;r--)if(s=this._children[r],s.x!=i.x){this.clearSelection(),this.addSelection(r+n+1,!0);break}}}},a.__clickItem=function(t){if(null==this._scrollPane||!this._scrollPane.isDragged){var e=k.cast(t.currentTarget);this.setSelectionOnEvent(e,t),this._scrollPane&&this.scrollItemToViewOnClick&&this._scrollPane.scrollToView(e,!0),this.displayObject.event("fui_click_item",[e,V.createEvent("fui_click_item",this.displayObject,t)])}},a.setSelectionOnEvent=function(t,e){if(t instanceof fairygui.GButton&&3!=this._selectionMode){var i=!1,n=t,r=this.getChildIndex(t);if(0==this._selectionMode)n.selected||(this.clearSelectionExcept(n),n.selected=!0);else if(e.shiftKey){if(!n.selected)if(-1!=this._lastSelectedIndex){var s=Math.min(this._lastSelectedIndex,r),a=Math.max(this._lastSelectedIndex,r);a=Math.min(a,this._children.length-1);for(var o=s;a>=o;o++){var h=this.getChildAt(o);h instanceof fairygui.GButton&&!h.selected&&(h.selected=!0)}i=!0}else n.selected=!0}else e.ctrlKey||2==this._selectionMode?n.selected=!n.selected:n.selected?this.clearSelectionExcept(n):(this.clearSelectionExcept(n),n.selected=!0);i||(this._lastSelectedIndex=r),n.selected&&this.updateSelectionController(r)}},a.clearSelectionExcept=function(t){for(var e=this._children.length,i=0;e>i;i++){var n=this._children[i];n instanceof fairygui.GButton&&n!=t&&n.selected&&(n.selected=!1)}},a.resizeToFit=function(t,e){void 0===t&&(t=1e6),void 0===e&&(e=0),this.ensureBoundsCorrect();var i=this.numItems;if(t>i&&(t=i),this._virtual){var n=Math.ceil(t/this._curLineItemCount);0==this._layout||2==this._layout?this.viewHeight=n*this._itemSize.y+Math.max(0,n-1)*this._lineGap:this.viewWidth=n*this._itemSize.x+Math.max(0,n-1)*this._columnGap}else if(0==t)0==this._layout||2==this._layout?this.viewHeight=e:this.viewWidth=e;else{for(var r=t-1,s=null;r>=0&&(s=this.getChildAt(r),this.foldInvisibleItems&&!s.visible);)r--;if(0>r)0==this._layout||2==this._layout?this.viewHeight=e:this.viewWidth=e;else{var a=0;0==this._layout||2==this._layout?(a=s.y+s.height,e>a&&(a=e),this.viewHeight=a):(a=s.x+s.width,e>a&&(a=e),this.viewWidth=a)}}},a.getMaxItemWidth=function(){for(var t=this._children.length,e=0,i=0;t>i;i++){var n=this.getChildAt(i);n.width>e&&(e=n.width)}return e},a.handleSizeChanged=function(){t.prototype.handleSizeChanged.call(this),this.setBoundsChangedFlag(),this._virtual&&this.setVirtualListChangedFlag(!0)},a.handleControllerChanged=function(e){t.prototype.handleControllerChanged.call(this,e),this._selectionController==e&&(this.selectedIndex=e.selectedIndex)},a.updateSelectionController=function(t){if(null!=this._selectionController&&!this._selectionController.changing&&t<this._selectionController.pageCount){var e=this._selectionController;this._selectionController=null,e.selectedIndex=t,this._selectionController=e}},a.getSnappingPosition=function(e,i,n){if(this._virtual){n||(n=new y);var r=NaN,s=0;return 0==this._layout||2==this._layout?(r=i,fairygui.GList.pos_param=i,s=this.getIndexOnPos1(!1),i=fairygui.GList.pos_param,s<this._virtualItems.length&&r-i>this._virtualItems[s].height/2&&s<this._realNumItems&&(i+=this._virtualItems[s].height+this._lineGap)):1==this._layout||3==this._layout?(r=e,fairygui.GList.pos_param=e,s=this.getIndexOnPos2(!1),e=fairygui.GList.pos_param,s<this._virtualItems.length&&r-e>this._virtualItems[s].width/2&&s<this._realNumItems&&(e+=this._virtualItems[s].width+this._columnGap)):(r=e,fairygui.GList.pos_param=e,s=this.getIndexOnPos3(!1),e=fairygui.GList.pos_param,s<this._virtualItems.length&&r-e>this._virtualItems[s].width/2&&s<this._realNumItems&&(e+=this._virtualItems[s].width+this._columnGap)),n.x=e,n.y=i,n}return t.prototype.getSnappingPosition.call(this,e,i,n)},a.scrollToView=function(t,e,i){if(void 0===e&&(e=!1),void 0===i&&(i=!1),this._virtual){if(0==this._numItems)return;if(this.checkVirtualList(),t>=this._virtualItems.length)throw new Error("Invalid child index: "+t+">"+this._virtualItems.length);this._loop&&(t=Math.floor(this._firstIndex/this._numItems)*this._numItems+t);var n,r=this._virtualItems[t],s=0,a=0;if(0==this._layout||2==this._layout){for(a=0;t>a;a+=this._curLineItemCount)s+=this._virtualItems[a].height+this._lineGap;n=new v(0,s,this._itemSize.x,r.height)}else if(1==this._layout||3==this._layout){for(a=0;t>a;a+=this._curLineItemCount)s+=this._virtualItems[a].width+this._columnGap;n=new v(s,0,r.width,this._itemSize.y)}else{var o=t/(this._curLineItemCount*this._curLineItemCount2);n=new v(o*this.viewWidth+t%this._curLineItemCount*(r.width+this._columnGap),t/this._curLineItemCount%this._curLineItemCount2*(r.height+this._lineGap),r.width,r.height)}i=!0,null!=this._scrollPane&&this.scrollPane.scrollToView(n,e,i)}else{var h=this.getChildAt(t);null!=this._scrollPane?this.scrollPane.scrollToView(h,e,i):null!=this.parent&&null!=this.parent.scrollPane&&this.parent.scrollPane.scrollToView(h,e,i)}},a.getFirstChildInView=function(){return this.childIndexToItemIndex(t.prototype.getFirstChildInView.call(this))},a.childIndexToItemIndex=function(t){if(!this._virtual)return t;if(4==this._layout){for(var e=this._firstIndex;e<this._realNumItems;e++)if(null!=this._virtualItems[e].obj&&(t--,0>t))return e;return t}return t+=this._firstIndex,this._loop&&this._numItems>0&&(t%=this._numItems),t},a.itemIndexToChildIndex=function(t){if(!this._virtual)return t;if(4==this._layout)return this.getChildIndex(this._virtualItems[t].obj);if(this._loop&&this._numItems>0){var e=this._firstIndex%this._numItems;t=t>=e?this._firstIndex+(t-e):this._firstIndex+this._numItems+(e-t)}else t-=this._firstIndex;return t},a.setVirtual=function(){this._setVirtual(!1)},a.setVirtualAndLoop=function(){this._setVirtual(!0)},a._setVirtual=function(t){if(!this._virtual){if(null==this._scrollPane)throw new Error("Virtual list must be scrollable!");if(t){if(2==this._layout||3==this._layout)throw new Error("Loop list is not supported for FlowHorizontal or FlowVertical layout!");this._scrollPane.bouncebackEffect=!1}if(this._virtual=!0,this._loop=t,this._virtualItems=[],this.removeChildrenToPool(),null==this._itemSize){this._itemSize=new y;var e=this.getFromPool(null);if(null==e)throw new Error("Virtual List must have a default list item resource.");this._itemSize.x=e.width,this._itemSize.y=e.height,this.returnToPool(e)}0==this._layout||2==this._layout?this._scrollPane.scrollSpeed=this._itemSize.y:this._scrollPane.scrollSpeed=this._itemSize.x,this.on("fui_scroll",this,this.__scrolled),this.setVirtualListChangedFlag(!0)}},a.refreshVirtualList=function(){this.setVirtualListChangedFlag(!1)},a.checkVirtualList=function(){0!=this._virtualListChanged&&(this._refreshVirtualList(),i.timer.clear(this,this._refreshVirtualList))},a.setVirtualListChangedFlag=function(t){void 0===t&&(t=!1),t?this._virtualListChanged=2:0==this._virtualListChanged&&(this._virtualListChanged=1),i.timer.callLater(this,this._refreshVirtualList)},a._refreshVirtualList=function(){var t=2==this._virtualListChanged;this._virtualListChanged=0,this._eventLocked=!0,t&&(0==this._layout||1==this._layout?this._curLineItemCount=1:2==this._layout?this._columnCount>0?this._curLineItemCount=this._columnCount:(this._curLineItemCount=Math.floor((this._scrollPane.viewWidth+this._columnGap)/(this._itemSize.x+this._columnGap)),this._curLineItemCount<=0&&(this._curLineItemCount=1)):3==this._layout?this._lineCount>0?this._curLineItemCount=this._lineCount:(this._curLineItemCount=Math.floor((this._scrollPane.viewHeight+this._lineGap)/(this._itemSize.y+this._lineGap)),this._curLineItemCount<=0&&(this._curLineItemCount=1)):(this._columnCount>0?this._curLineItemCount=this._columnCount:(this._curLineItemCount=Math.floor((this._scrollPane.viewWidth+this._columnGap)/(this._itemSize.x+this._columnGap)),this._curLineItemCount<=0&&(this._curLineItemCount=1)),this._lineCount>0?this._curLineItemCount2=this._lineCount:(this._curLineItemCount2=Math.floor((this._scrollPane.viewHeight+this._lineGap)/(this._itemSize.y+this._lineGap)),this._curLineItemCount2<=0&&(this._curLineItemCount2=1))));var e=0,i=0;if(this._realNumItems>0){var n=0,r=Math.ceil(this._realNumItems/this._curLineItemCount)*this._curLineItemCount,s=Math.min(this._curLineItemCount,this._realNumItems);if(0==this._layout||2==this._layout){for(n=0;r>n;n+=this._curLineItemCount)e+=this._virtualItems[n].height+this._lineGap;
if(e>0&&(e-=this._lineGap),this._autoResizeItem)i=this.scrollPane.viewWidth;else{for(n=0;s>n;n++)i+=this._virtualItems[n].width+this._columnGap;i>0&&(i-=this._columnGap)}}else if(1==this._layout||3==this._layout){for(n=0;r>n;n+=this._curLineItemCount)i+=this._virtualItems[n].width+this._columnGap;if(i>0&&(i-=this._columnGap),this._autoResizeItem)e=this.scrollPane.viewHeight;else{for(n=0;s>n;n++)e+=this._virtualItems[n].height+this._lineGap;e>0&&(e-=this._lineGap)}}else{var a=Math.ceil(r/(this._curLineItemCount*this._curLineItemCount2));i=a*this.viewWidth,e=this.viewHeight}}this.handleAlign(i,e),this._scrollPane.setContentSize(i,e),this._eventLocked=!1,this.handleScroll(!0)},a.__scrolled=function(t){this.handleScroll(!1)},a.getIndexOnPos1=function(t){if(this._realNumItems<this._curLineItemCount)return e.pos_param=0,0;var i=0,n=NaN,r=NaN;if(this.numChildren>0&&!t){if(n=this.getChildAt(0).y,n>e.pos_param){for(i=this._firstIndex-this._curLineItemCount;i>=0;i-=this._curLineItemCount)if(n-=this._virtualItems[i].height+this._lineGap,n<=e.pos_param)return e.pos_param=n,i;return e.pos_param=0,0}for(i=this._firstIndex;i<this._realNumItems;i+=this._curLineItemCount){if(r=n+this._virtualItems[i].height+this._lineGap,r>e.pos_param)return e.pos_param=n,i;n=r}return e.pos_param=n,this._realNumItems-this._curLineItemCount}for(n=0,i=0;i<this._realNumItems;i+=this._curLineItemCount){if(r=n+this._virtualItems[i].height+this._lineGap,r>e.pos_param)return e.pos_param=n,i;n=r}return e.pos_param=n,this._realNumItems-this._curLineItemCount},a.getIndexOnPos2=function(t){if(this._realNumItems<this._curLineItemCount)return e.pos_param=0,0;var i=0,n=NaN,r=NaN;if(this.numChildren>0&&!t){if(n=this.getChildAt(0).x,n>e.pos_param){for(i=this._firstIndex-this._curLineItemCount;i>=0;i-=this._curLineItemCount)if(n-=this._virtualItems[i].width+this._columnGap,n<=e.pos_param)return e.pos_param=n,i;return e.pos_param=0,0}for(i=this._firstIndex;i<this._realNumItems;i+=this._curLineItemCount){if(r=n+this._virtualItems[i].width+this._columnGap,r>e.pos_param)return e.pos_param=n,i;n=r}return e.pos_param=n,this._realNumItems-this._curLineItemCount}for(n=0,i=0;i<this._realNumItems;i+=this._curLineItemCount){if(r=n+this._virtualItems[i].width+this._columnGap,r>e.pos_param)return e.pos_param=n,i;n=r}return e.pos_param=n,this._realNumItems-this._curLineItemCount},a.getIndexOnPos3=function(t){if(this._realNumItems<this._curLineItemCount)return e.pos_param=0,0;var i=this.viewWidth,n=Math.floor(e.pos_param/i),r=n*(this._curLineItemCount*this._curLineItemCount2),s=n*i,a=0,o=NaN;for(a=0;a<this._curLineItemCount;a++){if(o=s+this._virtualItems[r+a].width+this._columnGap,o>e.pos_param)return e.pos_param=s,r+a;s=o}return e.pos_param=s,r+this._curLineItemCount-1},a.handleScroll=function(t){if(!this._eventLocked){var e=NaN,i=0;0==this._layout||2==this._layout?(this._loop&&(e=this.scrollPane.scrollingPosY,i=this._numItems*(this._itemSize.y+this._lineGap),0==e?this.scrollPane.posY=i:e==this.scrollPane.contentHeight-this.scrollPane.viewHeight&&(this.scrollPane.posY=this.scrollPane.contentHeight-i-this.viewHeight)),this.handleScroll1(t)):1==this._layout||3==this._layout?(this._loop&&(e=this.scrollPane.scrollingPosX,i=this._numItems*(this._itemSize.x+this._columnGap),0==e?this.scrollPane.posX=i:e==this.scrollPane.contentWidth-this.scrollPane.viewWidth&&(this.scrollPane.posX=this.scrollPane.contentWidth-i-this.viewWidth)),this.handleScroll2(t)):(this._loop&&(e=this.scrollPane.scrollingPosX,i=Math.floor(this._numItems/(this._curLineItemCount*this._curLineItemCount2))*this.viewWidth,0==e?this.scrollPane.posX=i:e==this.scrollPane.contentWidth-this.scrollPane.viewWidth&&(this.scrollPane.posX=this.scrollPane.contentWidth-i-this.viewWidth)),this.handleScroll3(t)),this._boundsChanged=!1}},a.handleScroll1=function(t){if(e.enterCounter++,!(e.enterCounter>3)){var i=this.scrollPane.scrollingPosY,n=i+this.scrollPane.viewHeight,r=n==this.scrollPane.contentHeight;fairygui.GList.pos_param=i;var s=this.getIndexOnPos1(t);if(i=fairygui.GList.pos_param,s==this._firstIndex&&!t)return void e.enterCounter--;var a=this._firstIndex;this._firstIndex=s;var o,h,l=s,u=a>s,c=this.numChildren,_=a+c-1,d=u?_:a,f=0,p=i,m=!1,g=0,y=0,v=this.defaultItem,x=0,b=0,w=(this.scrollPane.viewWidth-this._columnGap*(this._curLineItemCount-1))/this._curLineItemCount;for(e.itemInfoVer++;l<this._realNumItems&&(r||n>p);){if(o=this._virtualItems[l],(null==o.obj||t)&&(null!=this.itemProvider&&(v=this.itemProvider.runWith(l%this._numItems),null==v&&(v=this._defaultItem),v=ot.normalizeURL(v)),null!=o.obj&&o.obj.resourceURL!=v&&(this.removeChildToPool(o.obj),o.obj=null)),null==o.obj){if(u){for(b=d;b>=a;b--)if(h=this._virtualItems[b],null!=h.obj&&h.updateFlag!=e.itemInfoVer&&h.obj.resourceURL==v){o.obj=h.obj,h.obj=null,b==d&&d--;break}}else for(b=d;_>=b;b++)if(h=this._virtualItems[b],null!=h.obj&&h.updateFlag!=e.itemInfoVer&&h.obj.resourceURL==v){o.obj=h.obj,h.obj=null,b==d&&d++;break}null!=o.obj?this.setChildIndex(o.obj,u?l-s:this.numChildren):(o.obj=this._pool.getObject(v),u?this.addChildAt(o.obj,l-s):this.addChild(o.obj)),o.obj instanceof fairygui.GButton&&(o.obj.selected=!1),m=!0}else m=t;m&&(this._autoResizeItem&&(0==this._layout||this._columnCount>0)&&o.obj.setSize(w,o.obj.height,!0),this.itemRenderer.runWith([l%this._numItems,o.obj]),l%this._curLineItemCount==0&&(g+=Math.ceil(o.obj.height)-o.height,l==s&&a>s&&(y=Math.ceil(o.obj.height)-o.height)),o.width=Math.ceil(o.obj.width),o.height=Math.ceil(o.obj.height)),o.updateFlag=e.itemInfoVer,o.obj.setXY(f,p),l==s&&(n+=o.height),f+=o.width+this._columnGap,l%this._curLineItemCount==this._curLineItemCount-1&&(f=0,p+=o.height+this._lineGap),l++}for(x=0;c>x;x++)o=this._virtualItems[a+x],o.updateFlag!=e.itemInfoVer&&null!=o.obj&&(this.removeChildToPool(o.obj),o.obj=null);(0!=g||0!=y)&&this._scrollPane.changeContentSizeOnScrolling(0,g,0,y),l>0&&this.numChildren>0&&this._container.y<0&&this.getChildAt(0).y>-this._container.y&&this.handleScroll1(!1),e.enterCounter--}},a.handleScroll2=function(t){if(e.enterCounter++,!(e.enterCounter>3)){var i=this.scrollPane.scrollingPosX,n=i+this.scrollPane.viewWidth,r=i==this.scrollPane.contentWidth;fairygui.GList.pos_param=i;var s=this.getIndexOnPos2(t);if(i=fairygui.GList.pos_param,s==this._firstIndex&&!t)return void e.enterCounter--;var a=this._firstIndex;this._firstIndex=s;var o,h,l=s,u=a>s,c=this.numChildren,_=a+c-1,d=u?_:a,f=i,p=0,m=!1,g=0,y=0,v=this.defaultItem,x=0,b=0,w=(this.scrollPane.viewHeight-this._lineGap*(this._curLineItemCount-1))/this._curLineItemCount;for(e.itemInfoVer++;l<this._realNumItems&&(r||n>f);){if(o=this._virtualItems[l],(null==o.obj||t)&&(null!=this.itemProvider&&(v=this.itemProvider.runWith(l%this._numItems),null==v&&(v=this._defaultItem),v=ot.normalizeURL(v)),null!=o.obj&&o.obj.resourceURL!=v&&(this.removeChildToPool(o.obj),o.obj=null)),null==o.obj){if(u){for(b=d;b>=a;b--)if(h=this._virtualItems[b],null!=h.obj&&h.updateFlag!=e.itemInfoVer&&h.obj.resourceURL==v){o.obj=h.obj,h.obj=null,b==d&&d--;break}}else for(b=d;_>=b;b++)if(h=this._virtualItems[b],null!=h.obj&&h.updateFlag!=e.itemInfoVer&&h.obj.resourceURL==v){o.obj=h.obj,h.obj=null,b==d&&d++;break}null!=o.obj?this.setChildIndex(o.obj,u?l-s:this.numChildren):(o.obj=this._pool.getObject(v),u?this.addChildAt(o.obj,l-s):this.addChild(o.obj)),o.obj instanceof fairygui.GButton&&(o.obj.selected=!1),m=!0}else m=t;m&&(this._autoResizeItem&&(1==this._layout||this._lineCount>0)&&o.obj.setSize(o.obj.width,w,!0),this.itemRenderer.runWith([l%this._numItems,o.obj]),l%this._curLineItemCount==0&&(g+=Math.ceil(o.obj.width)-o.width,l==s&&a>s&&(y=Math.ceil(o.obj.width)-o.width)),o.width=Math.ceil(o.obj.width),o.height=Math.ceil(o.obj.height)),o.updateFlag=e.itemInfoVer,o.obj.setXY(f,p),l==s&&(n+=o.width),p+=o.height+this._lineGap,l%this._curLineItemCount==this._curLineItemCount-1&&(p=0,f+=o.width+this._columnGap),l++}for(x=0;c>x;x++)o=this._virtualItems[a+x],o.updateFlag!=e.itemInfoVer&&null!=o.obj&&(this.removeChildToPool(o.obj),o.obj=null);(0!=g||0!=y)&&this._scrollPane.changeContentSizeOnScrolling(g,0,y,0),l>0&&this.numChildren>0&&this._container.x<0&&this.getChildAt(0).x>-this._container.x&&this.handleScroll2(!1),e.enterCounter--}},a.handleScroll3=function(t){var i=this.scrollPane.scrollingPosX;fairygui.GList.pos_param=i;var n=this.getIndexOnPos3(t);if(i=fairygui.GList.pos_param,n!=this._firstIndex||t){var r=this._firstIndex;this._firstIndex=n;var s,a,o=r,h=this._virtualItems.length,l=this._curLineItemCount*this._curLineItemCount2,u=n%this._curLineItemCount,c=this.viewWidth,_=Math.floor(n/l),d=_*l,f=d+2*l,p=!1,m=0,g=0,y=this._defaultItem,v=(this.scrollPane.viewWidth-this._columnGap*(this._curLineItemCount-1))/this._curLineItemCount,x=(this.scrollPane.viewHeight-this._lineGap*(this._curLineItemCount2-1))/this._curLineItemCount2;for(e.itemInfoVer++,m=d;f>m;m++)if(!(m>=this._realNumItems)){if(g=m%this._curLineItemCount,l>m-d){if(u>g)continue}else if(g>u)continue;s=this._virtualItems[m],s.updateFlag=e.itemInfoVer}var b=null,w=0;for(m=d;f>m;m++)if(!(m>=this._realNumItems)&&(s=this._virtualItems[m],s.updateFlag==e.itemInfoVer)){if(null==s.obj){for(;h>o;){if(a=this._virtualItems[o],null!=a.obj&&a.updateFlag!=e.itemInfoVer){s.obj=a.obj,a.obj=null;break}o++}-1==w&&(w=this.getChildIndex(b)+1),null==s.obj?(null!=this.itemProvider&&(y=this.itemProvider.runWith(m%this._numItems),null==y&&(y=this._defaultItem),y=ot.normalizeURL(y)),s.obj=this._pool.getObject(y),this.addChildAt(s.obj,w)):w=this.setChildIndexBefore(s.obj,w),w++,s.obj instanceof fairygui.GButton&&(s.obj.selected=!1),p=!0}else p=t,w=-1,b=s.obj;p&&(this._autoResizeItem&&(this._curLineItemCount==this._columnCount&&this._curLineItemCount2==this._lineCount?s.obj.setSize(v,x,!0):this._curLineItemCount==this._columnCount?s.obj.setSize(v,s.obj.height,!0):this._curLineItemCount2==this._lineCount&&s.obj.setSize(s.obj.width,x,!0)),this.itemRenderer.runWith([m%this._numItems,s.obj]),s.width=Math.ceil(s.obj.width),s.height=Math.ceil(s.obj.height))}var S=d/l*c,C=S,T=0,E=0;for(m=d;f>m;m++)m>=this._realNumItems||(s=this._virtualItems[m],s.updateFlag==e.itemInfoVer&&s.obj.setXY(C,T),s.height>E&&(E=s.height),m%this._curLineItemCount==this._curLineItemCount-1?(C=S,T+=E+this._lineGap,E=0,m==d+l-1&&(S+=c,C=S,T=0)):C+=s.width+this._columnGap);for(m=o;h>m;m++)s=this._virtualItems[m],s.updateFlag!=e.itemInfoVer&&null!=s.obj&&(this.removeChildToPool(s.obj),s.obj=null)}},a.handleAlign=function(t,e){var i=0,n=0;e<this.viewHeight&&("middle"==this._verticalAlign?n=Math.floor((this.viewHeight-e)/2):"bottom"==this._verticalAlign&&(n=this.viewHeight-e)),t<this.viewWidth&&("center"==this._align?i=Math.floor((this.viewWidth-t)/2):"right"==this._align&&(i=this.viewWidth-t)),(i!=this._alignOffset.x||n!=this._alignOffset.y)&&(this._alignOffset.setTo(i,n),null!=this.scrollPane?this.scrollPane.adjustMaskContainer():this._container.pos(this._margin.left+this._alignOffset.x,this._margin.top+this._alignOffset.y))},a.updateBounds=function(){if(!this._virtual){var t,e=0,i=0,n=0,r=0,s=0,a=0,o=0,h=0,l=0,u=0,c=this._children.length,_=this.viewWidth,d=this.viewHeight,f=0,p=0,m=NaN;if(0==this._layout){for(e=0;c>e;e++)t=this.getChildAt(e),(!this.foldInvisibleItems||t.visible)&&(0!=n&&(n+=this._lineGap),t.y=n,this._autoResizeItem&&t.setSize(_,t.height,!0),n+=Math.ceil(t.height),t.width>r&&(r=t.width));a=Math.ceil(r),o=n}else if(1==this._layout){for(e=0;c>e;e++)t=this.getChildAt(e),(!this.foldInvisibleItems||t.visible)&&(0!=i&&(i+=this._columnGap),t.x=i,this._autoResizeItem&&t.setSize(t.width,d,!0),i+=Math.ceil(t.width),t.height>s&&(s=t.height));a=i,o=Math.ceil(s)}else if(2==this._layout)if(this._autoResizeItem&&this._columnCount>0){for(e=0;c>e;e++)if(t=this.getChildAt(e),(!this.foldInvisibleItems||t.visible)&&(f+=t.sourceWidth,h++,h==this._columnCount||e==c-1)){for(m=(_-f-(h-1)*this._columnGap)/f,i=0,h=p;e>=h;h++)t=this.getChildAt(h),(!this.foldInvisibleItems||t.visible)&&(t.setXY(i,n),e>h?(t.setSize(t.sourceWidth+Math.round(t.sourceWidth*m),t.height,!0),i+=Math.ceil(t.width)+this._columnGap):t.setSize(_-i,t.height,!0),t.height>s&&(s=t.height));n+=Math.ceil(s)+this._lineGap,s=0,h=0,p=e+1,f=0}o=n+Math.ceil(s),a=_}else{for(e=0;c>e;e++)t=this.getChildAt(e),(!this.foldInvisibleItems||t.visible)&&(0!=i&&(i+=this._columnGap),(0!=this._columnCount&&h>=this._columnCount||0==this._columnCount&&i+t.width>_&&0!=s)&&(i=0,n+=Math.ceil(s)+this._lineGap,s=0,h=0),t.setXY(i,n),i+=Math.ceil(t.width),i>r&&(r=i),t.height>s&&(s=t.height),h++);o=n+Math.ceil(s),a=Math.ceil(r)}else if(3==this._layout)if(this._autoResizeItem&&this._lineCount>0){for(e=0;c>e;e++)if(t=this.getChildAt(e),(!this.foldInvisibleItems||t.visible)&&(f+=t.sourceHeight,h++,h==this._lineCount||e==c-1)){for(m=(d-f-(h-1)*this._lineGap)/f,n=0,h=p;e>=h;h++)t=this.getChildAt(h),(!this.foldInvisibleItems||t.visible)&&(t.setXY(i,n),e>h?(t.setSize(t.width,t.sourceHeight+Math.round(t.sourceHeight*m),!0),n+=Math.ceil(t.height)+this._lineGap):t.setSize(t.width,d-n,!0),t.width>r&&(r=t.width));i+=Math.ceil(r)+this._columnGap,r=0,h=0,p=e+1,f=0}a=i+Math.ceil(r),o=d}else{for(e=0;c>e;e++)t=this.getChildAt(e),(!this.foldInvisibleItems||t.visible)&&(0!=n&&(n+=this._lineGap),(0!=this._lineCount&&h>=this._lineCount||0==this._lineCount&&n+t.height>d&&0!=r)&&(n=0,i+=Math.ceil(r)+this._columnGap,r=0,h=0),t.setXY(i,n),n+=Math.ceil(t.height),n>s&&(s=n),t.width>r&&(r=t.width),h++);a=i+Math.ceil(r),o=Math.ceil(s)}else{var g=0;if(this._autoResizeItem&&this._lineCount>0&&(g=Math.floor((d-(this._lineCount-1)*this._lineGap)/this._lineCount)),this._autoResizeItem&&this._columnCount>0){for(e=0;c>e;e++)if(t=this.getChildAt(e),(!this.foldInvisibleItems||t.visible)&&(f+=t.sourceWidth,h++,h==this._columnCount||e==c-1)){for(m=(_-f-(h-1)*this._columnGap)/f,i=0,h=p;e>=h;h++)t=this.getChildAt(h),(!this.foldInvisibleItems||t.visible)&&(t.setXY(l*_+i,n),e>h?(t.setSize(t.sourceWidth+Math.round(t.sourceWidth*m),this._lineCount>0?g:t.height,!0),i+=Math.ceil(t.width)+this._columnGap):t.setSize(_-i,this._lineCount>0?g:t.height,!0),t.height>s&&(s=t.height));n+=Math.ceil(s)+this._lineGap,s=0,h=0,p=e+1,f=0,u++,(0!=this._lineCount&&u>=this._lineCount||0==this._lineCount&&n+t.height>d)&&(l++,n=0,u=0)}}else for(e=0;c>e;e++)t=this.getChildAt(e),(!this.foldInvisibleItems||t.visible)&&(0!=i&&(i+=this._columnGap),this._autoResizeItem&&this._lineCount>0&&t.setSize(t.width,g,!0),(0!=this._columnCount&&h>=this._columnCount||0==this._columnCount&&i+t.width>_&&0!=s)&&(i=0,n+=Math.ceil(s)+this._lineGap,s=0,h=0,u++,(0!=this._lineCount&&u>=this._lineCount||0==this._lineCount&&n+t.height>d&&0!=r)&&(l++,n=0,u=0)),t.setXY(l*_+i,n),i+=Math.ceil(t.width),i>r&&(r=i),t.height>s&&(s=t.height),h++);o=l>0?d:n+Math.ceil(s),a=(l+1)*_}this.handleAlign(a,o),this.setBounds(0,0,a,o)}},a.setup_beforeAdd=function(t){fairygui.GObject.prototype.setup_beforeAdd.call(this,t);var e,i;e=t.getAttribute("layout"),e&&(this._layout=G.parse(e));var n=0;if(e=t.getAttribute("overflow"),n=e?X.parse(e):0,e=t.getAttribute("margin"),e&&this._margin.parse(e),e=t.getAttribute("align"),e&&(this._align=e),e=t.getAttribute("vAlign"),e&&(this._verticalAlign=e),2==n){var r=0;e=t.getAttribute("scroll"),r=e?it.parse(e):1;var s=0;e=t.getAttribute("scrollBar"),s=e?tt.parse(e):0;var a=NaN;e=t.getAttribute("scrollBarFlags"),a=e?parseInt(e):0;var o=new Y;e=t.getAttribute("scrollBarMargin"),e&&o.parse(e);var h,l;e=t.getAttribute("scrollBarRes"),e&&(i=e.split(","),h=i[0],l=i[1]),this.setupScroll(o,r,s,a,h,l)}else this.setupOverflow(n);e=t.getAttribute("lineGap"),e&&(this._lineGap=parseInt(e)),e=t.getAttribute("colGap"),e&&(this._columnGap=parseInt(e)),e=t.getAttribute("lineItemCount"),e&&(2==this._layout||4==this._layout?this._columnCount=parseInt(e):3==this._layout&&(this._lineCount=parseInt(e))),e=t.getAttribute("lineItemCount2"),e&&(this._lineCount=parseInt(e)),e=t.getAttribute("selectionMode"),e&&(this._selectionMode=W.parse(e)),e=t.getAttribute("defaultItem"),e&&(this._defaultItem=e),e=t.getAttribute("autoItemSize"),1==this._layout||0==this._layout?this._autoResizeItem="false"!=e:this._autoResizeItem="true"==e,e=t.getAttribute("renderOrder"),e&&(this._childrenRenderOrder=R.parse(e),2==this._childrenRenderOrder&&(e=t.getAttribute("apex"),e&&(this._apexIndex=parseInt(e))));for(var u=t.childNodes,c=u.length,_=0;c>_;_++){var d=u[_];if("item"==d.nodeName){var f=d.getAttribute("url");if(f||(f=this._defaultItem),f){var p=this.getFromPool(f);null!=p&&(this.addChild(p),e=d.getAttribute("title"),e&&(p.text=e),e=d.getAttribute("icon"),e&&(p.icon=e),e=d.getAttribute("name"),e&&(p.name=e))}}}},a.setup_afterAdd=function(e){t.prototype.setup_afterAdd.call(this,e);var i;i=e.getAttribute("selectionController"),i&&(this._selectionController=this.parent.getController(i))},s(0,a,"layout",function(){return this._layout},function(t){this._layout!=t&&(this._layout=t,this.setBoundsChangedFlag(),this._virtual&&this.setVirtualListChangedFlag(!0))}),s(0,a,"align",function(){return this._align},function(t){this._align!=t&&(this._align=t,this.setBoundsChangedFlag(),this._virtual&&this.setVirtualListChangedFlag(!0))}),s(0,a,"lineCount",function(){return this._lineCount},function(t){this._lineCount!=t&&(this._lineCount=t,(3==this._layout||4==this._layout)&&(this.setBoundsChangedFlag(),this._virtual&&this.setVirtualListChangedFlag(!0)))}),s(0,a,"columnCount",function(){return this._columnCount},function(t){this._columnCount!=t&&(this._columnCount=t,(2==this._layout||4==this._layout)&&(this.setBoundsChangedFlag(),this._virtual&&this.setVirtualListChangedFlag(!0)))}),s(0,a,"lineGap",function(){return this._lineGap},function(t){this._lineGap!=t&&(this._lineGap=t,this.setBoundsChangedFlag(),this._virtual&&this.setVirtualListChangedFlag(!0))}),s(0,a,"columnGap",function(){return this._columnGap},function(t){this._columnGap!=t&&(this._columnGap=t,this.setBoundsChangedFlag(),this._virtual&&this.setVirtualListChangedFlag(!0))}),s(0,a,"verticalAlign",function(){return this._verticalAlign},function(t){this._verticalAlign!=t&&(this._verticalAlign=t,this.setBoundsChangedFlag(),this._virtual&&this.setVirtualListChangedFlag(!0))}),s(0,a,"virtualItemSize",function(){return this._itemSize},function(t){this._virtual&&(null==this._itemSize&&(this._itemSize=new y),this._itemSize.setTo(t.x,t.y),this.setVirtualListChangedFlag(!0))}),s(0,a,"defaultItem",function(){return this._defaultItem},function(t){this._defaultItem=t}),s(0,a,"autoResizeItem",function(){return this._autoResizeItem},function(t){this._autoResizeItem!=t&&(this._autoResizeItem=t,this.setBoundsChangedFlag(),this._virtual&&this.setVirtualListChangedFlag(!0))}),s(0,a,"selectionMode",function(){return this._selectionMode},function(t){this._selectionMode=t}),s(0,a,"selectionController",function(){return this._selectionController},function(t){this._selectionController=t}),s(0,a,"itemPool",function(){return this._pool}),s(0,a,"selectedIndex",function(){for(var t=this._children.length,e=0;t>e;e++){var i=this._children[e];if(i instanceof fairygui.GButton&&i.selected)return this.childIndexToItemIndex(e)}return-1},function(t){this.clearSelection(),t>=0&&t<this.numItems&&this.addSelection(t)}),s(0,a,"numItems",function(){return this._virtual?this._numItems:this._children.length},function(t){var e=0;if(this._virtual){if(null==this.itemRenderer)throw new Error("Set itemRenderer first!");this._numItems=t,this._loop?this._realNumItems=5*this._numItems:this._realNumItems=this._numItems;var r=this._virtualItems.length;if(this._realNumItems>r)for(e=r;e<this._realNumItems;e++){var s=new n;s.width=this._itemSize.x,s.height=this._itemSize.y,this._virtualItems.push(s)}0!=this._virtualListChanged&&i.timer.clear(this,this._refreshVirtualList),this._refreshVirtualList()}else{var a=this._children.length;if(t>a)for(e=a;t>e;e++)null==this.itemProvider?this.addItemFromPool():this.addItemFromPool(this.itemProvider.runWith(e));else this.removeChildrenToPool(t,a);if(null!=this.itemRenderer)for(e=0;t>e;e++)this.itemRenderer.runWith([e,this.getChildAt(e)])}}),e.itemInfoVer=0,e.enterCounter=0,e.pos_param=NaN,e.__init$=function(){n=function(){function t(){this.width=0,this.height=0,this.obj=null,this.updateFlag=0}return r(t,""),t}()},e}(gt),Ft=function(t){function e(){this.div=null,this._text=null,this._ubbEnabled=!1,this._color=null,e.__super.call(this),this._text=""}r(e,"fairygui.GRichTextField",t);var i=e.prototype;return i.createDisplayObject=function(){this._displayObject=this.div=new d,this._displayObject.mouseEnabled=!0,this._displayObject.$owner=this},i.handleSizeChanged=function(){this.div.size(this.width,this.height)},s(0,i,"bold",function(){return this.div.style.bold},function(t){this.div.style.bold=t}),s(0,i,"align",function(){return this.div.style.align},function(t){this.div.style.align=t}),s(0,i,"text",function(){return this._text},function(t){this._text=t,this._ubbEnabled?this.div.innerHTML=lt.parseUBB(this._text):this.div.innerHTML=this._text}),s(0,i,"color",function(){return this._color},function(t){this._color!=t&&(this._color=t,this.div.color=t,this._gearColor.controller&&this._gearColor.updateState())}),s(0,i,"font",function(){return this.div.style.font},function(t){this.div.style.font=t}),s(0,i,"leading",function(){return this.div.style.leading},function(t){this.div.style.leading=t}),s(0,i,"fontSize",function(){return this.div.style.fontSize},function(t){this.div.style.fontSize=t}),s(0,i,"valign",function(){return this.div.style.valign},function(t){this.div.style.valign=t}),s(0,i,"italic",function(){return this.div.style.italic},function(t){this.div.style.italic=t}),s(0,i,"stroke",function(){return this.div.style.stroke},function(t){this.div.style.stroke=t}),s(0,i,"strokeColor",function(){return this.div.style.strokeColor},function(t){this.div.style.strokeColor=t,this.updateGear(4)}),s(0,i,"ubbEnabled",function(){return this._ubbEnabled},function(t){this._ubbEnabled=t}),e}(mt),Vt=function(t){function e(){this._max=0,this._value=0,this._titleType=0,this._reverse=!1,this._titleObject=null,this._aniObject=null,this._barObjectH=null,this._barObjectV=null,this._barMaxWidth=0,this._barMaxHeight=0,this._barMaxWidthDelta=0,this._barMaxHeightDelta=0,this._barStartX=0,this._barStartY=0,this._tweener=null,this._tweenValue=0,e.__super.call(this),this._titleType=0,this._value=50,this._max=100}r(e,"fairygui.GProgressBar",t);var i=e.prototype;return i.tweenValue=function(t,e){return this._value!=t?(this._tweener&&this._tweener.clear(),this._tweenValue=this._value,this._value=t,this._tweener=T.to(this,{_tweenValue:t},1e3*e,fairygui.GProgressBar.easeLinear,f.create(this,this.onTweenComplete,null,!0)),this._tweener.update=f.create(this,this.onUpdateTween,null,!1),this._tweener):null},i.onUpdateTween=function(){this.update(this._tweenValue)},i.onTweenComplete=function(){this._tweener=null},i.update=function(t){var e=Math.min(t/this._max,1);if(this._titleObject)switch(this._titleType){case 0:this._titleObject.text=Math.round(100*e)+"%";break;case 1:this._titleObject.text=Math.round(t)+"/"+Math.round(this._max);break;case 2:this._titleObject.text=""+Math.round(t);break;case 3:this._titleObject.text=""+Math.round(this._max)}var i=this.width-this._barMaxWidthDelta,n=this.height-this._barMaxHeightDelta;this._reverse?(this._barObjectH&&(this._barObjectH.width=Math.round(i*e),this._barObjectH.x=this._barStartX+(i-this._barObjectH.width)),this._barObjectV&&(this._barObjectV.height=Math.round(n*e),this._barObjectV.y=this._barStartY+(n-this._barObjectV.height))):(this._barObjectH&&(this._barObjectH.width=i*e),this._barObjectV&&(this._barObjectV.height=n*e)),this._aniObject instanceof fairygui.GMovieClip&&(this._aniObject.frame=Math.round(100*e))},i.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),e=lt.findChildNode(e,"ProgressBar");var i;i=e.getAttribute("titleType"),i&&(this._titleType=Z.parse(i)),this._reverse="true"==e.getAttribute("reverse"),this._titleObject=this.getChild("title"),this._barObjectH=this.getChild("bar"),this._barObjectV=this.getChild("bar_v"),this._aniObject=this.getChild("ani"),this._barObjectH&&(this._barMaxWidth=this._barObjectH.width,this._barMaxWidthDelta=this.width-this._barMaxWidth,this._barStartX=this._barObjectH.x),this._barObjectV&&(this._barMaxHeight=this._barObjectV.height,this._barMaxHeightDelta=this.height-this._barMaxHeight,this._barStartY=this._barObjectV.y)},i.handleSizeChanged=function(){t.prototype.handleSizeChanged.call(this),this._barObjectH&&(this._barMaxWidth=this.width-this._barMaxWidthDelta),this._barObjectV&&(this._barMaxHeight=this.height-this._barMaxHeightDelta),this._underConstruct||this.update(this._value)},i.setup_afterAdd=function(e){t.prototype.setup_afterAdd.call(this,e),e=lt.findChildNode(e,"ProgressBar"),e&&(this._value=parseInt(e.getAttribute("value")),this._max=parseInt(e.getAttribute("max"))),this.update(this._value)},i.dispose=function(){this._tweener&&this._tweener.clear(),t.prototype.dispose.call(this)},s(0,i,"max",function(){return this._max},function(t){this._max!=t&&(this._max=t,this.update(this._value))}),s(0,i,"titleType",function(){return this._titleType},function(t){this._titleType!=t&&(this._titleType=t,this.update(this._value))}),s(0,i,"value",function(){return this._value},function(t){null!=this._tweener&&(this._tweener.clear(),this._tweener=null),this._value!=t&&(this._value=t,this.update(this._value))}),n(e,["easeLinear",function(){return this.easeLinear=u.linearNone}]),e}(gt),Bt=function(t){function e(){this._modalLayer=null,this._popupStack=null,this._justClosedPopups=null,this._modalWaitPane=null,this._focusedObject=null,this._tooltipWin=null,this._defaultTooltipWin=null,this._checkPopups=!1,e.__super.call(this),null==fairygui.GRoot._inst&&(fairygui.GRoot._inst=this),this.opaque=!1,this._popupStack=[],this._justClosedPopups=[],this.displayObject.once("display",this,this.__addedToStage)}r(e,"fairygui.GRoot",t);var n=e.prototype;return n.showWindow=function(t){this.addChild(t),t.requestFocus(),t.x>this.width?t.x=this.width-t.width:t.x+t.width<0&&(t.x=0),t.y>this.height?t.y=this.height-t.height:t.y+t.height<0&&(t.y=0),this.adjustModalLayer()},n.hideWindow=function(t){t.hide()},n.hideWindowImmediately=function(t){t.parent==this&&this.removeChild(t),this.adjustModalLayer()},n.bringToFront=function(t){var e=this.numChildren,i=NaN;for(i=null==this._modalLayer.parent||t.modal?e-1:this.getChildIndex(this._modalLayer)-1;i>=0;i--){var n=this.getChildAt(i);if(n==t)return;if(n instanceof fairygui.Window)break}i>=0&&this.setChildIndex(t,i)},n.showModalWait=function(t){null!=st.globalModalWaiting&&(null==this._modalWaitPane&&(this._modalWaitPane=ot.createObjectFromURL(st.globalModalWaiting)),this._modalWaitPane.setSize(this.width,this.height),this._modalWaitPane.addRelation(this,24),this.addChild(this._modalWaitPane),this._modalWaitPane.text=t)},n.closeModalWait=function(){null!=this._modalWaitPane&&null!=this._modalWaitPane.parent&&this.removeChild(this._modalWaitPane)},n.closeAllExceptModals=function(){for(var t=this._children.slice(),e=t.length,i=0;e>i;i++){var n=t[i];n instanceof fairygui.Window&&!n.modal&&n.hide()}},n.closeAllWindows=function(){for(var t=this._children.slice(),e=t.length,i=0;e>i;i++){var n=t[i];n instanceof fairygui.Window&&n.hide()}},n.getTopWindow=function(){for(var t=this.numChildren,e=t-1;e>=0;e--){var i=this.getChildAt(e);if(i instanceof fairygui.Window)return i}return null},n.showPopup=function(t,e,n){if(this._popupStack.length>0){var r=this._popupStack.indexOf(t);if(-1!=r)for(var s=this._popupStack.length-1;s>=r;s--)this.removeChild(this._popupStack.pop())}this._popupStack.push(t),this.addChild(t),this.adjustModalLayer();var a,o=0,h=0;e?(a=e.localToGlobal(),o=e.width,h=e.height):a=this.globalToLocal(i.stage.mouseX,i.stage.mouseY);var l=NaN,u=NaN;l=a.x,l+t.width>this.width&&(l=l+o-t.width),u=a.y+h,(null==n&&u+t.height>this.height||0==n)&&(u=a.y-t.height-1,0>u&&(u=0,l+=o/2)),t.x=l,t.y=u},n.togglePopup=function(t,e,i){-1==this._justClosedPopups.indexOf(t)&&this.showPopup(t,e,i)},n.hidePopup=function(t){if(null!=t){var e=this._popupStack.indexOf(t);if(-1!=e)for(var i=this._popupStack.length-1;i>=e;i--)this.closePopup(this._popupStack.pop())}else{var n=this._popupStack.length;for(i=n-1;i>=0;i--)this.closePopup(this._popupStack[i]);this._popupStack.length=0}},n.closePopup=function(t){null!=t.parent&&(t instanceof fairygui.Window?t.hide():this.removeChild(t))},n.showTooltips=function(t){if(null==this._defaultTooltipWin){var e=st.tooltipsWin;if(!e)return void g.print("UIConfig.tooltipsWin not defined");this._defaultTooltipWin=ot.createObjectFromURL(e)}this._defaultTooltipWin.text=t,this.showTooltipsWin(this._defaultTooltipWin)},n.showTooltipsWin=function(t,e){this.hideTooltips(),this._tooltipWin=t;var n=0,r=0;null==e?(n=i.stage.mouseX+10,r=i.stage.mouseY+20):(n=e.x,r=e.y);var s=this.globalToLocal(n,r);n=s.x,r=s.y,n+this._tooltipWin.width>this.width&&(n=n-this._tooltipWin.width-1,0>n&&(n=10)),r+this._tooltipWin.height>this.height&&(r=r-this._tooltipWin.height-1,n-this._tooltipWin.width-1>0&&(n=n-this._tooltipWin.width-1),0>r&&(r=10)),this._tooltipWin.x=n,this._tooltipWin.y=r,this.addChild(this._tooltipWin)},n.hideTooltips=function(){null!=this._tooltipWin&&(this._tooltipWin.parent&&this.removeChild(this._tooltipWin),this._tooltipWin=null)},n.getObjectUnderPoint=function(t,e){return null},n.setFocus=function(t){this._focusedObject!=t&&(this._focusedObject=t,this.displayObject.event("fui_focus_changed"))},n.playOneShotSound=function(t,e){void 0===e&&(e=1),b.playSound(t)},n.adjustModalLayer=function(){var t=this.numChildren;null!=this._modalWaitPane&&null!=this._modalWaitPane.parent&&this.setChildIndex(this._modalWaitPane,t-1);for(var e=t-1;e>=0;e--){var i=this.getChildAt(e);if(i instanceof fairygui.Window&&i.modal)return void(null==this._modalLayer.parent?this.addChildAt(this._modalLayer,e):this.setChildIndexBefore(this._modalLayer,e))}null!=this._modalLayer.parent&&this.removeChild(this._modalLayer)},n.__addedToStage=function(){i.stage.on("mousedown",this,this.__stageMouseDown),i.stage.on("mouseup",this,this.__stageMouseUp),this._modalLayer=new St,this._modalLayer.setSize(this.width,this.height),this._modalLayer.drawRect(0,null,st.modalLayerColor),this._modalLayer.addRelation(this,24),this.displayObject.stage.on("resize",this,this.__winResize),this.__winResize()},n.checkPopups=function(t){if(!this._checkPopups&&(this._checkPopups=!0,this._justClosedPopups.length=0,this._popupStack.length>0)){for(var e=t;e!=this.displayObject.stage&&null!=e;){if(e.$owner){var i=this._popupStack.indexOf(e.$owner);if(-1!=i){for(var n=this._popupStack.length-1;n>i;n--){var r=this._popupStack.pop();this.closePopup(r),this._justClosedPopups.push(r)}return}}e=e.parent}var s=this._popupStack.length;for(n=s-1;n>=0;n--)r=this._popupStack[n],this.closePopup(r),this._justClosedPopups.push(r);this._popupStack.length=0}},n.__stageMouseDown=function(t){for(var e=t.target;e!=this.displayObject.stage&&null!=e;){if(e.$owner){var i=e.$owner;if(i.touchable&&i.focusable){this.setFocus(i);break}}e=e.parent}null!=this._tooltipWin&&this.hideTooltips(),this.checkPopups(t.target)},n.__stageMouseUp=function(){this._checkPopups=!1},n.__winResize=function(){this.setSize(i.stage.width,i.stage.height)},s(0,n,"focus",function(){return this._focusedObject&&!this._focusedObject.onStage&&(this._focusedObject=null),this._focusedObject},function(t){if(t&&(!t.focusable||!t.onStage))throw"invalid focus target";this.setFocus(t)}),s(0,n,"hasAnyPopup",function(){return 0!=this._popupStack.length}),s(0,n,"modalLayer",function(){return this._modalLayer}),s(0,n,"hasModalWindow",function(){return null!=this._modalLayer.parent}),s(0,n,"modalWaiting",function(){return this._modalWaitPane&&this._modalWaitPane.inContainer}),s(0,n,"volumeScale",function(){return b.soundVolume},function(t){b.soundVolume=t}),s(1,e,"inst",function(){return null==fairygui.GRoot._inst&&new e,fairygui.GRoot._inst},fairygui.GComponent._$SET_inst),e._inst=null,e}(gt),kt=function(t){function e(){this.input=null,e.__super.call(this)}r(e,"fairygui.GTextInput",t);
var i=e.prototype;return i.createDisplayObject=function(){this._displayObject=this.input=new m,this._displayObject.mouseEnabled=!0,this._displayObject.$owner=this},i.handleSizeChanged=function(){this.input.size(this.width,this.height)},i.setup_beforeAdd=function(e){t.prototype.setup_beforeAdd.call(this,e);var i=e.getAttribute("prompt");i&&(this.promptText=i),i=e.getAttribute("maxLength"),i&&(this.input.maxChars=parseInt(i)),i=e.getAttribute("restrict"),i&&(this.input.restrict=i),"true"==e.getAttribute("password")?this.password=!0:(i=e.getAttribute("keyboardType"),"4"==i?this.keyboardType="number":"3"==i&&(this.keyboardType="url"))},s(0,i,"bold",function(){return this.input.bold},function(t){this.input.bold=t}),s(0,i,"align",function(){return this.input.align},function(t){this.input.align=t}),s(0,i,"text",function(){return this.input.text},function(t){this.input.text=t}),s(0,i,"password",function(){return"password"==this.input.type},function(t){t?this.input.type="password":this.input.type="text"}),s(0,i,"color",function(){return this.input.color},function(t){this.input.color=t}),s(0,i,"font",function(){return this.input.font},function(t){this.input.font=t}),s(0,i,"leading",function(){return this.input.leading},function(t){this.input.leading=t}),s(0,i,"maxLength",function(){return this.input.maxChars},function(t){this.input.maxChars=t}),s(0,i,"fontSize",function(){return this.input.fontSize},function(t){this.input.fontSize=t}),s(0,i,"valign",function(){return this.input.valign},function(t){this.input.valign=t}),s(0,i,"italic",function(){return this.input.italic},function(t){this.input.italic=t}),s(0,i,"singleLine",function(){return!this.input.multiline},function(t){this.input.multiline=!t}),s(0,i,"stroke",function(){return this.input.stroke},function(t){this.input.stroke=t}),s(0,i,"strokeColor",function(){return this.input.strokeColor},function(t){this.input.strokeColor=t,this.updateGear(4)}),s(0,i,"keyboardType",function(){return this.input.type},function(t){this.input.type=t}),s(0,i,"editable",function(){return this.input.editable},function(t){this.input.editable=t}),s(0,i,"promptText",function(){return this.input.prompt},function(t){this.input.prompt=t}),s(0,i,"restrict",function(){return this.input.restrict},function(t){this.input.restrict=t}),s(0,i,"textWidth",function(){return this.input.textWidth}),e}(mt),Ut=function(t){function e(){this._grip=null,this._arrowButton1=null,this._arrowButton2=null,this._bar=null,this._target=null,this._vertical=!1,this._scrollPerc=0,this._fixedGripSize=!1,this._dragOffset=null,e.__super.call(this),this._dragOffset=new laya.maths.Point,this._scrollPerc=0}r(e,"fairygui.GScrollBar",t);var a=e.prototype;return a.setScrollPane=function(t,e){this._target=t,this._vertical=e},a.constructFromXML=function(e){return t.prototype.constructFromXML.call(this,e),e=lt.findChildNode(e,"ScrollBar"),e&&(this._fixedGripSize="true"==e.getAttribute("fixedGripSize")),this._grip=this.getChild("grip"),this._grip?(this._bar=this.getChild("bar"),this._bar?(this._arrowButton1=this.getChild("arrow1"),this._arrowButton2=this.getChild("arrow2"),this._grip.on("mousedown",this,this.__gripMouseDown),this._arrowButton1&&this._arrowButton1.on("mousedown",this,this.__arrowButton1Click),this._arrowButton2&&this._arrowButton2.on("mousedown",this,this.__arrowButton2Click),void this.on("mousedown",this,this.__barMouseDown)):void g.print("需要定义bar")):void g.print("需要定义grip")},a.__gripMouseDown=function(t){this._bar&&(t.stopPropagation(),i.stage.on("mousemove",this,this.__gripMouseMove),i.stage.on("mouseup",this,this.__gripMouseUp),this.globalToLocal(i.stage.mouseX,i.stage.mouseY,this._dragOffset),this._dragOffset.x-=this._grip.x,this._dragOffset.y-=this._grip.y)},a.__gripMouseMove=function(){var t=this.globalToLocal(i.stage.mouseX,i.stage.mouseY,fairygui.GScrollBar.sScrollbarHelperPoint);if(this._vertical){var e=t.y-this._dragOffset.y;this._target.setPercY((e-this._bar.y)/(this._bar.height-this._grip.height),!1)}else{var n=t.x-this._dragOffset.x;this._target.setPercX((n-this._bar.x)/(this._bar.width-this._grip.width),!1)}},a.__gripMouseUp=function(t){this._bar&&(i.stage.off("mousemove",this,this.__gripMouseMove),i.stage.off("mouseup",this,this.__gripMouseUp))},a.__arrowButton1Click=function(t){t.stopPropagation(),this._vertical?this._target.scrollUp():this._target.scrollLeft()},a.__arrowButton2Click=function(t){t.stopPropagation(),this._vertical?this._target.scrollDown():this._target.scrollRight()},a.__barMouseDown=function(t){var e=this._grip.globalToLocal(i.stage.mouseX,i.stage.mouseY,fairygui.GScrollBar.sScrollbarHelperPoint);this._vertical?e.y<0?this._target.scrollUp(4):this._target.scrollDown(4):e.x<0?this._target.scrollLeft(4):this._target.scrollRight(4)},s(0,a,"displayPerc",null,function(t){this._vertical?(this._fixedGripSize||(this._grip.height=t*this._bar.height),this._grip.y=this._bar.y+(this._bar.height-this._grip.height)*this._scrollPerc):(this._fixedGripSize||(this._grip.width=t*this._bar.width),this._grip.x=this._bar.x+(this._bar.width-this._grip.width)*this._scrollPerc)}),s(0,a,"scrollPerc",null,function(t){this._scrollPerc=t,this._vertical?this._grip.y=this._bar.y+(this._bar.height-this._grip.height)*this._scrollPerc:this._grip.x=this._bar.x+(this._bar.width-this._grip.width)*this._scrollPerc}),s(0,a,"minSize",function(){return this._vertical?(null!=this._arrowButton1?this._arrowButton1.height:0)+(null!=this._arrowButton2?this._arrowButton2.height:0):(null!=this._arrowButton1?this._arrowButton1.width:0)+(null!=this._arrowButton2?this._arrowButton2.width:0)}),n(e,["sScrollbarHelperPoint",function(){return this.sScrollbarHelperPoint=new y}]),e}(gt),Ht=function(t){function e(){this._max=0,this._value=0,this._titleType=0,this._reverse=!1,this._titleObject=null,this._barObjectH=null,this._barObjectV=null,this._barMaxWidth=0,this._barMaxHeight=0,this._barMaxWidthDelta=0,this._barMaxHeightDelta=0,this._gripObject=null,this._clickPos=null,this._clickPercent=0,this._barStartX=0,this._barStartY=0,this.changeOnClick=!0,this.canDrag=!0,e.__super.call(this),this._titleType=0,this._value=50,this._max=100,this._clickPos=new laya.maths.Point}r(e,"fairygui.GSlider",t);var a=e.prototype;return a.update=function(){var t=Math.min(this._value/this._max,1);this.updateWidthPercent(t)},a.updateWidthPercent=function(t){if(this._titleObject)switch(this._titleType){case 0:this._titleObject.text=Math.round(100*t)+"%";break;case 1:this._titleObject.text=this._value+"/"+this._max;break;case 2:this._titleObject.text=""+this._value;break;case 3:this._titleObject.text=""+this._max}var e=this.width-this._barMaxWidthDelta,i=this.height-this._barMaxHeightDelta;this._reverse?(this._barObjectH&&(this._barObjectH.width=Math.round(e*t),this._barObjectH.x=this._barStartX+(e-this._barObjectH.width)),this._barObjectV&&(this._barObjectV.height=Math.round(i*t),this._barObjectV.y=this._barStartY+(i-this._barObjectV.height))):(this._barObjectH&&(this._barObjectH.width=e*t),this._barObjectV&&(this._barObjectV.height=i*t))},a.constructFromXML=function(e){t.prototype.constructFromXML.call(this,e),e=lt.findChildNode(e,"Slider");var i;i=e.getAttribute("titleType"),i&&(this._titleType=Z.parse(i)),this._reverse="true"==e.getAttribute("reverse"),this._titleObject=this.getChild("title"),this._barObjectH=this.getChild("bar"),this._barObjectV=this.getChild("bar_v"),this._gripObject=this.getChild("grip"),this._barObjectH&&(this._barMaxWidth=this._barObjectH.width,this._barMaxWidthDelta=this.width-this._barMaxWidth,this._barStartX=this._barObjectH.x),this._barObjectV&&(this._barMaxHeight=this._barObjectV.height,this._barMaxHeightDelta=this.height-this._barMaxHeight,this._barStartY=this._barObjectV.y),this._gripObject&&this._gripObject.on("mousedown",this,this.__gripMouseDown),this.displayObject.on("mousedown",this,this.__barMouseDown)},a.handleSizeChanged=function(){t.prototype.handleSizeChanged.call(this),this._barObjectH&&(this._barMaxWidth=this.width-this._barMaxWidthDelta),this._barObjectV&&(this._barMaxHeight=this.height-this._barMaxHeightDelta),this._underConstruct||this.update()},a.setup_afterAdd=function(e){t.prototype.setup_afterAdd.call(this,e),e=lt.findChildNode(e,"Slider"),e&&(this._value=parseInt(e.getAttribute("value")),this._max=parseInt(e.getAttribute("max"))),this.update()},a.__gripMouseDown=function(t){this.canDrag=!0,t.stopPropagation(),this._clickPos=this.globalToLocal(i.stage.mouseX,i.stage.mouseY),this._clickPercent=this._value/this._max,i.stage.on("mousemove",this,this.__gripMouseMove),i.stage.on("mouseup",this,this.__gripMouseUp)},a.__gripMouseMove=function(t){if(this.canDrag){var e=this.globalToLocal(i.stage.mouseX,i.stage.mouseY,fairygui.GSlider.sSilderHelperPoint),n=e.x-this._clickPos.x,r=e.y-this._clickPos.y;this._reverse&&(n=-n,r=-r);var s=NaN;s=this._barObjectH?this._clickPercent+n/this._barMaxWidth:this._clickPercent+r/this._barMaxHeight,s>1?s=1:0>s&&(s=0);var a=Math.round(this._max*s);a!=this._value&&(this._value=a,V.dispatch("fui_state_changed",this.displayObject,t)),this.updateWidthPercent(s)}},a.__gripMouseUp=function(t){i.stage.off("mousemove",this,this.__gripMouseMove),i.stage.off("mouseup",this,this.__gripMouseUp)},a.__barMouseDown=function(t){if(this.changeOnClick){var e=this._gripObject.globalToLocal(t.stageX,t.stageY,fairygui.GSlider.sSilderHelperPoint),i=this._value/this._max,n=NaN;this._barObjectH&&(n=(e.x-this._gripObject.width/2)/this._barMaxWidth),this._barObjectV&&(n=(e.y-this._gripObject.height/2)/this._barMaxHeight),this._reverse?i-=n:i+=n,i>1?i=1:0>i&&(i=0);var r=Math.round(this._max*i);r!=this._value&&(this._value=r,V.dispatch("fui_state_changed",this.displayObject,t)),this.updateWidthPercent(i)}},s(0,a,"max",function(){return this._max},function(t){this._max!=t&&(this._max=t,this.update())}),s(0,a,"titleType",function(){return this._titleType},function(t){this._titleType=t}),s(0,a,"value",function(){return this._value},function(t){this._value!=t&&(this._value=t,this.update())}),n(e,["sSilderHelperPoint",function(){return this.sSilderHelperPoint=new y}]),e}(gt),zt=(function(t){function e(){this._contentPane=null,this._modalWaitPane=null,this._closeButton=null,this._dragArea=null,this._contentArea=null,this._frame=null,this._modal=!1,this._uiSources=null,this._inited=!1,this._loading=!1,this._requestingCmd=0,this.bringToFontOnClick=!1,e.__super.call(this),this.focusable=!0,this._uiSources=[],this.bringToFontOnClick=st.bringWindowToFrontOnClick,this.displayObject.on("display",this,this.__onShown),this.displayObject.on("undisplay",this,this.__onHidden),this.displayObject.on("mousedown",this,this.__mouseDown)}r(e,"fairygui.Window",t,"Window2");var i=e.prototype;return i.addUISource=function(t){this._uiSources.push(t)},i.show=function(){Bt.inst.showWindow(this)},i.showOn=function(t){t.showWindow(this)},i.hide=function(){this.isShowing&&this.doHideAnimation()},i.hideImmediately=function(){var t=this.parent instanceof fairygui.GRoot?this.parent:null;t||(t=Bt.inst),t.hideWindowImmediately(this)},i.centerOn=function(t,e){void 0===e&&(e=!1),this.setXY(Math.round((t.width-this.width)/2),Math.round((t.height-this.height)/2)),e&&(this.addRelation(t,3),this.addRelation(t,10))},i.toggleStatus=function(){this.isTop?this.hide():this.show()},i.bringToFront=function(){this.root.bringToFront(this)},i.showModalWait=function(t){void 0===t&&(t=0),0!=t&&(this._requestingCmd=t),st.windowModalWaiting&&(this._modalWaitPane||(this._modalWaitPane=ot.createObjectFromURL(st.windowModalWaiting)),this.layoutModalWaitPane(),this.addChild(this._modalWaitPane))},i.layoutModalWaitPane=function(){if(null!=this._contentArea){var t=this._frame.localToGlobal();t=this.globalToLocal(t.x,t.y,t),this._modalWaitPane.setXY(t.x+this._contentArea.x,t.y+this._contentArea.y),this._modalWaitPane.setSize(this._contentArea.width,this._contentArea.height)}else this._modalWaitPane.setSize(this.width,this.height)},i.closeModalWait=function(t){return void 0===t&&(t=0),0!=t&&this._requestingCmd!=t?!1:(this._requestingCmd=0,this._modalWaitPane&&null!=this._modalWaitPane.parent&&this.removeChild(this._modalWaitPane),!0)},i.init=function(){if(!this._inited&&!this._loading)if(this._uiSources.length>0){this._loading=!1;for(var t=this._uiSources.length,e=0;t>e;e++){var i=this._uiSources[e];i.loaded||(i.load(this.__uiLoadComplete,this),this._loading=!0)}this._loading||this._init()}else this._init()},i.onInit=function(){},i.onShown=function(){},i.onHide=function(){},i.doShowAnimation=function(){this.onShown()},i.doHideAnimation=function(){this.hideImmediately()},i.__uiLoadComplete=function(){for(var t=this._uiSources.length,e=0;t>e;e++){var i=this._uiSources[e];if(!i.loaded)return}this._loading=!1,this._init()},i._init=function(){this._inited=!0,this.onInit(),this.isShowing&&this.doShowAnimation()},i.dispose=function(){null!=this.parent&&this.hideImmediately(),t.prototype.dispose.call(this)},i.closeEventHandler=function(){this.hide()},i.__onShown=function(){this._inited?this.doShowAnimation():this.init()},i.__onHidden=function(){this.closeModalWait(),this.onHide()},i.__mouseDown=function(){this.isShowing&&this.bringToFontOnClick&&this.bringToFront()},i.__dragStart=function(t){k.cast(t.currentTarget).stopDrag(),this.startDrag()},s(0,i,"contentPane",function(){return this._contentPane},function(t){this._contentPane!=t&&(null!=this._contentPane&&this.removeChild(this._contentPane),this._contentPane=t,null!=this._contentPane&&(this.addChild(this._contentPane),this.setSize(this._contentPane.width,this._contentPane.height),this._contentPane.addRelation(this,24),this._frame=this._contentPane.getChild("frame"),null!=this._frame&&(this.closeButton=this._frame.getChild("closeButton"),this.dragArea=this._frame.getChild("dragArea"),this.contentArea=this._frame.getChild("contentArea"))))}),s(0,i,"isShowing",function(){return null!=this.parent}),s(0,i,"isTop",function(){return null!=this.parent&&this.parent.getChildIndex(this)==this.parent.numChildren-1}),s(0,i,"modal",function(){return this._modal},function(t){this._modal=t}),s(0,i,"dragArea",function(){return this._dragArea},function(t){this._dragArea!=t&&(null!=this._dragArea&&(this._dragArea.draggable=!1,this._dragArea.off("fui_drag_start",this,this.__dragStart)),this._dragArea=t,null!=this._dragArea&&(this._dragArea instanceof fairygui.GGraph&&this._dragArea.asGraph.drawRect(0,null,null),this._dragArea.draggable=!0,this._dragArea.on("fui_drag_start",this,this.__dragStart)))}),s(0,i,"frame",function(){return this._frame}),s(0,i,"closeButton",function(){return this._closeButton},function(t){null!=this._closeButton&&this._closeButton.offClick(this,this.closeEventHandler),this._closeButton=t,null!=this._closeButton&&this._closeButton.onClick(this,this.closeEventHandler)}),s(0,i,"contentArea",function(){return this._contentArea},function(t){this._contentArea=t}),s(0,i,"modalWaiting",function(){return this._modalWaitPane&&null!=this._modalWaitPane.parent}),e}(gt),function(t){function e(){this._tex=null,this._scaleByTile=!1,this._scale9Grid=null,this._tileGridIndice=0,this._textureScaleX=0,this._textureScaleY=0,this._needRebuild=!1,e.__super.call(this),this.mouseEnabled=!1,this._textureScaleX=1,this._textureScaleY=1}r(e,"fairygui.display.Image",t,"Image1");var n=e.prototype;return n.scaleTexture=function(t,e){(this._textureScaleX!=t||this._textureScaleY!=e)&&(this._textureScaleX=t,this._textureScaleY=e,this._tex&&this.size(this._tex.width*t,this._tex.height*e),this.markChanged())},n.markChanged=function(){this._needRebuild||(this._needRebuild=!0,i.timer.callLater(this,this.rebuild))},n.rebuild=function(){this._needRebuild=!1;var t=this.graphics;if(t.clear(),null==this._tex)return void this.repaint();var e=this.width,i=this.height,n=this._tex.width,r=this._tex.height;if(0==e||0==i)return void this.repaint();if(this._scaleByTile)t.fillTexture(this._tex,0,0,e,i);else if(null!=this._scale9Grid){var s=this._scale9Grid.x,a=Math.max(n-this._scale9Grid.right,0),o=this._scale9Grid.y,h=Math.max(r-this._scale9Grid.bottom,0),l=NaN;i>=r-this._scale9Grid.height?(o=this._scale9Grid.y,h=r-this._scale9Grid.bottom):(l=this._scale9Grid.y/(r-this._scale9Grid.bottom),l=i*l/(1+l),o=Math.round(l),h=i-l),e>=n-this._scale9Grid.width?(s=this._scale9Grid.x,a=n-this._scale9Grid.right):(l=this._scale9Grid.x/(n-this._scale9Grid.right),l=e*l/(1+l),s=Math.round(l),a=e-l);var u=Math.max(e-s-a,0),c=Math.max(i-o-h,0);s&&o&&t.drawTexture(fairygui.display.Image.getTexture(this._tex,0,0,s,o),0,0,s,o),a&&o&&t.drawTexture(fairygui.display.Image.getTexture(this._tex,n-a,0,a,o),e-a,0,a,o),s&&h&&t.drawTexture(fairygui.display.Image.getTexture(this._tex,0,r-h,s,h),0,i-h,s,h),a&&h&&t.drawTexture(fairygui.display.Image.getTexture(this._tex,n-a,r-h,a,h),e-a,i-h,a,h),u&&o&&this.drawTexture(0,fairygui.display.Image.getTexture(this._tex,s,0,n-s-a,o),s,0,u,o),u&&h&&this.drawTexture(1,fairygui.display.Image.getTexture(this._tex,s,r-h,n-s-a,h),s,i-h,u,h),c&&s&&this.drawTexture(2,fairygui.display.Image.getTexture(this._tex,0,o,s,r-o-h),0,o,s,c),c&&a&&this.drawTexture(3,fairygui.display.Image.getTexture(this._tex,n-a,o,a,r-o-h),e-a,o,a,c),u&&c&&this.drawTexture(4,fairygui.display.Image.getTexture(this._tex,s,o,n-s-a,r-o-h),s,o,u,c)}else t.drawTexture(this._tex,0,0,e,i);this.repaint()},n.drawTexture=function(t,e,i,n,r,s){void 0===r&&(r=0),void 0===s&&(s=0),-1==t||0==(this._tileGridIndice&1<<t)?this.graphics.drawTexture(e,i,n,r,s):this.graphics.fillTexture(e,i,n,r,s)},s(0,n,"tex",function(){return this._tex},function(t){this._tex!=t&&(this._tex=t,this._tex?this.size(this._tex.width*this._textureScaleX,this._tex.height*this._textureScaleY):this.size(0,0),this.markChanged())}),s(0,n,"scale9Grid",function(){return this._scale9Grid},function(t){this._scale9Grid=t,this.markChanged()}),s(0,n,"scaleByTile",function(){return this._scaleByTile},function(t){this._scaleByTile!=t&&(this._scaleByTile=t,this.markChanged())}),s(0,n,"tileGridIndice",function(){return this._tileGridIndice},function(t){this._tileGridIndice!=t&&(this._tileGridIndice=t,this.markChanged())}),e.getTexture=function(t,e,i,n,r){t.$GID||(t.$GID=E.getGID());var s=t.$GID+"."+e+"."+i+"."+n+"."+r,a=fairygui.display.Image._textureCache[s];return a||(a=fairygui.display.Image._textureCache[s]=C.create(t,e,i,n,r)),a},e.clearCache=function(){fairygui.display.Image._textureCache={}},e._textureCache={},e}(w)),Gt=function(t){function e(){this.interval=0,this.swing=!1,this.repeatDelay=0,this.playState=null,this._$3__texture=null,this._needRebuild=!1,this._playing=!1,this._frameCount=0,this._frames=null,this._currentFrame=0,this._boundsRect=null,this._start=0,this._end=0,this._times=0,this._endAt=0,this._status=0,this._endHandler=null,e.__super.call(this),this.playState=new N,this._playing=!0,this.mouseEnabled=!1,this.setPlaySettings(),this.on("display",this,this.__addToStage),this.on("undisplay",this,this.__removeFromStage)}r(e,"fairygui.display.MovieClip",t,"MovieClip1");var n=e.prototype;return n.setPlaySettings=function(t,e,i,n,r){void 0===t&&(t=0),void 0===e&&(e=-1),void 0===i&&(i=0),void 0===n&&(n=-1),this._start=t,this._end=e,(-1==this._end||this._end>this._frameCount-1)&&(this._end=this._frameCount-1),this._times=i,this._endAt=n,-1==this._endAt&&(this._endAt=this._end),this._status=0,this._endHandler=r,this.currentFrame=t},n.update=function(){this._playing&&0!=this._frameCount&&3!=this._status&&(this.playState.update(this),this._currentFrame!=this.playState.currentFrame&&(1==this._status?(this._currentFrame=this._start,this.playState.currentFrame=this._currentFrame,this._status=0):2==this._status?(this._currentFrame=this._endAt,this.playState.currentFrame=this._currentFrame,this._status=3,null!=this._endHandler&&this._endHandler.run()):(this._currentFrame=this.playState.currentFrame,this._currentFrame==this._end&&this._times>0&&(this._times--,0==this._times?this._status=2:this._status=1)),this.setFrame(this._frames[this._currentFrame])))},n.setFrame=function(t){this.graphics.clear(),null!=t&&this.graphics.drawTexture(t.texture,t.rect.x,t.rect.y)},n.__addToStage=function(){this._playing&&i.timer.frameLoop(1,this,this.update)},n.__removeFromStage=function(){this._playing&&i.timer.clear(this,this.update)},s(0,n,"frames",function(){return this._frames},function(t){this._frames=t,null!=this._frames?this._frameCount=this._frames.length:this._frameCount=0,(-1==this._end||this._end>this._frameCount-1)&&(this._end=this._frameCount-1),(-1==this._endAt||this._endAt>this._frameCount-1)&&(this._endAt=this._frameCount-1),(this._currentFrame<0||this._currentFrame>this._frameCount-1)&&(this._currentFrame=this._frameCount-1),this._frameCount>0?this.setFrame(this._frames[this._currentFrame]):this.setFrame(null),this.playState.rewind()}),s(0,n,"playing",function(){return this._playing},function(t){this._playing=t,t&&null!=this.stage?i.timer.frameLoop(1,this,this.update):i.timer.clear(this,this.update)}),s(0,n,"frameCount",function(){return this._frameCount}),s(0,n,"boundsRect",function(){return this._boundsRect},function(t){this._boundsRect=t}),s(0,n,"currentFrame",function(){return this._currentFrame},function(t){this._currentFrame!=t&&(this._currentFrame=t,this.playState.currentFrame=t,this.setFrame(this._currentFrame<this._frameCount?this._frames[this._currentFrame]:null))}),e}(w);i.__init([Nt,vt,yt,nt,et,Q,ot,Rt,wt,Tt])}(window,document,Laya)}).call(window)},24:function(t,e,i){var n,r=[];t.exports=function(t){r?r.push(t):t(n)},i.e(4,function(t){n=i(25);var e=r;r=null;for(var s=0,a=e.length;a>s;s++)e[s](n)})},26:function(t,e,i){var n,r=[];t.exports=function(t){r?r.push(t):t(n)},i.e(5,function(t){n=i(27);var e=r;r=null;for(var s=0,a=e.length;a>s;s++)e[s](n)})},28:function(t,e,i){var n,r=[];t.exports=function(t){r?r.push(t):t(n)},i.e(6,function(t){n=i(29);var e=r;r=null;for(var s=0,a=e.length;a>s;s++)e[s](n)})},31:function(t,e,i){t.exports=i.p+"loadiing@atlas_oy35a.png?585521ac35347f2ba4df0af0ef04624f"},32:function(t,e,i){t.exports=i.p+"loadiing.fui?0719330f8cd8949b9fac459d6fdf9388"}});