(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{162:function(e,n){},163:function(e,n){},392:function(e,n){},414:function(e,n){},416:function(e,n){},85:function(e,n,t){"use strict";var a=window.tongji=t(92),o=(t(109),t(424)),i=(t(88),"7780586f696310de2a8ddbec927fc078");window.pay=function(e,n,t,r){a.beginCharge(e,n,t,startup_param.pf);var u={};u.userToken=startup_param.userToken,u.channel_id=i,u.item_id=t,u.orderid=e,u.price=n,u.other="",getAjax("/g/pf/buymehappy/sign",u,function(e,n){console.log(e,n.sign);var t=n.sign;u.sign=t;var a="http://h5.1357g.com/g/fish.app/CORS/?s=1&u="+function(e,n){var t="";for(var a in t+=n,e)t+="&"+a+"="+e[a];return t}(u,"http://buymehappy.com.cn/index.php?g=Home&m=GameOauth&a=pay_info");o.get(a,function(e,n){e&&console.log(e);var t=JSON.parse(n.body),a=JSON.parse(t.data);parent.postMessage(a,"http://buymehappy.com.cn")})}),a.endCharge(e,"buymehappy"),r&&r()},e.exports=function(e){if(null==startup_param.userToken)return getAjax("/g/pf/buymehappy/sign",{other:"",channel_id:i},function(e,n){console.log(e,n.sign);var t=n.sign;parent.location.href="http://buymehappy.com.cn/index.php?g=Wap&m=App&a=game_login&channel_id="+i+"&other=&sign="+t+"&v="+Math.random()});getAjax("/g/pf/buymehappy/sign",{userToken:startup_param.userToken,channel_id:i},function(n,t){var a=t.sign,r="http://h5.1357g.com/g/fish.app/CORS/?s=1&u="+("http://buymehappy.com.cn/index.php?g=Home&m=GameOauth&a=get_userinfo&userToken="+startup_param.userToken+"&channel_id="+i+"&sign="+a);o.get(r,function(n,t){n&&console.log(n);var a=JSON.parse(t.body).userinfo;startup_param.nickname=a.wechaname,startup_param.face=a.portrait,startup_param.sex=a.sex,startup_param.city=a.city,startup_param.id=a.openid,e()})})}},91:function(e,n,t){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(n,t,a){return t&&e(n.prototype,t),a&&e(n,a),n}}();function i(){}var r=window.TDGA;r||((r={Account:i,onPageLeave:i,onReward:i,onChargeRequest:i,onChargeSuccess:i,onItemPurchase:i,onMissionBegin:i,onMissionCompleted:i,onEvent:i}).Account.setLevel=i);var u=new(function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this._delayOp=[],this._inited=!0}return o(e,[{key:"init",value:function(e){this._inited=!0}},{key:"_delay",value:function(e){if(!this._inited)return this._delayOp.push({f:e});e()}},{key:"userin",value:function(e){this._delay(function(){var n=0;if(window.cordova){n={Android:1,"BlackBerry 10":2,browser:3,iOS:4,WinCE:5,Tizen:6,"Mac OS X":7}[device.platform]||8}else"wechat"==startup_param.pf&&(n=101);r.Account({accountId:e.id,level:e.level,accountName:e.nickname,gameServer:"通用",accountType:n,gender:startup_param.sex})})}},{key:"userout",value:function(){this._delay(r.onPageLeave.bind(r))}},{key:"levelup",value:function(e){this._delay(r.Account.setLevel.bind(r.Account,e))}},{key:"reward",value:function(e,n){this._delay(r.onReward.bind(r,e,n))}},{key:"beginCharge",value:function(e,n,t,a,o){"string"==typeof t&&(o=a,a=t,t=Math.floor(n/3)),this._delay(function(){r.onChargeRequest({orderId:e,iapId:a,currencyAmount:n,currencyType:"CNY",virtualCurrencyAmount:t,paymentType:o})})}},{key:"endCharge",value:function(e,n){this._delay(function(){r.onChargeSuccess({orderId:e,paymentType:n})})}},{key:"enterGame",value:function(e){this._delay(function(){r.onMissionBegin(e.toString())})}},{key:"startGame",value:function(e,n,t){this._delay(function(){r.onItemPurchase({item:n,itemNumber:1,priceInVirtualCurrency:t}),r.onEvent(n,{})})}},{key:"endGame",value:function(e){this._delay(function(){r.onMissionCompleted(e.toString())})}},{key:"share",value:function(){this._delay(function(){r.onEvent("share",{user:{id:me.id,nickname:me.nickname}})})}},{key:"invite",value:function(e,n){this._delay(function(){r.onEvent("invite",{user:{id:me.id,nickname:me.nickname},table:{id:e,msg:n}})})}},{key:"event",value:function(e,n){this._delay(function(){r.onEvent(e,"object"==(void 0===n?"undefined":a(n))?n:{data:n})})}},{key:"changeToVirtualCurrency",value:function(e,n,t,a){t=t||"金币",a=a||"钻石",this._delay(function(){var o={};o[t]=e,o[a]=n,r.onEvent("buyCoin",o)})}},{key:"consume",value:function(e,n,t){this._delay(function(){r.onEvent("consume",{item:e,itemNumber:n,priceInVirtualCurrency:t})})}}]),e}());window.onunload=u.userout.bind(u),e.exports=u},92:function(e,n,t){"use strict";var a=t(91);e.exports=a}}]);