{"version":3,"sources":["webpack:///9.wechat.js","webpack:///./client/pf/wechat.js","webpack:///./client/tongji.js?b2f6***","webpack:///./client/wechat-jssdk/client.js","webpack:///./client/tongji_zhuge.js?7b0d***"],"names":["webpackJsonp",39,"module","exports","__webpack_require__","_noop","toRuleString","rule","str","length","wxst","cb","tryStop","_cb","wx","stopRecord","success","res","fail","err","timeoutVer","async","timeout","_init","onVoicePlayEnd","o","sndMap","localId","console","log","setInterval","now","Date","i","t","tongji","window","preInvite","v","opt","wechatObj","shareObj","type","title","pan","link","imgUrl","location","origin","pathname","desc","dizhu","shareOnChat","shareOnMoment","invite","tip","Laya","stage","canvasDegree","tipon","popup","share","preShareResult","roomid","setnum","participants","winners","img","join","pay","orderid","money","beginCharge","getAjax","order","openid","startup_param","r","errMsg","endCharge","chooseWXPay","wxq","queue","task","wxr","starting","stopping","startRecord","push","sucess","setTimeout","sendRecord","token","uploadVoice","isShowProgressTips","serverId","playRecord","downloadVoice","playVoice","accWechatIntf","conf","WechatJSSDK","jsApiList","wxInit","_t","clearInterval","e",43,69,"_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","document","defaultScriptUrl","protocol","defaultApiList","wechatConfig","this","config","customUrl","apiList","defaultItem","indexOf","debug","loadScript","value","newSignConfig","_this","selfConfig","signConfig","appId","timestamp","nonceStr","signature","slice","warn","ready","alert","call","error","JSON","stringify","_this2","ele","createElement","onload","signSignature","onerror","linkEle","getElementsByTagName","parentNode","insertBefore","src","info","callWechatApi","apiName","customAPI",74,"_typeof","Symbol","iterator","obj","constructor","zhuge","methods","split","factory","b","a","Array","arguments","unshift","load","x","getElementById","verDate","verStr","getFullYear","toString","getMonth","getDate","id","identify","track","ename","callback","c","Stat","_delayOp","_inited","f","me","_delay","qudao","cordova","device","platform","pf","name","nickname","gender","sex","level","gameServer","accountType","n","reason","count","tickets","payment","Math","floor","orderId","iapId","currencyAmount","currencyType","virtualCurrencyAmount","paymentType","tableid","table","item","itemNumber","priceInVirtualCurrency","user","tabledesc","msg","data","m","n_name","m_name","detail","price","onunload","userout","bind"],"mappings":"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","file":"9.wechat.js?e6ad59da92ed0a8bc648","sourcesContent":["webpackJsonp([9],{\n\n/***/ 39:\n/*!*************************************************************************!*\\\n  !*** ./~/babel-loader/lib?{\"presets\":[\"es2015\"]}!./client/pf/wechat.js ***!\n  \\*************************************************************************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar tongji = window.tongji = __webpack_require__(/*! ../tongji.js */ 43);\n\tfunction _noop() {}\n\tfunction toRuleString(rule) {\n\t\tvar str = '';\n\t\trule['10'] && (str += '五小牛 ');\n\t\trule['7'] && (str += '四炸牛 ');\n\t\trule['5'] && (str += '五花牛 ');\n\t\trule['4'] && (str += '四花牛 ');\n\t\tif (str.length == 0) str = '不带牛牛以上的牌型';else str = '带' + str;\n\t\treturn str;\n\t}\n\twindow.preInvite = function (v, opt) {\n\t\tif (!window.wechatObj) return;\n\t\n\t\tvar shareObj = {\n\t\t\ttype: 'link',\n\t\t\ttitle: '牛牛大作战，房号:' + v + '(' + opt.pan + '局)',\n\t\t\tlink: 'http://h5.1357g.com/g/niuniu.app?room=' + v,\n\t\t\t//link:'http://h5.1357g.com/wnn/res244.jpg',\n\t\t\timgUrl: location.origin + location.pathname + 'res/logo.png',\n\t\t\t//dataUrl:'http://h5.1357g.com/wnn/res244.jpg',\n\t\t\tdesc: '轮庄，' + toRuleString(opt.rule) + ', ' + opt.dizhu + '底！'\n\t\t\t//success: function (){},\n\t\t\t//cancel: function (){}\n\t\t};\n\t\twindow.wechatObj.shareOnChat(shareObj);\n\t\twindow.wechatObj.shareOnMoment(shareObj);\n\t\n\t\twindow.invite = function () {\n\t\t\tvar tip = '点击' + (Laya.stage.canvasDegree == 0 ? '右' : '左') + '上角分享按钮，邀请好友加入游戏';\n\t\t\ttipon(tip).popup();\n\t\t\ttongji.invite(v, '轮庄，' + toRuleString(opt.rule) + ', ' + opt.dizhu + '底！');\n\t\t};\n\t};\n\twindow.invite = function () {\n\t\tvar tip = '点击' + (Laya.stage.canvasDegree == 0 ? '右' : '左') + '上角分享按钮，邀请好友加入游戏';\n\t\ttipon(tip).popup();\n\t};\n\twindow.share = function () {\n\t\tvar tip = '点击' + (Laya.stage.canvasDegree == 0 ? '右' : '左') + '上角分享按钮，分享到朋友圈';\n\t\ttipon(tip).popup();\n\t\ttongji.share();\n\t};\n\twindow.preShareResult = function (roomid, setnum, participants, winners, img) {\n\t\tvar shareObj = {\n\t\t\ttype: 'link',\n\t\t\ttitle: '牛牛大作战，房号:' + roomid + (setnum != null ? ', 第' + setnum + '局' : ''),\n\t\t\tlink: 'http://h5.1357g.com/g/niuniu.app' + img,\n\t\t\t//link:'http://h5.1357g.com/wnn/res244.jpg',\n\t\t\timgUrl: 'http://h5.1357g.com/g/niuniu.app' + img,\n\t\t\t//dataUrl:'http://h5.1357g.com/wnn/res244.jpg',\n\t\t\tdesc: (participants || []).join(',') + ' 胜利者 ' + (winners || []).join(',')\n\t\t\t//success: function (){},\n\t\t\t//cancel: function (){}\t\t\n\t\t};\n\t\twindow.wechatObj.shareOnChat(shareObj);\n\t\twindow.wechatObj.shareOnMoment(shareObj);\n\t};\n\twindow.pay = function (orderid, money, desc, cb) {\n\t\t!cb && (cb = _noop);\n\t\ttongji.beginCharge(orderid, money, desc, '微信公众号支付');\n\t\tgetAjax('weixin/getWechatpayParams', { order: orderid, money: money, openid: startup_param.openid }, function (err, r) {\n\t\t\tif (err || r.err) return tipon(err || r.err).popup();\n\t\t\tr.success = function (res) {\n\t\t\t\tif (res.errMsg == \"chooseWXPay:ok\") {\n\t\t\t\t\ttongji.endCharge(orderid, '微信公众号支付');\n\t\t\t\t\tcb(null, true);\n\t\t\t\t} else {\n\t\t\t\t\tcb(null, false);\n\t\t\t\t}\n\t\t\t};\n\t\t\twx.chooseWXPay(r);\n\t\t});\n\t};\n\tvar async = __webpack_require__(/*! async */ 34);\n\tvar wxq = async.queue(function (task, cb) {\n\t\tif (typeof task == 'function') return task(cb);\n\t\tcb();\n\t});\n\tvar wxr = { starting: false, stopping: false };\n\tfunction wxst(cb) {\n\t\t// window.log && window.log('stoping rec');\n\t\tfunction tryStop(_cb) {\n\t\t\twx.stopRecord({\n\t\t\t\tsuccess: function success(res) {\n\t\t\t\t\t// window.log && window.log('rec stopped');\n\t\t\t\t\t_cb(null, res);\n\t\t\t\t},\n\t\t\t\tfail: function fail(err) {\n\t\t\t\t\t// window.log && window.log('rec stop failed');\n\t\t\t\t\t_cb(err);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tvar timeoutVer = async.timeout(tryStop, 800);\n\t\ttimeoutVer(cb);\n\t}\n\twindow.startRecord = function (cb) {\n\t\tif (wxr.starting) return cb(wxr.starting);\n\t\twxr.starting = true;\n\t\twxq.push([\n\t\t// 先停下来\n\t\t// wxst, \n\t\t// 再开始\n\t\tfunction (_cb) {\n\t\t\t// window.log && window.log('starting rec');\n\t\t\twx.startRecord({\n\t\t\t\tfail: function fail(err) {\n\t\t\t\t\t// window.log&&  window.log('rec start failed');\n\t\t\t\t\tcb(err);\n\t\t\t\t\tcb = null;\n\t\t\t\t},\n\t\t\t\tsucess: function sucess() {\n\t\t\t\t\t// window.log && window.log('rec started');\n\t\t\t\t}\n\t\t\t});\n\t\t\t_cb();\n\t\t},\n\t\t// 保证500ms之后才能调用其它的\n\t\tfunction (_cb) {\n\t\t\tsetTimeout(_cb, 500);\n\t\t}, function (_cb) {\n\t\t\twxr.starting = false;\n\t\t\tcb && cb(wxr.starting);\n\t\t\t_cb();\n\t\t}]);\n\t};\n\twindow.stopRecord = function (cb) {\n\t\tif (wxr.stopping) return cb('already stopping');\n\t\twxr.stopping = true;\n\t\twxq.push(wxst, function (err, res) {\n\t\t\twxr.stopping = false;\n\t\t\tif (!cb) return;\n\t\t\tif (err) return cb(err);\n\t\t\twindow.sendRecord(res.localId, cb);\n\t\t});\n\t\t// wx.stopRecord({\n\t\t// \tsuccess: function (res) {\n\t\t// \t\tcb && window.sendRecord(res.localId, cb);\n\t\t// \t}\n\t\t// });\n\t};\n\twindow.sendRecord = function (token, cb) {\n\t\twx.uploadVoice({\n\t\t\tlocalId: token, // 需要上传的音频的本地ID，由stopRecord接口获得\n\t\t\tisShowProgressTips: 0, // 默认为1，显示进度提示\n\t\t\tsuccess: function success(res) {\n\t\t\t\tvar serverId = res.serverId; // 返回音频的服务器端ID\n\t\t\t\tcb(null, serverId);\n\t\t\t}\n\t\t});\n\t};\n\tvar sndMap = {};\n\twindow.playRecord = function (token, cb) {\n\t\twx.downloadVoice({\n\t\t\tserverId: token, // 需要下载的音频的服务器端ID，由uploadVoice接口获得\n\t\t\tisShowProgressTips: 0, // 默认为1，显示进度提示\n\t\t\tsuccess: function success(res) {\n\t\t\t\tvar localId = res.localId; // 返回音频的本地ID\n\t\t\t\twx.playVoice({ localId: localId });\n\t\t\t\tsndMap[localId] = { cb: cb, t: new Date() };\n\t\t\t}\n\t\t});\n\t};\n\t\n\tfunction _init() {\n\t\twx.onVoicePlayEnd({\n\t\t\tsuccess: function success(res) {\n\t\t\t\tvar o = sndMap[res.localId];\n\t\t\t\tconsole.log(res);\n\t\t\t\tif (typeof o.cb === 'function') {\n\t\t\t\t\to.cb();\n\t\t\t\t\tdelete sndMap[res.localId];\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\n\t\tsetInterval(function () {\n\t\t\tvar now = new Date();\n\t\t\tfor (var i in sndMap) {\n\t\t\t\tvar o = sndMap[i];\n\t\t\t\tif (now - o.t >= 3000) {\n\t\t\t\t\to.cb && o.cb();\n\t\t\t\t\tdelete sndMap[i];\n\t\t\t\t}\n\t\t\t}\n\t\t}, 3000);\n\t}\n\taccWechatIntf('weixin/sign', {}, function (err, conf) {\n\t\tif (err) return console.log(err);\n\t\tvar WechatJSSDK = __webpack_require__(/*! ../wechat-jssdk/client.js */ 69);\n\t\tconf.jsApiList = ['onMenuShareTimeline', 'onMenuShareAppMessage', 'startRecord', 'stopRecord', 'onVoiceRecordEnd', 'playVoice', 'pauseVoice', 'stopVoice', 'onVoicePlayEnd', 'uploadVoice', 'downloadVoice'];\n\t\tconf.success = function () {\n\t\t\twindow.wxInit && window.wxInit();\n\t\t};\n\t\tvar wechatObj = window.wechatObj = new WechatJSSDK(conf);\n\t});\n\t\n\twindow.wxInit = function () {\n\t\tvar shareObj = {\n\t\t\ttype: 'link',\n\t\t\ttitle: '牛牛大作战，大家来斗牛',\n\t\t\tlink: location.origin + location.pathname,\n\t\t\timgUrl: location.origin + location.pathname + 'res/logo.png',\n\t\t\tdesc: ''\n\t\t\t//success: function (){},\n\t\t\t//cancel: function (){}\t\t\n\t\t};\n\t\ttry {\n\t\t\twindow.wechatObj.shareOnChat(shareObj);\n\t\t\twindow.wechatObj.shareOnMoment(shareObj);\n\t\t} catch (e) {\n\t\t\tconsole.log(e);\n\t\t}\n\t\n\t\twx.startRecord();\n\t\tfunction tryStop() {\n\t\t\tvar _t = setInterval(function () {\n\t\t\t\twx.stopRecord({\n\t\t\t\t\tsuccess: function success(res) {\n\t\t\t\t\t\tclearInterval(_t);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}, 300);\n\t\t}\n\t\ttryStop();\n\t\n\t\t_init();\n\t};\n\n/***/ },\n\n/***/ 43:\n/*!**************************!*\\\n  !*** ./client/tongji.js ***!\n  \\**************************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar t = __webpack_require__(/*! ./tongji_zhuge.js */ 74);\n\tmodule.exports = t;\n\n/***/ },\n\n/***/ 69:\n/*!***************************************!*\\\n  !*** ./client/wechat-jssdk/client.js ***!\n  \\***************************************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t/*!\n\t * @license MIT\n\t * Client side js to use wechat-jssdk, also works with other server side service.\n\t * https://github.com/JasonBoy/wechat-jssdk\n\t */\n\t\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar document = window.document;\n\tvar location = window.location;\n\t\n\t//default wechat script url\n\tvar defaultScriptUrl = location.protocol + '//res.wx.qq.com/open/js/jweixin-1.0.0.js';\n\t\n\t//default apis with share-on-moment and share-on-chat\n\tvar defaultApiList = ['onMenuShareTimeline', 'onMenuShareAppMessage'];\n\t\n\tvar WechatJSSDK = function () {\n\t  /**\n\t   * Initialize the WechatJSSDK instance\n\t   * @constructor\n\t   * @param {object} wechatConfig, should contain like:\n\t   *   {\n\t   *      appId: 'xxxx',\n\t   *      timestamp: '',\n\t   *      nonceStr: '',\n\t   *      signature: '',\n\t   *      jsApiList: ['onMenuShareTimeline', 'onMenuShareAppMessage', ...],\n\t   *      success: function(){}, //sign success callback\n\t   *      error: function(){}, //sign error callback\n\t   *      customUrl: 'http://res.wx.qq.com/open/js/jweixin-1.0.0.js' // set custom weixin script url\n\t   *   }\n\t   * @returns {WechatJSSDK}\n\t   */\n\t  function WechatJSSDK(wechatConfig) {\n\t    _classCallCheck(this, WechatJSSDK);\n\t\n\t    //using new WechatJSSDK(config);\n\t    if (this instanceof WechatJSSDK) {\n\t      this.config = wechatConfig || {};\n\t      if (this.config.customUrl) {\n\t        defaultScriptUrl = this.config.customUrl;\n\t        delete this.config.customUrl;\n\t      }\n\t      var apiList = this.config.jsApiList;\n\t      //add more apis if passed in\n\t      if (!apiList || apiList.length <= 0) {\n\t        this.config.jsApiList = defaultApiList;\n\t      } else {\n\t        var i = 0;\n\t        var length = defaultApiList.length;\n\t        for (; i < length; i++) {\n\t          var defaultItem = defaultApiList[i];\n\t          if (apiList.indexOf(defaultItem) < 0) {\n\t            apiList.push(defaultItem);\n\t          }\n\t        }\n\t      }\n\t      this.debug = !!this.config.debug;\n\t      this.loadScript();\n\t      return this;\n\t    }\n\t    return new WechatJSSDK(wechatConfig);\n\t  }\n\t\n\t  /**\n\t   * Sign the signature now\n\t   * @param {object} [newSignConfig], debug mode, appId, jsApiList cannot be changed!!!\n\t   *        , should only provide new signature specific config\n\t   * @returns {WechatJSSDK} sdk instance\n\t   */\n\t\n\t\n\t  _createClass(WechatJSSDK, [{\n\t    key: 'signSignature',\n\t    value: function signSignature(newSignConfig) {\n\t      var _this = this;\n\t\n\t      var selfConfig = this.config;\n\t      var config = newSignConfig || selfConfig;\n\t      var signConfig = {\n\t        debug: this.debug,\n\t        appId: selfConfig.appId,\n\t        timestamp: config.timestamp || selfConfig.timestamp,\n\t        nonceStr: config.nonceStr || selfConfig.nonceStr,\n\t        signature: config.signature || selfConfig.signature,\n\t        jsApiList: selfConfig.jsApiList.slice(0, selfConfig.jsApiList.length)\n\t      };\n\t      var debug = this.debug;\n\t      if (!window.wx) {\n\t        console.warn('wechat js not defined');\n\t        return this;\n\t      }\n\t      var wx = window.wx;\n\t      wx.config(signConfig);\n\t      wx.ready(function () {\n\t        console.log('sign signature finished...');\n\t        debug && alert('sign signature finished...');\n\t        config.success && config.success.call(_this);\n\t      });\n\t\n\t      wx.error(function (err) {\n\t        debug && alert('sign error: ' + JSON.stringify(err));\n\t        config.error && config.error.call(_this, err);\n\t      });\n\t\n\t      //export original wx object\n\t      this.wx || (this.wx = wx);\n\t      return this;\n\t    }\n\t  }, {\n\t    key: 'loadScript',\n\t\n\t\n\t    /**\n\t     * Load wechat js script and sign the signature\n\t     * @returns {WechatJSSDK}\n\t     */\n\t    value: function loadScript() {\n\t      var _this2 = this;\n\t\n\t      var ele = document.createElement('script');\n\t      ele.type = 'text\\/javascript';\n\t      ele.async = true;\n\t      ele.onload = function () {\n\t        console.log('Wechat script loaded successfully!');\n\t        //init the wechat config\n\t        _this2.signSignature();\n\t      };\n\t      ele.onerror = function (err) {\n\t        console.error('Failed to load wechat script!');\n\t        console.error(err);\n\t        _this2.debug && alert('Cannot load wechat script!');\n\t      };\n\t      var linkEle = document.getElementsByTagName('script')[0];\n\t      linkEle.parentNode.insertBefore(ele, linkEle);\n\t      ele.src = defaultScriptUrl;\n\t      return this;\n\t    }\n\t  }, {\n\t    key: 'shareOnMoment',\n\t\n\t\n\t    /**\n\t     * Quick way to set custom moment share configs\n\t     * @param {object} info\n\t     * @returns {WechatJSSDK}\n\t     */\n\t    value: function shareOnMoment(info) {\n\t      if (!info) return this;\n\t      return this.callWechatApi('onMenuShareTimeline', info);\n\t    }\n\t  }, {\n\t    key: 'shareOnChat',\n\t\n\t\n\t    /**\n\t     * Quick way to set custom chat share configs\n\t     * @param {object} info\n\t     * @returns {WechatJSSDK}\n\t     */\n\t    value: function shareOnChat(info) {\n\t      if (!info) return this;\n\t      return this.callWechatApi('onMenuShareAppMessage', info);\n\t    }\n\t  }, {\n\t    key: 'callWechatApi',\n\t\n\t\n\t    /**\n\t     * Call any wechat api\n\t     * @param {string} apiName\n\t     * @param {object} config specific api config\n\t     * @returns {WechatJSSDK}\n\t     */\n\t    value: function callWechatApi(apiName, config) {\n\t      if (!apiName) return this;\n\t      var debug = this.debug;\n\t      if (this.config.jsApiList.indexOf(apiName) < 0) {\n\t        debug && alert('the wechat api [' + apiName + '] you call was not registered, \\npls add the api into your [jsApiList] config');\n\t        return this;\n\t      }\n\t      var customAPI = this.wx[apiName];\n\t      if (!customAPI || 'function' !== typeof customAPI) {\n\t        debug && alert('no such api [' + apiName + '] found!');\n\t        return this;\n\t      }\n\t      customAPI(config);\n\t      return this;\n\t    }\n\t  }]);\n\t\n\t  return WechatJSSDK;\n\t}();\n\t\n\tmodule.exports = WechatJSSDK;\n\n/***/ },\n\n/***/ 74:\n/*!********************************!*\\\n  !*** ./client/tongji_zhuge.js ***!\n  \\********************************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\twindow.zhuge = window.zhuge || [];\n\twindow.zhuge.methods = \"_init debug identify track trackLink trackForm page\".split(\" \");\n\twindow.zhuge.factory = function (b) {\n\t    return function () {\n\t        var a = Array.prototype.slice.call(arguments);\n\t        a.unshift(b);\n\t        window.zhuge.push(a);\n\t        return window.zhuge;\n\t    };\n\t};\n\tfor (var i = 0; i < window.zhuge.methods.length; i++) {\n\t    var key = window.zhuge.methods[i];\n\t    window.zhuge[key] = window.zhuge.factory(key);\n\t}\n\twindow.zhuge.load = function (b, x) {\n\t    if (!document.getElementById(\"zhuge-js\")) {\n\t        var a = document.createElement(\"script\");\n\t        var verDate = new Date();\n\t        var verStr = verDate.getFullYear().toString() + verDate.getMonth().toString() + verDate.getDate().toString();\n\t        a.type = \"text/javascript\";\n\t        a.id = \"zhuge-js\";\n\t        a.async = !0;\n\t        a.src = (location.protocol == 'http:' ? \"http://sdk.zhugeio.com/zhuge.min.js?v=\" : 'https://zgsdk.zhugeio.com/zhuge.min.js?v=') + verStr;\n\t        a.onerror = function () {\n\t            window.zhuge.identify = window.zhuge.track = function (ename, props, callback) {\n\t                if (callback && Object.prototype.toString.call(callback) === '[object Function]') callback();\n\t            };\n\t        };\n\t        var c = document.getElementsByTagName(\"script\")[0];\n\t        c.parentNode.insertBefore(a, c);\n\t        window.zhuge._init(b, x);\n\t    }\n\t};\n\twindow.zhuge.load('a6294c4a959947719afd7248e98fe072'); //配置应用的AppKey\n\t\n\tfunction noop() {}\n\t\n\tvar Stat = function () {\n\t    function Stat() {\n\t        _classCallCheck(this, Stat);\n\t\n\t        this._delayOp = [];\n\t        this._inited = true;\n\t    }\n\t\n\t    _createClass(Stat, [{\n\t        key: \"init\",\n\t        value: function init(key) {\n\t            this._inited = true;\n\t            return;\n\t        }\n\t    }, {\n\t        key: \"_delay\",\n\t        value: function _delay(f) {\n\t            if (!this._inited) {\n\t                return this._delayOp.push({ f: f });\n\t            }\n\t            f();\n\t        }\n\t    }, {\n\t        key: \"userin\",\n\t        value: function userin(me) {\n\t            this._delay(function () {\n\t                var qudao = 0;\n\t                if (!!window.cordova) {\n\t                    var o = { \"Android\": 1, \"BlackBerry 10\": 2, \"browser\": 3, \"iOS\": 4, \"WinCE\": 5, \"Tizen\": 6, \"Mac OS X\": 7 };\n\t                    qudao = device.platform;\n\t                } else if (startup_param.pf == 'wechat') qudao = 'wechat';\n\t                zhuge.identify(me.id, {\n\t                    name: me.nickname,\n\t                    //预定义属性\n\t                    gender: startup_param.sex,\n\t                    //预定义属性\n\t                    level: me.level,\n\t                    gameServer: '通用',\n\t                    accountType: qudao\n\t                });\n\t            });\n\t        }\n\t    }, {\n\t        key: \"userout\",\n\t        value: function userout() {\n\t            this._delay(function () {\n\t                zhuge.track('userout');\n\t            });\n\t        }\n\t    }, {\n\t        key: \"levelup\",\n\t        value: function levelup(n) {\n\t            this._delay(function () {\n\t                zhuge.track('levelup', { level: n });\n\t            });\n\t        }\n\t    }, {\n\t        key: \"reward\",\n\t        value: function reward(n, reason) {\n\t            this._delay(function () {\n\t                zhuge.track('reward', { count: n, reason: reason });\n\t            });\n\t        }\n\t    }, {\n\t        key: \"beginCharge\",\n\t        value: function beginCharge(orderid, money, tickets, desc, payment) {\n\t            if (typeof tickets == 'string') {\n\t                payment = desc;\n\t                desc = tickets;\n\t                tickets = Math.floor(money / 3);\n\t            }\n\t            this._delay(function () {\n\t                zhuge.track('beginCharge', {\n\t                    orderId: orderid,\n\t                    iapId: desc,\n\t                    currencyAmount: money,\n\t                    currencyType: 'CNY',\n\t                    virtualCurrencyAmount: tickets,\n\t                    paymentType: payment\n\t                });\n\t            });\n\t        }\n\t    }, {\n\t        key: \"endCharge\",\n\t        value: function endCharge(orderid, payment) {\n\t            this._delay(function () {\n\t                zhuge.track('endCharge', {\n\t                    orderId: orderid,\n\t                    paymentType: payment\n\t                });\n\t            });\n\t        }\n\t    }, {\n\t        key: \"enterGame\",\n\t        value: function enterGame(tableid) {\n\t            this._delay(function () {\n\t                zhuge.track('enterGame', { table: tableid });\n\t            });\n\t        }\n\t    }, {\n\t        key: \"startGame\",\n\t        value: function startGame(tableid, name, tickets) {\n\t            this._delay(function () {\n\t                zhuge.track('startgame', { table: tableid, name: name });\n\t                if (tickets) zhuge.track('consume', { item: name, itemNumber: 1, priceInVirtualCurrency: tickets });\n\t            });\n\t        }\n\t    }, {\n\t        key: \"endGame\",\n\t        value: function endGame(tableid) {\n\t            this._delay(function () {\n\t                zhuge.track('endGame', { table: tableid });\n\t            });\n\t        }\n\t    }, {\n\t        key: \"share\",\n\t        value: function share() {\n\t            this._delay(function () {\n\t                zhuge.track('share', { user: { id: me.id, nickname: me.nickname } });\n\t            });\n\t        }\n\t    }, {\n\t        key: \"invite\",\n\t        value: function invite(tableid, tabledesc) {\n\t            this._delay(function () {\n\t                zhuge.track('invite', { user: { id: me.id, nickname: me.nickname }, table: { id: tableid, msg: tabledesc } });\n\t            });\n\t        }\n\t    }, {\n\t        key: \"event\",\n\t        value: function event(name, data) {\n\t            this._delay(function () {\n\t                zhuge.track(name, (typeof data === \"undefined\" ? \"undefined\" : _typeof(data)) == 'object' ? data : { data: data });\n\t            });\n\t        }\n\t\n\t        /**\n\t         * \n\t         * @param {number} n , 换多少币\n\t         * @param {number} m ，上级币的数量\n\t         * @param {string|null} n_name, 本级货币名称，默认金币\n\t         * @param {string|null} m_name, 上级货币名称，默认钻石\n\t         */\n\t\n\t    }, {\n\t        key: \"changeToVirtualCurrency\",\n\t        value: function changeToVirtualCurrency(n, m, n_name, m_name) {\n\t            n_name = n_name || '金币';\n\t            m_name = m_name || '钻石';\n\t            this._delay(function () {\n\t                var detail = {};\n\t                detail[n_name] = n;\n\t                detail[m_name] = m;\n\t                zhuge.track('buyCoin', detail);\n\t            });\n\t        }\n\t        /**\n\t         * 消耗虚拟币，如果有3个参数，那么是消耗n*price的币，\n\t         * @param {string} name \n\t         * @param {number} n \n\t         * @param {number|null} price \n\t         */\n\t\n\t    }, {\n\t        key: \"consume\",\n\t        value: function consume(name, n, price) {\n\t            this._delay(function () {\n\t                zhuge.track('consume', { item: name, itemNumber: n, priceInVirtualCurrency: price });\n\t            });\n\t        }\n\t    }]);\n\t\n\t    return Stat;\n\t}();\n\t\n\tvar tongji = new Stat();\n\twindow.onunload = tongji.userout.bind(tongji);\n\t\n\tmodule.exports = tongji;\n\n/***/ }\n\n});\n\n\n/** WEBPACK FOOTER **\n ** 9.wechat.js?e6ad59da92ed0a8bc648\n **/","var tongji=window.tongji=require('../tongji.js');\r\nfunction _noop() {}\r\nfunction toRuleString(rule) {\r\n\tvar str='';\r\n\trule['10']&& (str+='五小牛 ');\r\n\trule['7']&& (str+='四炸牛 ');\r\n\trule['5']&& (str+='五花牛 ');\r\n\trule['4']&& (str+='四花牛 ');\r\n\tif (str.length==0) str='不带牛牛以上的牌型';\r\n\telse str='带'+str;\r\n\treturn str;\r\n}\r\nwindow.preInvite=function(v, opt) {\r\n\tif (!window.wechatObj) return;\r\n\r\n\tvar shareObj={\r\n\t\ttype: 'link',\r\n\t\ttitle: '牛牛大作战，房号:'+v+'('+opt.pan+'局)',\r\n\t\tlink: 'http://h5.1357g.com/g/niuniu.app?room='+v,\r\n\t\t//link:'http://h5.1357g.com/wnn/res244.jpg',\r\n\t\timgUrl: location.origin+location.pathname+'res/logo.png',\r\n\t\t//dataUrl:'http://h5.1357g.com/wnn/res244.jpg',\r\n\t\tdesc: '轮庄，'+toRuleString(opt.rule)+', '+opt.dizhu+'底！',\r\n\t\t//success: function (){},\r\n\t\t//cancel: function (){}\r\n\t};\r\n\twindow.wechatObj.shareOnChat(shareObj);\r\n\twindow.wechatObj.shareOnMoment(shareObj);\r\n\r\n\twindow.invite=function() {\r\n\t\tvar tip='点击'+(Laya.stage.canvasDegree==0?'右':'左')+'上角分享按钮，邀请好友加入游戏';\r\n\t\ttipon(tip).popup();\r\n\t\ttongji.invite(v, '轮庄，'+toRuleString(opt.rule)+', '+opt.dizhu+'底！');\r\n\t}\r\n}\r\nwindow.invite=function() {\r\n\tvar tip='点击'+(Laya.stage.canvasDegree==0?'右':'左')+'上角分享按钮，邀请好友加入游戏';\r\n\ttipon(tip).popup();\r\n}\r\nwindow.share=function() {\r\n\tvar tip='点击'+(Laya.stage.canvasDegree==0?'右':'左')+'上角分享按钮，分享到朋友圈';\r\n\ttipon(tip).popup();\r\n\ttongji.share();\r\n}\r\nwindow.preShareResult=function(roomid, setnum, participants, winners, img) {\r\n\tvar shareObj={\r\n\t\ttype: 'link',\r\n\t\ttitle: '牛牛大作战，房号:'+roomid+(setnum!=null?(', 第'+setnum+'局'):''),\r\n\t\tlink: 'http://h5.1357g.com/g/niuniu.app'+img,\r\n\t\t//link:'http://h5.1357g.com/wnn/res244.jpg',\r\n\t\timgUrl: 'http://h5.1357g.com/g/niuniu.app'+img,\r\n\t\t//dataUrl:'http://h5.1357g.com/wnn/res244.jpg',\r\n\t\tdesc: (participants||[]).join(',')+' 胜利者 '+(winners||[]).join(','),\r\n\t\t//success: function (){},\r\n\t\t//cancel: function (){}\t\t\r\n\t}\r\n\twindow.wechatObj.shareOnChat(shareObj);\r\n\twindow.wechatObj.shareOnMoment(shareObj);\r\n}\r\nwindow.pay=function(orderid, money, desc, cb) {\r\n\t!cb && (cb=_noop);\r\n\ttongji.beginCharge(orderid, money, desc, '微信公众号支付');\r\n\tgetAjax('weixin/getWechatpayParams',{order:orderid, money:money, openid:startup_param.openid}, function(err, r) {\r\n\t\tif (err || r.err) return tipon(err||r.err).popup();\r\n\t\tr.success=function(res) {\r\n\t\t\tif(res.errMsg == \"chooseWXPay:ok\"){\r\n\t\t\t\ttongji.endCharge(orderid, '微信公众号支付');\r\n\t\t\t\tcb(null, true);\r\n\t\t\t}else{\r\n\t\t\t\tcb(null, false);\r\n\t\t\t}\r\n\t\t}\r\n\t\twx.chooseWXPay(r);\r\n\t})\r\n}\r\nvar async=require('async');\r\nvar wxq=async.queue(function(task, cb) {\r\n\tif (typeof task=='function') return task(cb);\r\n\tcb();\r\n});\r\nvar wxr={starting:false, stopping:false};\r\nfunction wxst(cb) {\r\n\t// window.log && window.log('stoping rec');\r\n\tfunction tryStop(_cb) {\r\n\t\twx.stopRecord({\r\n\t\t\tsuccess:function(res) {\r\n\t\t\t\t// window.log && window.log('rec stopped');\r\n\t\t\t\t_cb(null, res);\r\n\t\t\t},\r\n\t\t\tfail:function(err) {\r\n\t\t\t\t// window.log && window.log('rec stop failed');\r\n\t\t\t\t_cb(err);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tvar timeoutVer=async.timeout(tryStop, 800);\r\n\ttimeoutVer(cb);\r\n}\r\nwindow.startRecord=function(cb) {\r\n\tif (wxr.starting) return cb(wxr.starting);\r\n\twxr.starting=true;\r\n\twxq.push([\r\n\t\t// 先停下来\r\n\t\t// wxst, \r\n\t\t// 再开始\r\n\t\tfunction(_cb) {\r\n\t\t\t// window.log && window.log('starting rec');\r\n\t\t\twx.startRecord({\r\n\t\t\t\tfail:function(err) {\r\n\t\t\t\t\t// window.log&&  window.log('rec start failed');\r\n\t\t\t\t\tcb(err);\r\n\t\t\t\t\tcb=null;\r\n\t\t\t\t},\r\n\t\t\t\tsucess:function() {\r\n\t\t\t\t\t// window.log && window.log('rec started');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t_cb();\r\n\t\t},\r\n\t\t// 保证500ms之后才能调用其它的\r\n\t\tfunction(_cb) {\r\n\t\t\tsetTimeout(_cb, 500);\r\n\t\t},\r\n\t\tfunction(_cb) {\r\n\t\t\twxr.starting=false;\r\n\t\t\tcb && cb(wxr.starting);\r\n\t\t\t_cb();\r\n\t\t}\r\n\t]);\r\n}\r\nwindow.stopRecord=function(cb) {\r\n\tif (wxr.stopping) return cb('already stopping');\r\n\twxr.stopping=true;\r\n\twxq.push(wxst, function(err, res) {\r\n\t\twxr.stopping=false;\r\n\t\tif (!cb) return;\r\n\t\tif (err) return cb(err);\r\n\t\twindow.sendRecord(res.localId, cb);\r\n\t});\r\n\t// wx.stopRecord({\r\n\t// \tsuccess: function (res) {\r\n\t// \t\tcb && window.sendRecord(res.localId, cb);\r\n\t// \t}\r\n\t// });\r\n}\r\nwindow.sendRecord=function(token, cb) {\r\n\twx.uploadVoice({\r\n\t\tlocalId: token, // 需要上传的音频的本地ID，由stopRecord接口获得\r\n\t\tisShowProgressTips: 0, // 默认为1，显示进度提示\r\n\t\tsuccess: function (res) {\r\n\t\t\tvar serverId = res.serverId; // 返回音频的服务器端ID\r\n\t\t\tcb(null, serverId);\r\n\t\t}\r\n\t});\r\n}\r\nvar sndMap={};\r\nwindow.playRecord=function(token, cb) {\r\n\twx.downloadVoice({\r\n\t\tserverId: token, // 需要下载的音频的服务器端ID，由uploadVoice接口获得\r\n\t\tisShowProgressTips: 0, // 默认为1，显示进度提示\r\n\t\tsuccess: function (res) {\r\n\t\t\tvar localId = res.localId; // 返回音频的本地ID\r\n\t\t\twx.playVoice({localId:localId});\r\n\t\t\tsndMap[localId]={cb:cb, t:new Date()};\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction _init() {\r\n\twx.onVoicePlayEnd({\r\n\t\tsuccess: function (res) {\r\n\t\t\tvar o=sndMap[res.localId];\r\n\t\t\tconsole.log(res);\r\n\t\t\tif (typeof o.cb==='function') {\r\n\t\t\t\to.cb();\r\n\t\t\t\tdelete sndMap[res.localId];\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\tsetInterval(function() {\r\n\t\tvar now=new Date();\r\n\t\tfor (var i in sndMap) {\r\n\t\t\tvar o=sndMap[i];\r\n\t\t\tif (now-o.t>=3000) {\r\n\t\t\t\to.cb && o.cb();\r\n\t\t\t\tdelete sndMap[i];\r\n\t\t\t}\r\n\t\t}\r\n\t}, 3000);\r\n}\r\naccWechatIntf('weixin/sign', {}, function(err, conf) {\r\n\tif (err) return console.log(err);\r\n\tvar WechatJSSDK = require('../wechat-jssdk/client.js');\r\n\tconf.jsApiList=['onMenuShareTimeline', 'onMenuShareAppMessage','startRecord', 'stopRecord','onVoiceRecordEnd','playVoice','pauseVoice','stopVoice','onVoicePlayEnd','uploadVoice','downloadVoice'];\r\n\tconf.success=function() {\r\n\t\twindow.wxInit && window.wxInit();\r\n\t}\r\n\tvar wechatObj=window.wechatObj= new WechatJSSDK(conf);\r\n});\r\n\r\nwindow.wxInit=function() {\r\n\tvar shareObj={\r\n\t\t\ttype: 'link',\r\n\t\t\ttitle: '牛牛大作战，大家来斗牛',\r\n\t\t\tlink: location.origin+location.pathname,\r\n\t\t\timgUrl: location.origin+location.pathname+'res/logo.png',\r\n\t\t\tdesc: ''\r\n\t\t\t//success: function (){},\r\n\t\t\t//cancel: function (){}\t\t\r\n\t\t};\r\n\ttry {\r\n\t\twindow.wechatObj.shareOnChat(shareObj);\r\n\t\twindow.wechatObj.shareOnMoment(shareObj);\r\n\t} catch(e) {\r\n\t\tconsole.log(e);\r\n\t}\r\n\r\n\twx.startRecord();\r\n\tfunction tryStop() {\r\n\t\tvar _t=setInterval(function() {\r\n\t\t\twx.stopRecord({\r\n\t\t\t\tsuccess: function (res) {\r\n\t\t\t\t\tclearInterval(_t);\t\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}, 300);\r\n\t}\r\n\ttryStop();\r\n\r\n\t_init();\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./client/pf/wechat.js\n **/","var t = require('./tongji_zhuge.js');\nmodule.exports = t;\n\n\n/** WEBPACK FOOTER **\n ** ./client/tongji.js\n **/","/*!\n * @license MIT\n * Client side js to use wechat-jssdk, also works with other server side service.\n * https://github.com/JasonBoy/wechat-jssdk\n */\n\n'use strict';\n\nconst document = window.document;\nconst location = window.location;\n\n\n//default wechat script url\nlet defaultScriptUrl = location.protocol + '//res.wx.qq.com/open/js/jweixin-1.0.0.js';\n\n//default apis with share-on-moment and share-on-chat\nconst defaultApiList = ['onMenuShareTimeline', 'onMenuShareAppMessage'];\n\nclass WechatJSSDK {\n  /**\n   * Initialize the WechatJSSDK instance\n   * @constructor\n   * @param {object} wechatConfig, should contain like:\n   *   {\n   *      appId: 'xxxx',\n   *      timestamp: '',\n   *      nonceStr: '',\n   *      signature: '',\n   *      jsApiList: ['onMenuShareTimeline', 'onMenuShareAppMessage', ...],\n   *      success: function(){}, //sign success callback\n   *      error: function(){}, //sign error callback\n   *      customUrl: 'http://res.wx.qq.com/open/js/jweixin-1.0.0.js' // set custom weixin script url\n   *   }\n   * @returns {WechatJSSDK}\n   */\n  constructor (wechatConfig) {\n    //using new WechatJSSDK(config);\n    if (this instanceof WechatJSSDK) {\n      this.config = wechatConfig || {};\n      if (this.config.customUrl) {\n        defaultScriptUrl = this.config.customUrl;\n        delete this.config.customUrl;\n      }\n      let apiList = this.config.jsApiList;\n      //add more apis if passed in\n      if (!apiList || apiList.length <= 0) {\n        this.config.jsApiList = defaultApiList;\n      } else {\n        let i = 0;\n        const length = defaultApiList.length;\n        for (; i < length; i++) {\n          const defaultItem = defaultApiList[i];\n          if (apiList.indexOf(defaultItem) < 0) {\n            apiList.push(defaultItem);\n          }\n        }\n      }\n      this.debug = !!this.config.debug;\n      this.loadScript();\n      return this;\n    }\n    return new WechatJSSDK(wechatConfig);\n  }\n\n  /**\n   * Sign the signature now\n   * @param {object} [newSignConfig], debug mode, appId, jsApiList cannot be changed!!!\n   *        , should only provide new signature specific config\n   * @returns {WechatJSSDK} sdk instance\n   */\n  signSignature (newSignConfig) {\n    const selfConfig = this.config;\n    const config = newSignConfig || selfConfig;\n    const signConfig = {\n      debug: this.debug,\n      appId: selfConfig.appId,\n      timestamp: config.timestamp || selfConfig.timestamp,\n      nonceStr: config.nonceStr || selfConfig.nonceStr,\n      signature: config.signature || selfConfig.signature,\n      jsApiList: selfConfig.jsApiList.slice(0, selfConfig.jsApiList.length)\n    };\n    const debug = this.debug;\n    if (!window.wx) {\n      console.warn('wechat js not defined');\n      return this;\n    }\n    const wx = window.wx;\n    wx.config(signConfig);\n    wx.ready(() => {\n      console.log('sign signature finished...');\n      debug && alert('sign signature finished...');\n      config.success && config.success.call(this);\n    });\n\n    wx.error((err) => {\n      debug && alert('sign error: ' + JSON.stringify(err));\n      config.error && config.error.call(this, err);\n    });\n\n    //export original wx object\n    this.wx || (this.wx = wx);\n    return this;\n  };\n\n  /**\n   * Load wechat js script and sign the signature\n   * @returns {WechatJSSDK}\n   */\n  loadScript () {\n    const ele = document.createElement('script');\n    ele.type = 'text\\/javascript';\n    ele.async = true;\n    ele.onload = () => {\n      console.log('Wechat script loaded successfully!');\n      //init the wechat config\n      this.signSignature();\n    };\n    ele.onerror = (err) => {\n      console.error('Failed to load wechat script!');\n      console.error(err);\n      this.debug && alert('Cannot load wechat script!');\n    };\n    const linkEle = document.getElementsByTagName('script')[0];\n    linkEle.parentNode.insertBefore(ele, linkEle);\n    ele.src = defaultScriptUrl;\n    return this;\n  };\n\n  /**\n   * Quick way to set custom moment share configs\n   * @param {object} info\n   * @returns {WechatJSSDK}\n   */\n  shareOnMoment (info) {\n    if (!info) return this;\n    return this.callWechatApi('onMenuShareTimeline', info);\n  };\n\n  /**\n   * Quick way to set custom chat share configs\n   * @param {object} info\n   * @returns {WechatJSSDK}\n   */\n  shareOnChat (info) {\n    if (!info) return this;\n    return this.callWechatApi('onMenuShareAppMessage', info);\n  };\n\n  /**\n   * Call any wechat api\n   * @param {string} apiName\n   * @param {object} config specific api config\n   * @returns {WechatJSSDK}\n   */\n  callWechatApi (apiName, config) {\n    if (!apiName) return this;\n    const debug = this.debug;\n    if (this.config.jsApiList.indexOf(apiName) < 0) {\n      debug && alert('the wechat api [' + apiName + '] you call was not registered, \\npls add the api into your [jsApiList] config');\n      return this;\n    }\n    let customAPI = this.wx[apiName];\n    if (!customAPI || 'function' !== typeof customAPI) {\n      debug && alert('no such api [' + apiName + '] found!');\n      return this;\n    }\n    customAPI(config);\n    return this;\n  };\n}\n\nmodule.exports = WechatJSSDK;\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./client/wechat-jssdk/client.js\n **/","window.zhuge = window.zhuge || [];\nwindow.zhuge.methods = \"_init debug identify track trackLink trackForm page\".split(\" \");\nwindow.zhuge.factory = function(b) {\n    return function() {\n        var a = Array.prototype.slice.call(arguments);\n        a.unshift(b);\n        window.zhuge.push(a);\n        return window.zhuge;\n    }\n};\nfor (var i = 0; i < window.zhuge.methods.length; i++) {\n    var key = window.zhuge.methods[i];\n    window.zhuge[key] = window.zhuge.factory(key);\n}\nwindow.zhuge.load = function(b, x) {\n    if (!document.getElementById(\"zhuge-js\")) {\n        var a = document.createElement(\"script\");\n        var verDate = new Date();\n        var verStr = verDate.getFullYear().toString() + verDate.getMonth().toString() + verDate.getDate().toString();\n        a.type = \"text/javascript\";\n        a.id = \"zhuge-js\";\n        a.async = !0;\n        a.src = (location.protocol == 'http:' ? \"http://sdk.zhugeio.com/zhuge.min.js?v=\" : 'https://zgsdk.zhugeio.com/zhuge.min.js?v=') + verStr;\n        a.onerror = function() {\n            window.zhuge.identify = window.zhuge.track = function(ename, props, callback) {\n                if (callback && Object.prototype.toString.call(callback) === '[object Function]') callback();\n            };\n        };\n        var c = document.getElementsByTagName(\"script\")[0];\n        c.parentNode.insertBefore(a, c);\n        window.zhuge._init(b, x)\n    }\n};\nwindow.zhuge.load('a6294c4a959947719afd7248e98fe072'); //配置应用的AppKey\n\nfunction noop() {}\n\nclass Stat {\n    constructor() {\n        this._delayOp = [];\n        this._inited = true;\n    }\n    init(key) {\n        this._inited = true;\n        return;\n    }\n    _delay(f) {\n        if (!this._inited) {\n            return this._delayOp.push({ f: f });\n        }\n        f();\n    }\n    userin(me) {\n        this._delay(function() {\n            var qudao = 0;\n            if (!!window.cordova) {\n                var o = { \"Android\": 1, \"BlackBerry 10\": 2, \"browser\": 3, \"iOS\": 4, \"WinCE\": 5, \"Tizen\": 6, \"Mac OS X\": 7 };\n                qudao = device.platform;\n            } else if (startup_param.pf == 'wechat') qudao = 'wechat';\n            zhuge.identify(me.id, {\n                name: me.nickname,\n                //预定义属性\n                gender: startup_param.sex,\n                //预定义属性\n                level: me.level,\n                gameServer: '通用',\n                accountType: qudao,\n            });\n        });\n    }\n    userout() {\n        this._delay(function() { zhuge.track('userout') });\n    }\n    levelup(n) {\n        this._delay(function() { zhuge.track('levelup', { level: n }) });\n    }\n    reward(n, reason) {\n        this._delay(function() { zhuge.track('reward', { count: n, reason: reason }) });\n    }\n    beginCharge(orderid, money, tickets, desc, payment) {\n        if (typeof tickets == 'string') {\n            payment = desc;\n            desc = tickets;\n            tickets = Math.floor(money / 3);\n        }\n        this._delay(function() {\n            zhuge.track('beginCharge', {\n                orderId: orderid,\n                iapId: desc,\n                currencyAmount: money,\n                currencyType: 'CNY',\n                virtualCurrencyAmount: tickets,\n                paymentType: payment\n            });\n        });\n    }\n    endCharge(orderid, payment) {\n        this._delay(function() {\n            zhuge.track('endCharge', {\n                orderId: orderid,\n                paymentType: payment\n            });\n        });\n    }\n    enterGame(tableid) {\n        this._delay(function() {\n            zhuge.track('enterGame', { table: tableid });\n        });\n    }\n    startGame(tableid, name, tickets) {\n        this._delay(function() {\n            zhuge.track('startgame', { table: tableid, name: name });\n            if (tickets) zhuge.track('consume', { item: name, itemNumber: 1, priceInVirtualCurrency: tickets });\n        });\n    }\n    endGame(tableid) {\n        this._delay(function() {\n            zhuge.track('endGame', { table: tableid });\n        });\n    }\n    share() {\n        this._delay(function() {\n            zhuge.track('share', { user: { id: me.id, nickname: me.nickname } });\n        });\n    }\n    invite(tableid, tabledesc) {\n        this._delay(function() {\n            zhuge.track('invite', { user: { id: me.id, nickname: me.nickname }, table: { id: tableid, msg: tabledesc } });\n        });\n    }\n    event(name, data) {\n        this._delay(function() {\n            zhuge.track(name, (typeof data == 'object' ? data : { data: data }));\n        });\n    }\n\n    /**\n     * \n     * @param {number} n , 换多少币\n     * @param {number} m ，上级币的数量\n     * @param {string|null} n_name, 本级货币名称，默认金币\n     * @param {string|null} m_name, 上级货币名称，默认钻石\n     */\n    changeToVirtualCurrency(n, m, n_name, m_name) {\n            n_name = n_name || '金币';\n            m_name = m_name || '钻石';\n            this._delay(function() {\n                var detail = {};\n                detail[n_name] = n;\n                detail[m_name] = m;\n                zhuge.track('buyCoin', detail);\n            });\n        }\n        /**\n         * 消耗虚拟币，如果有3个参数，那么是消耗n*price的币，\n         * @param {string} name \n         * @param {number} n \n         * @param {number|null} price \n         */\n    consume(name, n, price) {\n        this._delay(function() {\n            zhuge.track('consume', { item: name, itemNumber: n, priceInVirtualCurrency: price })\n        });\n    }\n}\n\nvar tongji = new Stat();\nwindow.onunload = tongji.userout.bind(tongji);\n\nmodule.exports = tongji;\n\n\n/** WEBPACK FOOTER **\n ** ./client/tongji_zhuge.js\n **/"],"sourceRoot":""}